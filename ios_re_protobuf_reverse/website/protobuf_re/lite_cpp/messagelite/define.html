
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <title>MessageLite定义 · iOS逆向YouTube：protobuf逆向</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 3.7.1">
        <meta name="author" content="Crifan Li <admin@crifan.com>">
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-expandable-menu/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-prism/prism-atom-dark.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-splitter-nosessionbutcookie/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-callouts/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../../youtube/" />
    
    
    <link rel="prev" href="./" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"repo":"ios_re_protobuf_reverse","user":"crifan","type":"star","count":true,"size":"small"},{"user":"crifan","type":"follow","width":"120","count":false,"size":"small"}]};
    </script>

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="http://www.crifan.org" target="_blank" class="custom-link">主页</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                        <b>1.1.</b>
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../../protobuf_overview/">
            
                <a href="../../../protobuf_overview/">
            
                    
                        <b>1.2.</b>
                    
                    Protobuf概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../../protobuf_dev/">
            
                <a href="../../../protobuf_dev/">
            
                    
                        <b>1.3.</b>
                    
                    Protobuf正向
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../">
            
                <a href="../../">
            
                    
                        <b>1.4.</b>
                    
                    Protobuf逆向
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../normal_ios/">
            
                <a href="../../normal_ios/">
            
                    
                        <b>1.4.1.</b>
                    
                    普通的iOS类
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../../normal_ios/gpbmessage.html">
            
                <a href="../../normal_ios/gpbmessage.html">
            
                    
                        <b>1.4.1.1.</b>
                    
                    GPBMessage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../../normal_ios/gpbdescriptor.html">
            
                <a href="../../normal_ios/gpbdescriptor.html">
            
                    
                        <b>1.4.1.2.</b>
                    
                    GPBDescriptor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../../normal_ios/gpbfielddescriptor.html">
            
                <a href="../../normal_ios/gpbfielddescriptor.html">
            
                    
                        <b>1.4.1.3.</b>
                    
                    GPBFieldDescriptor
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.4.2.</b>
                    
                    lite的C++类
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="./">
            
                <a href="./">
            
                    
                        <b>1.4.2.1.</b>
                    
                    MessageLite
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.4.2.1.1" data-path="define.html">
            
                <a href="define.html">
            
                    
                        <b>1.4.2.1.1.</b>
                    
                    MessageLite定义
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../youtube/">
            
                <a href="../../youtube/">
            
                    
                        <b>1.4.3.</b>
                    
                    YouTube中Protobuf
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="../../youtube/normal_ios/">
            
                <a href="../../youtube/normal_ios/">
            
                    
                        <b>1.4.3.1.</b>
                    
                    普通的iOS类
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1.1" data-path="../../youtube/normal_ios/ytiplayerrequest.html">
            
                <a href="../../youtube/normal_ios/ytiplayerrequest.html">
            
                    
                        <b>1.4.3.1.1.</b>
                    
                    YTIPlayerRequest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.1.2" data-path="../../youtube/normal_ios/ytiadbreakrequest.html">
            
                <a href="../../youtube/normal_ios/ytiadbreakrequest.html">
            
                    
                        <b>1.4.3.1.2.</b>
                    
                    YTIAdBreakRequest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.1.3" data-path="../../youtube/normal_ios/ytiinnertubecontext.html">
            
                <a href="../../youtube/normal_ios/ytiinnertubecontext.html">
            
                    
                        <b>1.4.3.1.3.</b>
                    
                    YTIInnerTubeContext
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.1.4" data-path="../../youtube/normal_ios/yticlientinfo.html">
            
                <a href="../../youtube/normal_ios/yticlientinfo.html">
            
                    
                        <b>1.4.3.1.4.</b>
                    
                    YTIClientInfo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.1.5" data-path="../../youtube/normal_ios/ytionesiehotconfig.html">
            
                <a href="../../youtube/normal_ios/ytionesiehotconfig.html">
            
                    
                        <b>1.4.3.1.5.</b>
                    
                    YTIOnesieHotConfig
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="../../youtube/lite_cpp/">
            
                <a href="../../youtube/lite_cpp/">
            
                    
                        <b>1.4.3.2.</b>
                    
                    lite的C++类
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.2.1" data-path="../../youtube/lite_cpp/onesierequestproto.html">
            
                <a href="../../youtube/lite_cpp/onesierequestproto.html">
            
                    
                        <b>1.4.3.2.1.</b>
                    
                    OnesieRequestProto
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../../appendix/">
            
                <a href="../../../appendix/">
            
                    
                        <b>1.5.</b>
                    
                    附录
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../../appendix/reference.html">
            
                <a href="../../../appendix/reference.html">
            
                    
                        <b>1.5.1.</b>
                    
                    参考资料
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            本书使用 HonKit 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >MessageLite定义</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <html><head></head><body><h1 id="messagelite的定义"><a name="messagelite的定义" class="plugin-anchor" href="#messagelite的定义"><i class="fa fa-link" aria-hidden="true"></i></a><code>MessageLite</code>的定义</h1>
<p>对于<code>MessageLite</code>的定义，目前找到了几个地方：</p>
<h2 id="c版messagelite"><a name="c版messagelite" class="plugin-anchor" href="#c版messagelite"><i class="fa fa-link" aria-hidden="true"></i></a><code>C++</code>版<code>MessageLite</code></h2>
<h3 id="c版messagelite的代码定义"><a name="c版messagelite的代码定义" class="plugin-anchor" href="#c版messagelite的代码定义"><i class="fa fa-link" aria-hidden="true"></i></a><code>C++</code>版<code>MessageLite</code>的代码定义</h3>
<ul>
<li><a href="https://chromium.googlesource.com/chromium/src/third_party/+/master/protobuf/src/google/protobuf/message_lite.h" target="_blank">protobuf/src/google/protobuf/message_lite.h - chromium/src/third_party - Git at Google</a></li>
</ul>
<pre class="language-"><code class="lang-cpp"><span class="token comment">// Protocol Buffers - Google&apos;s data interchange format</span>
<span class="token comment">// Copyright 2008 Google Inc.  All rights reserved.</span>
<span class="token comment">// https://developers.google.com/protocol-buffers/</span>
<span class="token comment">//</span>
<span class="token comment">// Redistribution and use in source and binary forms, with or without</span>
<span class="token comment">// modification, are permitted provided that the following conditions are</span>
<span class="token comment">// met:</span>
<span class="token comment">//</span>
<span class="token comment">//     * Redistributions of source code must retain the above copyright</span>
<span class="token comment">// notice, this list of conditions and the following disclaimer.</span>
<span class="token comment">//     * Redistributions in binary form must reproduce the above</span>
<span class="token comment">// copyright notice, this list of conditions and the following disclaimer</span>
<span class="token comment">// in the documentation and/or other materials provided with the</span>
<span class="token comment">// distribution.</span>
<span class="token comment">//     * Neither the name of Google Inc. nor the names of its</span>
<span class="token comment">// contributors may be used to endorse or promote products derived from</span>
<span class="token comment">// this software without specific prior written permission.</span>
<span class="token comment">//</span>
<span class="token comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<span class="token comment">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<span class="token comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<span class="token comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<span class="token comment">// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<span class="token comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<span class="token comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<span class="token comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<span class="token comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<span class="token comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<span class="token comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="token comment">// Authors: wink@google.com (Wink Saville),</span>
<span class="token comment">//          kenton@google.com (Kenton Varda)</span>
<span class="token comment">//  Based on original Protocol Buffers design by</span>
<span class="token comment">//  Sanjay Ghemawat, Jeff Dean, and others.</span>
<span class="token comment">//</span>
<span class="token comment">// Defines MessageLite, the abstract interface implemented by all (lite</span>
<span class="token comment">// and non-lite) protocol message objects.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">GOOGLE_PROTOBUF_MESSAGE_LITE_H__</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GOOGLE_PROTOBUF_MESSAGE_LITE_H__</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;climits&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/stubs/common.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/stubs/logging.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/io/coded_stream.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/arena.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/stubs/once.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/port.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/stubs/strutil.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/explicitly_constructed.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/metadata_lite.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/stubs/hash.h&gt;</span>  <span class="token comment">// TODO(b/211442718): cleanup</span></span>
<span class="token comment">// clang-format off</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/port_def.inc&gt;</span></span>
<span class="token comment">// clang-format on</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">SWIG</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">error</span> <span class="token string">&quot;You cannot SWIG proto headers&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
<span class="token keyword">namespace</span> google <span class="token punctuation">{</span>
<span class="token keyword">namespace</span> protobuf <span class="token punctuation">{</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">RepeatedPtrField</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">FastReflectionMessageMutator</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">FastReflectionStringSetter</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Reflection</span><span class="token punctuation">;</span>
<span class="token keyword">namespace</span> io <span class="token punctuation">{</span>
<span class="token keyword">class</span> <span class="token class-name">CodedInputStream</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">CodedOutputStream</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ZeroCopyInputStream</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ZeroCopyOutputStream</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>  <span class="token comment">// namespace io</span>
<span class="token keyword">namespace</span> internal <span class="token punctuation">{</span>
<span class="token keyword">class</span> <span class="token class-name">SwapFieldHelper</span><span class="token punctuation">;</span>
<span class="token comment">// See parse_context.h for explanation</span>
<span class="token keyword">class</span> <span class="token class-name">ParseContext</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ExtensionSet</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">LazyField</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">RepeatedPtrFieldBase</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">TcParser</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">WireFormatLite</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">WeakFieldMap</span><span class="token punctuation">;</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">Type</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">GenericTypeHandler</span><span class="token punctuation">;</span>  <span class="token comment">// defined in repeated_field.h</span>
<span class="token comment">// We compute sizes as size_t but cache them as int.  This function converts a</span>
<span class="token comment">// computed size to a cached size.  Since we don&apos;t proceed with serialization</span>
<span class="token comment">// if the total size was &gt; INT_MAX, it is not important what this function</span>
<span class="token comment">// returns for inputs &gt; INT_MAX.  However this case should not error or</span>
<span class="token comment">// GOOGLE_CHECK-fail, because the full size_t resolution is still returned from</span>
<span class="token comment">// ByteSizeLong() and checked against INT_MAX; we can catch the overflow</span>
<span class="token comment">// there.</span>
<span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">ToCachedSize</span><span class="token punctuation">(</span>size_t size<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token comment">// We mainly calculate sizes in terms of size_t, but some functions that</span>
<span class="token comment">// compute sizes return &quot;int&quot;.  These int sizes are expected to always be</span>
<span class="token comment">// positive. This function is more efficient than casting an int to size_t</span>
<span class="token comment">// directly on 64-bit platforms because it avoids making the compiler emit a</span>
<span class="token comment">// sign extending instruction, which we don&apos;t want and don&apos;t want to pay for.</span>
<span class="token keyword">inline</span> size_t <span class="token function">FromIntSize</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Convert to unsigned before widening so sign extension is not necessary.</span>
  <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// For cases where a legacy function returns an integer size.  We GOOGLE_DCHECK()</span>
<span class="token comment">// that the conversion will fit within an integer; if this is false then we</span>
<span class="token comment">// are losing information.</span>
<span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">ToIntSize</span><span class="token punctuation">(</span>size_t size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">GOOGLE_DCHECK_LE</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>size_t<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>INT_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Default empty string object. Don&apos;t use this directly. Instead, call</span>
<span class="token comment">// GetEmptyString() to get the reference. This empty string is aligned with a</span>
<span class="token comment">// minimum alignment of 8 bytes to match the requirement of ArenaStringPtr.</span>
PROTOBUF_EXPORT <span class="token keyword">extern</span> ExplicitlyConstructedArenaString
    fixed_address_empty_string<span class="token punctuation">;</span>
PROTOBUF_EXPORT <span class="token keyword">constexpr</span> <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> <span class="token function">GetEmptyStringAlreadyInited</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> fixed_address_empty_string<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
PROTOBUF_EXPORT size_t <span class="token function">StringSpaceUsedExcludingSelfLong</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>  <span class="token comment">// namespace internal</span>
<span class="token comment">// Interface to light weight protocol messages.</span>
<span class="token comment">//</span>
<span class="token comment">// This interface is implemented by all protocol message objects.  Non-lite</span>
<span class="token comment">// messages additionally implement the Message interface, which is a</span>
<span class="token comment">// subclass of MessageLite.  Use MessageLite instead when you only need</span>
<span class="token comment">// the subset of features which it supports -- namely, nothing that uses</span>
<span class="token comment">// descriptors or reflection.  You can instruct the protocol compiler</span>
<span class="token comment">// to generate classes which implement only MessageLite, not the full</span>
<span class="token comment">// Message interface, by adding the following line to the .proto file:</span>
<span class="token comment">//</span>
<span class="token comment">//   option optimize_for = LITE_RUNTIME;</span>
<span class="token comment">//</span>
<span class="token comment">// This is particularly useful on resource-constrained systems where</span>
<span class="token comment">// the full protocol buffers runtime library is too big.</span>
<span class="token comment">//</span>
<span class="token comment">// Note that on non-constrained systems (e.g. servers) when you need</span>
<span class="token comment">// to link in lots of protocol definitions, a better way to reduce</span>
<span class="token comment">// total code footprint is to use optimize_for = CODE_SIZE.  This</span>
<span class="token comment">// will make the generated code smaller while still supporting all the</span>
<span class="token comment">// same features (at the expense of speed).  optimize_for = LITE_RUNTIME</span>
<span class="token comment">// is best when you only have a small number of message types linked</span>
<span class="token comment">// into your binary, in which case the size of the protocol buffers</span>
<span class="token comment">// runtime itself is the biggest problem.</span>
<span class="token comment">//</span>
<span class="token comment">// Users must not derive from this class. Only the protocol compiler and</span>
<span class="token comment">// the internal library are allowed to create subclasses.</span>
<span class="token keyword">class</span> <span class="token class-name">PROTOBUF_EXPORT</span> MessageLite <span class="token punctuation">{</span>
 <span class="token keyword">public</span><span class="token operator">:</span>
  <span class="token keyword">constexpr</span> <span class="token function">MessageLite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">MessageLite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
  <span class="token comment">// Basic Operations ------------------------------------------------</span>
  <span class="token comment">// Get the name of this message type, e.g. &quot;foo.bar.BazProto&quot;.</span>
  <span class="token keyword">virtual</span> std<span class="token double-colon punctuation">::</span>string <span class="token function">GetTypeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// Construct a new instance of the same type.  Ownership is passed to the</span>
  <span class="token comment">// caller.</span>
  MessageLite<span class="token operator">*</span> <span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">New</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token comment">// Construct a new instance on the arena. Ownership is passed to the caller</span>
  <span class="token comment">// if arena is a nullptr.</span>
  <span class="token keyword">virtual</span> MessageLite<span class="token operator">*</span> <span class="token function">New</span><span class="token punctuation">(</span>Arena<span class="token operator">*</span> arena<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// Returns user-owned arena; nullptr if it&apos;s message owned.</span>
  Arena<span class="token operator">*</span> <span class="token function">GetArena</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _internal_metadata_<span class="token punctuation">.</span><span class="token function">user_arena</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token comment">// Clear all fields of the message and set them to their default values.</span>
  <span class="token comment">// Clear() avoids freeing memory, assuming that any memory allocated</span>
  <span class="token comment">// to hold parts of the message will be needed again to hold the next</span>
  <span class="token comment">// message.  If you actually want to free the memory used by a Message,</span>
  <span class="token comment">// you must delete it.</span>
  <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// Quickly check if all required fields have values set.</span>
  <span class="token keyword">virtual</span> <span class="token keyword">bool</span> <span class="token function">IsInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// This is not implemented for Lite messages -- it just returns &quot;(cannot</span>
  <span class="token comment">// determine missing fields for lite message)&quot;.  However, it is implemented</span>
  <span class="token comment">// for full messages.  See message.h.</span>
  <span class="token keyword">virtual</span> std<span class="token double-colon punctuation">::</span>string <span class="token function">InitializationErrorString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// If |other| is the exact same class as this, calls MergeFrom(). Otherwise,</span>
  <span class="token comment">// results are undefined (probably crash).</span>
  <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">CheckTypeAndMergeFrom</span><span class="token punctuation">(</span><span class="token keyword">const</span> MessageLite<span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// These methods return a human-readable summary of the message. Note that</span>
  <span class="token comment">// since the MessageLite interface does not support reflection, there is very</span>
  <span class="token comment">// little information that these methods can provide. They are shadowed by</span>
  <span class="token comment">// methods of the same name on the Message interface which provide much more</span>
  <span class="token comment">// information. The methods here are intended primarily to facilitate code</span>
  <span class="token comment">// reuse for logic that needs to interoperate with both full and lite protos.</span>
  <span class="token comment">//</span>
  <span class="token comment">// The format of the returned string is subject to change, so please do not</span>
  <span class="token comment">// assume it will remain stable over time.</span>
  std<span class="token double-colon punctuation">::</span>string <span class="token function">DebugString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  std<span class="token double-colon punctuation">::</span>string <span class="token function">ShortDebugString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">DebugString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token comment">// MessageLite::DebugString is already Utf8 Safe. This is to add compatibility</span>
  <span class="token comment">// with Message.</span>
  std<span class="token double-colon punctuation">::</span>string <span class="token function">Utf8DebugString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">DebugString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token comment">// Parsing ---------------------------------------------------------</span>
  <span class="token comment">// Methods for parsing in protocol buffer format.  Most of these are</span>
  <span class="token comment">// just simple wrappers around MergeFromCodedStream().  Clear() will be</span>
  <span class="token comment">// called before merging the input.</span>
  <span class="token comment">// Fill the message with a protocol buffer parsed from the given input</span>
  <span class="token comment">// stream. Returns false on a read error or if the input is in the wrong</span>
  <span class="token comment">// format.  A successful return does not indicate the entire input is</span>
  <span class="token comment">// consumed, ensure you call ConsumedEntireMessage() to check that if</span>
  <span class="token comment">// applicable.</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParseFromCodedStream</span><span class="token punctuation">(</span>
      io<span class="token double-colon punctuation">::</span>CodedInputStream<span class="token operator">*</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Like ParseFromCodedStream(), but accepts messages that are missing</span>
  <span class="token comment">// required fields.</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParsePartialFromCodedStream</span><span class="token punctuation">(</span>
      io<span class="token double-colon punctuation">::</span>CodedInputStream<span class="token operator">*</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Read a protocol buffer from the given zero-copy input stream.  If</span>
  <span class="token comment">// successful, the entire input will be consumed.</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParseFromZeroCopyStream</span><span class="token punctuation">(</span>
      io<span class="token double-colon punctuation">::</span>ZeroCopyInputStream<span class="token operator">*</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Like ParseFromZeroCopyStream(), but accepts messages that are missing</span>
  <span class="token comment">// required fields.</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParsePartialFromZeroCopyStream</span><span class="token punctuation">(</span>
      io<span class="token double-colon punctuation">::</span>ZeroCopyInputStream<span class="token operator">*</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Parse a protocol buffer from a file descriptor.  If successful, the entire</span>
  <span class="token comment">// input will be consumed.</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParseFromFileDescriptor</span><span class="token punctuation">(</span>
      <span class="token keyword">int</span> file_descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Like ParseFromFileDescriptor(), but accepts messages that are missing</span>
  <span class="token comment">// required fields.</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParsePartialFromFileDescriptor</span><span class="token punctuation">(</span>
      <span class="token keyword">int</span> file_descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Parse a protocol buffer from a C++ istream.  If successful, the entire</span>
  <span class="token comment">// input will be consumed.</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParseFromIstream</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>istream<span class="token operator">*</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Like ParseFromIstream(), but accepts messages that are missing</span>
  <span class="token comment">// required fields.</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParsePartialFromIstream</span><span class="token punctuation">(</span>
      std<span class="token double-colon punctuation">::</span>istream<span class="token operator">*</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Read a protocol buffer from the given zero-copy input stream, expecting</span>
  <span class="token comment">// the message to be exactly &quot;size&quot; bytes long.  If successful, exactly</span>
  <span class="token comment">// this many bytes will have been consumed from the input.</span>
  <span class="token keyword">bool</span> <span class="token function">MergePartialFromBoundedZeroCopyStream</span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>ZeroCopyInputStream<span class="token operator">*</span> input<span class="token punctuation">,</span>
                                             <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Like ParseFromBoundedZeroCopyStream(), but accepts messages that are</span>
  <span class="token comment">// missing required fields.</span>
  <span class="token keyword">bool</span> <span class="token function">MergeFromBoundedZeroCopyStream</span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>ZeroCopyInputStream<span class="token operator">*</span> input<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParseFromBoundedZeroCopyStream</span><span class="token punctuation">(</span>
      io<span class="token double-colon punctuation">::</span>ZeroCopyInputStream<span class="token operator">*</span> input<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Like ParseFromBoundedZeroCopyStream(), but accepts messages that are</span>
  <span class="token comment">// missing required fields.</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParsePartialFromBoundedZeroCopyStream</span><span class="token punctuation">(</span>
      io<span class="token double-colon punctuation">::</span>ZeroCopyInputStream<span class="token operator">*</span> input<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Parses a protocol buffer contained in a string. Returns true on success.</span>
  <span class="token comment">// This function takes a string in the (non-human-readable) binary wire</span>
  <span class="token comment">// format, matching the encoding output by MessageLite::SerializeToString().</span>
  <span class="token comment">// If you&apos;d like to convert a human-readable string into a protocol buffer</span>
  <span class="token comment">// object, see google::protobuf::TextFormat::ParseFromString().</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParseFromString</span><span class="token punctuation">(</span>ConstStringParam data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Like ParseFromString(), but accepts messages that are missing</span>
  <span class="token comment">// required fields.</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParsePartialFromString</span><span class="token punctuation">(</span>
      ConstStringParam data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Parse a protocol buffer contained in an array of bytes.</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParseFromArray</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> data<span class="token punctuation">,</span>
                                                       <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Like ParseFromArray(), but accepts messages that are missing</span>
  <span class="token comment">// required fields.</span>
  PROTOBUF_ATTRIBUTE_REINITIALIZES <span class="token keyword">bool</span> <span class="token function">ParsePartialFromArray</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> data<span class="token punctuation">,</span>
                                                              <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Reads a protocol buffer from the stream and merges it into this</span>
  <span class="token comment">// Message.  Singular fields read from the what is</span>
  <span class="token comment">// already in the Message and repeated fields are appended to those</span>
  <span class="token comment">// already present.</span>
  <span class="token comment">//</span>
  <span class="token comment">// It is the responsibility of the caller to call input-&gt;LastTagWas()</span>
  <span class="token comment">// (for groups) or input-&gt;ConsumedEntireMessage() (for non-groups) after</span>
  <span class="token comment">// this returns to verify that the message&apos;s end was delimited correctly.</span>
  <span class="token comment">//</span>
  <span class="token comment">// ParseFromCodedStream() is implemented as Clear() followed by</span>
  <span class="token comment">// MergeFromCodedStream().</span>
  <span class="token keyword">bool</span> <span class="token function">MergeFromCodedStream</span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>CodedInputStream<span class="token operator">*</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Like MergeFromCodedStream(), but succeeds even if required fields are</span>
  <span class="token comment">// missing in the input.</span>
  <span class="token comment">//</span>
  <span class="token comment">// MergeFromCodedStream() is just implemented as MergePartialFromCodedStream()</span>
  <span class="token comment">// followed by IsInitialized().</span>
  <span class="token keyword">bool</span> <span class="token function">MergePartialFromCodedStream</span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>CodedInputStream<span class="token operator">*</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Merge a protocol buffer contained in a string.</span>
  <span class="token keyword">bool</span> <span class="token function">MergeFromString</span><span class="token punctuation">(</span>ConstStringParam data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Serialization ---------------------------------------------------</span>
  <span class="token comment">// Methods for serializing in protocol buffer format.  Most of these</span>
  <span class="token comment">// are just simple wrappers around ByteSize() and SerializeWithCachedSizes().</span>
  <span class="token comment">// Write a protocol buffer of this message to the given output.  Returns</span>
  <span class="token comment">// false on a write error.  If the message is missing required fields,</span>
  <span class="token comment">// this may GOOGLE_CHECK-fail.</span>
  <span class="token keyword">bool</span> <span class="token function">SerializeToCodedStream</span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>CodedOutputStream<span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Like SerializeToCodedStream(), but allows missing required fields.</span>
  <span class="token keyword">bool</span> <span class="token function">SerializePartialToCodedStream</span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>CodedOutputStream<span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Write the message to the given zero-copy output stream.  All required</span>
  <span class="token comment">// fields must be set.</span>
  <span class="token keyword">bool</span> <span class="token function">SerializeToZeroCopyStream</span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>ZeroCopyOutputStream<span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Like SerializeToZeroCopyStream(), but allows missing required fields.</span>
  <span class="token keyword">bool</span> <span class="token function">SerializePartialToZeroCopyStream</span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>ZeroCopyOutputStream<span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Serialize the message and store it in the given string.  All required</span>
  <span class="token comment">// fields must be set.</span>
  <span class="token keyword">bool</span> <span class="token function">SerializeToString</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Like SerializeToString(), but allows missing required fields.</span>
  <span class="token keyword">bool</span> <span class="token function">SerializePartialToString</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Serialize the message and store it in the given byte array.  All required</span>
  <span class="token comment">// fields must be set.</span>
  <span class="token keyword">bool</span> <span class="token function">SerializeToArray</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Like SerializeToArray(), but allows missing required fields.</span>
  <span class="token keyword">bool</span> <span class="token function">SerializePartialToArray</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Make a string encoding the message. Is equivalent to calling</span>
  <span class="token comment">// SerializeToString() on a string and using that.  Returns the empty</span>
  <span class="token comment">// string if SerializeToString() would have returned an error.</span>
  <span class="token comment">// Note: If you intend to generate many such strings, you may</span>
  <span class="token comment">// reduce heap fragmentation by instead re-using the same string</span>
  <span class="token comment">// object with calls to SerializeToString().</span>
  std<span class="token double-colon punctuation">::</span>string <span class="token function">SerializeAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Like SerializeAsString(), but allows missing required fields.</span>
  std<span class="token double-colon punctuation">::</span>string <span class="token function">SerializePartialAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Serialize the message and write it to the given file descriptor.  All</span>
  <span class="token comment">// required fields must be set.</span>
  <span class="token keyword">bool</span> <span class="token function">SerializeToFileDescriptor</span><span class="token punctuation">(</span><span class="token keyword">int</span> file_descriptor<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Like SerializeToFileDescriptor(), but allows missing required fields.</span>
  <span class="token keyword">bool</span> <span class="token function">SerializePartialToFileDescriptor</span><span class="token punctuation">(</span><span class="token keyword">int</span> file_descriptor<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Serialize the message and write it to the given C++ ostream.  All</span>
  <span class="token comment">// required fields must be set.</span>
  <span class="token keyword">bool</span> <span class="token function">SerializeToOstream</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>ostream<span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Like SerializeToOstream(), but allows missing required fields.</span>
  <span class="token keyword">bool</span> <span class="token function">SerializePartialToOstream</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>ostream<span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Like SerializeToString(), but appends to the data to the string&apos;s</span>
  <span class="token comment">// existing contents.  All required fields must be set.</span>
  <span class="token keyword">bool</span> <span class="token function">AppendToString</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Like AppendToString(), but allows missing required fields.</span>
  <span class="token keyword">bool</span> <span class="token function">AppendPartialToString</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Computes the serialized size of the message.  This recursively calls</span>
  <span class="token comment">// ByteSizeLong() on all embedded messages.</span>
  <span class="token comment">//</span>
  <span class="token comment">// ByteSizeLong() is generally linear in the number of fields defined for the</span>
  <span class="token comment">// proto.</span>
  <span class="token keyword">virtual</span> size_t <span class="token function">ByteSizeLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// Legacy ByteSize() API.</span>
  <span class="token function">PROTOBUF_DEPRECATED_MSG</span><span class="token punctuation">(</span><span class="token string">&quot;Please use ByteSizeLong() instead&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">int</span> <span class="token function">ByteSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> internal<span class="token double-colon punctuation">::</span><span class="token function">ToIntSize</span><span class="token punctuation">(</span><span class="token function">ByteSizeLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token comment">// Serializes the message without recomputing the size.  The message must not</span>
  <span class="token comment">// have changed since the last call to ByteSize(), and the value returned by</span>
  <span class="token comment">// ByteSize must be non-negative.  Otherwise the results are undefined.</span>
  <span class="token keyword">void</span> <span class="token function">SerializeWithCachedSizes</span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>CodedOutputStream<span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
    output<span class="token operator">-&gt;</span><span class="token function">SetCur</span><span class="token punctuation">(</span><span class="token function">_InternalSerialize</span><span class="token punctuation">(</span>output<span class="token operator">-&gt;</span><span class="token function">Cur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> output<span class="token operator">-&gt;</span><span class="token function">EpsCopy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Functions below here are not part of the public interface.  It isn&apos;t</span>
  <span class="token comment">// enforced, but they should be treated as private, and will be private</span>
  <span class="token comment">// at some future time.  Unfortunately the implementation of the &quot;friend&quot;</span>
  <span class="token comment">// keyword in GCC is broken at the moment, but we expect it will be fixed.</span>
  <span class="token comment">// Like SerializeWithCachedSizes, but writes directly to *target, returning</span>
  <span class="token comment">// a pointer to the byte immediately after the last byte written.  &quot;target&quot;</span>
  <span class="token comment">// must point at a byte array of at least ByteSize() bytes.  Whether to use</span>
  <span class="token comment">// deterministic serialization, e.g., maps in sorted order, is determined by</span>
  <span class="token comment">// CodedOutputStream::IsDefaultSerializationDeterministic().</span>
  <span class="token keyword">uint8_t</span><span class="token operator">*</span> <span class="token function">SerializeWithCachedSizesToArray</span><span class="token punctuation">(</span><span class="token keyword">uint8_t</span><span class="token operator">*</span> target<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// Returns the result of the last call to ByteSize().  An embedded message&apos;s</span>
  <span class="token comment">// size is needed both to serialize it (because embedded messages are</span>
  <span class="token comment">// length-delimited) and to compute the outer message&apos;s size.  Caching</span>
  <span class="token comment">// the size avoids computing it multiple times.</span>
  <span class="token comment">//</span>
  <span class="token comment">// ByteSize() does not automatically use the cached size when available</span>
  <span class="token comment">// because this would require invalidating it every time the message was</span>
  <span class="token comment">// modified, which would be too hard and expensive.  (E.g. if a deeply-nested</span>
  <span class="token comment">// sub-message is changed, all of its parents&apos; cached sizes would need to be</span>
  <span class="token comment">// invalidated, which is too much work for an otherwise inlined setter</span>
  <span class="token comment">// method.)</span>
  <span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">GetCachedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">virtual</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">_InternalParse</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token comment">/*ptr*/</span><span class="token punctuation">,</span>
                                     internal<span class="token double-colon punctuation">::</span>ParseContext<span class="token operator">*</span> <span class="token comment">/*ctx*/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnDemandRegisterArenaDtor</span><span class="token punctuation">(</span>Arena<span class="token operator">*</span> <span class="token comment">/*arena*/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token keyword">protected</span><span class="token operator">:</span>
  <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
  <span class="token keyword">static</span> T<span class="token operator">*</span> <span class="token function">CreateMaybeMessage</span><span class="token punctuation">(</span>Arena<span class="token operator">*</span> arena<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Arena<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">CreateMaybeMessage</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arena<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">inline</span> <span class="token keyword">explicit</span> <span class="token function">MessageLite</span><span class="token punctuation">(</span>Arena<span class="token operator">*</span> arena<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_message_owned <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token operator">:</span> <span class="token function">_internal_metadata_</span><span class="token punctuation">(</span>arena<span class="token punctuation">,</span> is_message_owned<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// Returns the arena, if any, that directly owns this message and its internal</span>
  <span class="token comment">// memory (Arena::Own is different in that the arena doesn&apos;t directly own the</span>
  <span class="token comment">// internal memory). This method is used in proto&apos;s implementation for</span>
  <span class="token comment">// swapping, moving and setting allocated, for deciding whether the ownership</span>
  <span class="token comment">// of this message or its internal memory could be changed.</span>
  Arena<span class="token operator">*</span> <span class="token function">GetOwningArena</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _internal_metadata_<span class="token punctuation">.</span><span class="token function">owning_arena</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token comment">// Returns the arena, used for allocating internal objects(e.g., child</span>
  <span class="token comment">// messages, etc), or owning incoming objects (e.g., set allocated).</span>
  Arena<span class="token operator">*</span> <span class="token function">GetArenaForAllocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _internal_metadata_<span class="token punctuation">.</span><span class="token function">arena</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  internal<span class="token double-colon punctuation">::</span>InternalMetadata _internal_metadata_<span class="token punctuation">;</span>
 <span class="token keyword">public</span><span class="token operator">:</span>
  <span class="token keyword">enum</span> <span class="token class-name">ParseFlags</span> <span class="token punctuation">{</span>
    kMerge <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    kParse <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    kMergePartial <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    kParsePartial <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
    kMergeWithAliasing <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
    kParseWithAliasing <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    kMergePartialWithAliasing <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span>
    kParsePartialWithAliasing <span class="token operator">=</span> <span class="token number">7</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">template</span> <span class="token operator">&lt;</span>ParseFlags flags<span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
  <span class="token keyword">bool</span> <span class="token function">ParseFrom</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Fast path when conditions match (ie. non-deterministic)</span>
  <span class="token comment">//  uint8_t* _InternalSerialize(uint8_t* ptr) const;</span>
  <span class="token keyword">virtual</span> <span class="token keyword">uint8_t</span><span class="token operator">*</span> <span class="token function">_InternalSerialize</span><span class="token punctuation">(</span>
      <span class="token keyword">uint8_t</span><span class="token operator">*</span> ptr<span class="token punctuation">,</span> io<span class="token double-colon punctuation">::</span>EpsCopyOutputStream<span class="token operator">*</span> stream<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// Identical to IsInitialized() except that it logs an error message.</span>
  <span class="token keyword">bool</span> <span class="token function">IsInitializedWithErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token function">LogInitializationErrorMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 <span class="token keyword">private</span><span class="token operator">:</span>
  <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">FastReflectionMessageMutator</span><span class="token punctuation">;</span>
  <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">FastReflectionStringSetter</span><span class="token punctuation">;</span>
  <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">Message</span><span class="token punctuation">;</span>
  <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">Reflection</span><span class="token punctuation">;</span>
  <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">internal</span><span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token class-name">ExtensionSet</span></span><span class="token punctuation">;</span>
  <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">internal</span><span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token class-name">LazyField</span></span><span class="token punctuation">;</span>
  <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">internal</span><span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token class-name">SwapFieldHelper</span></span><span class="token punctuation">;</span>
  <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">internal</span><span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token class-name">TcParser</span></span><span class="token punctuation">;</span>
  <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">internal</span><span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token class-name">WeakFieldMap</span></span><span class="token punctuation">;</span>
  <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">internal</span><span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token class-name">WireFormatLite</span></span><span class="token punctuation">;</span>
  <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">Type</span><span class="token operator">&gt;</span>
  <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">Arena</span><span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token class-name">InternalHelper</span></span><span class="token punctuation">;</span>
  <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">Type</span><span class="token operator">&gt;</span>
  <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">internal</span><span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token class-name">GenericTypeHandler</span></span><span class="token punctuation">;</span>
  <span class="token keyword">void</span> <span class="token function">LogInitializationErrorMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token keyword">bool</span> <span class="token function">MergeFromImpl</span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>CodedInputStream<span class="token operator">*</span> input<span class="token punctuation">,</span> ParseFlags parse_flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">GOOGLE_DISALLOW_EVIL_CONSTRUCTORS</span><span class="token punctuation">(</span>MessageLite<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">namespace</span> internal <span class="token punctuation">{</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">bool</span> alias<span class="token operator">&gt;</span>
<span class="token keyword">bool</span> <span class="token function">MergeFromImpl</span><span class="token punctuation">(</span>StringPiece input<span class="token punctuation">,</span> MessageLite<span class="token operator">*</span> msg<span class="token punctuation">,</span>
                   MessageLite<span class="token double-colon punctuation">::</span>ParseFlags parse_flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">extern</span> <span class="token keyword">template</span> <span class="token keyword">bool</span> <span class="token generic-function"><span class="token function">MergeFromImpl</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token boolean">false</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>StringPiece input<span class="token punctuation">,</span>
                                          MessageLite<span class="token operator">*</span> msg<span class="token punctuation">,</span>
                                          MessageLite<span class="token double-colon punctuation">::</span>ParseFlags parse_flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">extern</span> <span class="token keyword">template</span> <span class="token keyword">bool</span> <span class="token generic-function"><span class="token function">MergeFromImpl</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token boolean">true</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>StringPiece input<span class="token punctuation">,</span>
                                         MessageLite<span class="token operator">*</span> msg<span class="token punctuation">,</span>
                                         MessageLite<span class="token double-colon punctuation">::</span>ParseFlags parse_flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">bool</span> alias<span class="token operator">&gt;</span>
<span class="token keyword">bool</span> <span class="token function">MergeFromImpl</span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>ZeroCopyInputStream<span class="token operator">*</span> input<span class="token punctuation">,</span> MessageLite<span class="token operator">*</span> msg<span class="token punctuation">,</span>
                   MessageLite<span class="token double-colon punctuation">::</span>ParseFlags parse_flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">extern</span> <span class="token keyword">template</span> <span class="token keyword">bool</span> <span class="token generic-function"><span class="token function">MergeFromImpl</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token boolean">false</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>ZeroCopyInputStream<span class="token operator">*</span> input<span class="token punctuation">,</span>
                                          MessageLite<span class="token operator">*</span> msg<span class="token punctuation">,</span>
                                          MessageLite<span class="token double-colon punctuation">::</span>ParseFlags parse_flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">extern</span> <span class="token keyword">template</span> <span class="token keyword">bool</span> <span class="token generic-function"><span class="token function">MergeFromImpl</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token boolean">true</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>io<span class="token double-colon punctuation">::</span>ZeroCopyInputStream<span class="token operator">*</span> input<span class="token punctuation">,</span>
                                         MessageLite<span class="token operator">*</span> msg<span class="token punctuation">,</span>
                                         MessageLite<span class="token double-colon punctuation">::</span>ParseFlags parse_flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">BoundedZCIS</span> <span class="token punctuation">{</span>
  io<span class="token double-colon punctuation">::</span>ZeroCopyInputStream<span class="token operator">*</span> zcis<span class="token punctuation">;</span>
  <span class="token keyword">int</span> limit<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">bool</span> alias<span class="token operator">&gt;</span>
<span class="token keyword">bool</span> <span class="token function">MergeFromImpl</span><span class="token punctuation">(</span>BoundedZCIS input<span class="token punctuation">,</span> MessageLite<span class="token operator">*</span> msg<span class="token punctuation">,</span>
                   MessageLite<span class="token double-colon punctuation">::</span>ParseFlags parse_flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">extern</span> <span class="token keyword">template</span> <span class="token keyword">bool</span> <span class="token generic-function"><span class="token function">MergeFromImpl</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token boolean">false</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>BoundedZCIS input<span class="token punctuation">,</span> MessageLite<span class="token operator">*</span> msg<span class="token punctuation">,</span>
                                          MessageLite<span class="token double-colon punctuation">::</span>ParseFlags parse_flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">extern</span> <span class="token keyword">template</span> <span class="token keyword">bool</span> <span class="token generic-function"><span class="token function">MergeFromImpl</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token boolean">true</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>BoundedZCIS input<span class="token punctuation">,</span> MessageLite<span class="token operator">*</span> msg<span class="token punctuation">,</span>
                                         MessageLite<span class="token double-colon punctuation">::</span>ParseFlags parse_flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">SourceWrapper</span><span class="token punctuation">;</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">bool</span> alias<span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">bool</span> <span class="token function">MergeFromImpl</span><span class="token punctuation">(</span><span class="token keyword">const</span> SourceWrapper<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> input<span class="token punctuation">,</span> MessageLite<span class="token operator">*</span> msg<span class="token punctuation">,</span>
                   MessageLite<span class="token double-colon punctuation">::</span>ParseFlags parse_flags<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> input<span class="token punctuation">.</span><span class="token keyword">template</span> <span class="token generic-function"><span class="token function">MergeInto</span><span class="token generic class-name"><span class="token operator">&lt;</span>alias<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> parse_flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>  <span class="token comment">// namespace internal</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span>MessageLite<span class="token double-colon punctuation">::</span>ParseFlags flags<span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">bool</span> <span class="token class-name">MessageLite</span><span class="token double-colon punctuation">::</span><span class="token function">ParseFrom</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> input<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>flags <span class="token operator">&amp;</span> kParse<span class="token punctuation">)</span> <span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">constexpr</span> <span class="token keyword">bool</span> alias <span class="token operator">=</span> <span class="token punctuation">(</span>flags <span class="token operator">&amp;</span> kMergeWithAliasing<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> internal<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">MergeFromImpl</span><span class="token generic class-name"><span class="token operator">&lt;</span>alias<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ===================================================================</span>
<span class="token comment">// Shutdown support.</span>
<span class="token comment">// Shut down the entire protocol buffers library, deleting all static-duration</span>
<span class="token comment">// objects allocated by the library or by generated .pb.cc files.</span>
<span class="token comment">//</span>
<span class="token comment">// There are two reasons you might want to call this:</span>
<span class="token comment">// * You use a draconian definition of &quot;memory leak&quot; in which you expect</span>
<span class="token comment">//   every single malloc() to have a corresponding free(), even for objects</span>
<span class="token comment">//   which live until program exit.</span>
<span class="token comment">// * You are writing a dynamically-loaded library which needs to clean up</span>
<span class="token comment">//   after itself when the library is unloaded.</span>
<span class="token comment">//</span>
<span class="token comment">// It is safe to call this multiple times.  However, it is not safe to use</span>
<span class="token comment">// any other part of the protocol buffers library after</span>
<span class="token comment">// ShutdownProtobufLibrary() has been called. Furthermore this call is not</span>
<span class="token comment">// thread safe, user needs to synchronize multiple calls.</span>
PROTOBUF_EXPORT <span class="token keyword">void</span> <span class="token function">ShutdownProtobufLibrary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">namespace</span> internal <span class="token punctuation">{</span>
<span class="token comment">// Register a function to be called when ShutdownProtocolBuffers() is called.</span>
PROTOBUF_EXPORT <span class="token keyword">void</span> <span class="token function">OnShutdown</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>func<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Run an arbitrary function on an arg</span>
PROTOBUF_EXPORT <span class="token keyword">void</span> <span class="token function">OnShutdownRun</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
T<span class="token operator">*</span> <span class="token function">OnShutdownDelete</span><span class="token punctuation">(</span>T<span class="token operator">*</span> p<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">OnShutdownRun</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> pp<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">delete</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">const</span> T<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>pp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>  <span class="token comment">// namespace internal</span>
<span class="token punctuation">}</span>  <span class="token comment">// namespace protobuf</span>
<span class="token punctuation">}</span>  <span class="token comment">// namespace google</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/port_undef.inc&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span>  <span class="token comment">// GOOGLE_PROTOBUF_MESSAGE_LITE_H__</span></span>
</code></pre>
<h3 id="c版messagelite的文档说明"><a name="c版messagelite的文档说明" class="plugin-anchor" href="#c版messagelite的文档说明"><i class="fa fa-link" aria-hidden="true"></i></a><code>C++</code>版<code>MessageLite</code>的文档说明</h3>
<ul>
<li><a href="https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.message_lite#MessageLite.InitializationErrorString.details" target="_blank">message_lite.h  |  Protocol Buffers  |  Google Developers</a></li>
</ul>
<pre class="language-"><code class="lang-c">message_lite<span class="token punctuation">.</span>h

bookmark_border
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/message_lite.h&gt;</span></span>
namespace google<span class="token operator">::</span>protobuf

Defines MessageLite<span class="token punctuation">,</span> the abstract interface implemented by <span class="token function">all</span> <span class="token punctuation">(</span>lite and non<span class="token operator">-</span>lite<span class="token punctuation">)</span> protocol message objects<span class="token punctuation">.</span>

Classes in this file
MessageLite
Interface to light weight protocol messages<span class="token punctuation">.</span>
File Members
These definitions are not part of any class<span class="token punctuation">.</span>
<span class="token keyword">void</span> <span class="token function">ShutdownProtobufLibrary</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Shut down the entire protocol buffers library<span class="token punctuation">,</span> deleting all <span class="token keyword">static</span><span class="token operator">-</span>duration objects allocated by the library or by generated <span class="token punctuation">.</span>pb<span class="token punctuation">.</span>cc files<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">void</span> protobuf<span class="token operator">::</span><span class="token function">ShutdownProtobufLibrary</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Shut down the entire protocol buffers library<span class="token punctuation">,</span> deleting all <span class="token keyword">static</span><span class="token operator">-</span>duration objects allocated by the library or by generated <span class="token punctuation">.</span>pb<span class="token punctuation">.</span>cc files<span class="token punctuation">.</span>

There are two reasons you might want to call this<span class="token operator">:</span>

You use a draconian definition of <span class="token string">&quot;memory leak&quot;</span> in which you expect every single <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> to have a corresponding <span class="token function">free</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> even <span class="token keyword">for</span> objects which live until program exit<span class="token punctuation">.</span>
You are writing a dynamically<span class="token operator">-</span>loaded library which needs to clean up after itself when the library is unloaded<span class="token punctuation">.</span>
It is safe to call this multiple times<span class="token punctuation">.</span> However<span class="token punctuation">,</span> it is not safe to use any other part of the protocol buffers library after <span class="token function">ShutdownProtobufLibrary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> has been called<span class="token punctuation">.</span> Furthermore this call is not thread safe<span class="token punctuation">,</span> user needs to synchronize multiple calls<span class="token punctuation">.</span>

class MessageLite
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;google/protobuf/message_lite.h&gt;</span></span>
namespace google<span class="token operator">::</span>protobuf

Interface to light weight protocol messages<span class="token punctuation">.</span>

This interface is implemented by all protocol message objects<span class="token punctuation">.</span> Non<span class="token operator">-</span>lite messages additionally implement the Message interface<span class="token punctuation">,</span> which is a subclass of MessageLite<span class="token punctuation">.</span> Use MessageLite instead when you only need the subset of features which it supports – namely<span class="token punctuation">,</span> nothing that uses descriptors or reflection<span class="token punctuation">.</span> You can instruct the protocol compiler to generate classes which implement only MessageLite<span class="token punctuation">,</span> not the full Message interface<span class="token punctuation">,</span> by adding the following line to the <span class="token punctuation">.</span>proto file<span class="token operator">:</span>


option optimize_for <span class="token operator">=</span> LITE_RUNTIME<span class="token punctuation">;</span>
This is particularly useful on resource<span class="token operator">-</span>constrained systems where the full protocol buffers runtime library is too big<span class="token punctuation">.</span>

Note that on non<span class="token operator">-</span>constrained <span class="token function">systems</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> servers<span class="token punctuation">)</span> when you need to link in lots of protocol definitions<span class="token punctuation">,</span> a better way to reduce total code footprint is to use optimize_for <span class="token operator">=</span> CODE_SIZE<span class="token punctuation">.</span> This will make the generated code smaller <span class="token keyword">while</span> still supporting all the same <span class="token function">features</span> <span class="token punctuation">(</span>at the expense of speed<span class="token punctuation">)</span><span class="token punctuation">.</span> optimize_for <span class="token operator">=</span> LITE_RUNTIME is best when you only have a small number of message types linked into your binary<span class="token punctuation">,</span> in which <span class="token keyword">case</span> the size of the protocol buffers runtime itself is the biggest problem<span class="token punctuation">.</span>

Users must not derive from this class<span class="token punctuation">.</span> Only the protocol compiler and the internal library are allowed to create subclasses<span class="token punctuation">.</span>

Known subclasses<span class="token operator">:</span>

Message
Members
<span class="token keyword">enum</span> <span class="token class-name">ParseFlags</span>
more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
protected internal<span class="token operator">::</span>InternalMetadata _internal_metadata_
constexpr <span class="token function">MessageLite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
virtual <span class="token operator">~</span><span class="token function">MessageLite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
template bool <span class="token function">ParseFrom</span><span class="token punctuation">(</span><span class="token keyword">const</span> T <span class="token operator">&amp;</span> input<span class="token punctuation">)</span>
virtual uint8 <span class="token operator">*</span> <span class="token function">_InternalSerialize</span><span class="token punctuation">(</span>uint8 <span class="token operator">*</span> ptr<span class="token punctuation">,</span> io<span class="token operator">::</span>EpsCopyOutputStream <span class="token operator">*</span> stream<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span>
Fast path when conditions <span class="token function">match</span> <span class="token punctuation">(</span>ie<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
bool <span class="token function">IsInitializedWithErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
Identical to <span class="token function">IsInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span> except that it logs an error message<span class="token punctuation">.</span>
protected template <span class="token keyword">static</span> T <span class="token operator">*</span> <span class="token function">CreateMaybeMessage</span><span class="token punctuation">(</span>Arena <span class="token operator">*</span> arena<span class="token punctuation">)</span>
protected explicit <span class="token function">MessageLite</span><span class="token punctuation">(</span>Arena <span class="token operator">*</span> arena<span class="token punctuation">)</span>
protected Arena <span class="token operator">*</span> <span class="token function">GetOwningArena</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
Returns the arena<span class="token punctuation">,</span> <span class="token keyword">if</span> any<span class="token punctuation">,</span> that directly owns this message and its internal <span class="token function">memory</span> <span class="token punctuation">(</span>Arena<span class="token operator">::</span>Own is different in that the arena doesn&apos;t directly own the internal memory<span class="token punctuation">)</span><span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
protected Arena <span class="token operator">*</span> <span class="token function">GetArenaForAllocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
Returns the arena<span class="token punctuation">,</span> used <span class="token keyword">for</span> allocating internal <span class="token function">objects</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>g<span class="token punctuation">.</span><span class="token punctuation">,</span> child messages<span class="token punctuation">,</span> etc<span class="token punctuation">)</span><span class="token punctuation">,</span> or owning incoming <span class="token function">objects</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>g<span class="token punctuation">.</span><span class="token punctuation">,</span> set allocated<span class="token punctuation">)</span><span class="token punctuation">.</span>
Basic Operations
virtual std<span class="token operator">::</span>string <span class="token function">GetTypeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span>
Get the name of this message type<span class="token punctuation">,</span> e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> <span class="token string">&quot;foo.bar.BazProto&quot;</span><span class="token punctuation">.</span>
virtual MessageLite <span class="token operator">*</span> <span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span>
Construct a new instance of the same type<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
virtual MessageLite <span class="token operator">*</span> <span class="token function">New</span><span class="token punctuation">(</span>Arena <span class="token operator">*</span> arena<span class="token punctuation">)</span> <span class="token keyword">const</span>
Construct a new instance on the arena<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Arena <span class="token operator">*</span> <span class="token function">GetArena</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
Same as GetOwningArena<span class="token punctuation">.</span>
<span class="token keyword">void</span> <span class="token operator">*</span> <span class="token function">GetMaybeArenaPointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
Get a pointer that may be equal to this message&apos;s arena<span class="token punctuation">,</span> or may not be<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
virtual <span class="token keyword">void</span> <span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
Clear all fields of the message and set them to their <span class="token keyword">default</span> values<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
virtual bool <span class="token function">IsInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span>
Quickly check <span class="token keyword">if</span> all required fields have values set<span class="token punctuation">.</span>
virtual std<span class="token operator">::</span>string <span class="token function">InitializationErrorString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
This is not implemented <span class="token keyword">for</span> Lite messages – it just returns <span class="token string">&quot;(cannot determine missing fields for lite message)&quot;</span><span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
virtual <span class="token keyword">void</span> <span class="token function">CheckTypeAndMergeFrom</span><span class="token punctuation">(</span><span class="token keyword">const</span> MessageLite <span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
If <span class="token operator">|</span>other<span class="token operator">|</span> is the exact same class as this<span class="token punctuation">,</span> calls <span class="token function">MergeFrom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
std<span class="token operator">::</span>string <span class="token function">DebugString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
These methods <span class="token keyword">return</span> a human<span class="token operator">-</span>readable summary of the message<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
std<span class="token operator">::</span>string <span class="token function">ShortDebugString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
std<span class="token operator">::</span>string <span class="token function">Utf8DebugString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
MessageLite<span class="token operator">::</span>DebugString is already Utf8 Safe<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Parsing
Methods <span class="token keyword">for</span> parsing in protocol buffer format<span class="token punctuation">.</span>

Most of these are just simple wrappers around <span class="token function">MergeFromCodedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> will be called before merging the input<span class="token punctuation">.</span>

PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParseFromCodedStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>CodedInputStream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Fill the message with a protocol buffer parsed from the given input stream<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParsePartialFromCodedStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>CodedInputStream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Like <span class="token function">ParseFromCodedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but accepts messages that are missing required fields<span class="token punctuation">.</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParseFromZeroCopyStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>ZeroCopyInputStream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Read a protocol buffer from the given zero<span class="token operator">-</span>copy input stream<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParsePartialFromZeroCopyStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>ZeroCopyInputStream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Like <span class="token function">ParseFromZeroCopyStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but accepts messages that are missing required fields<span class="token punctuation">.</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParseFromFileDescriptor</span><span class="token punctuation">(</span><span class="token keyword">int</span> file_descriptor<span class="token punctuation">)</span>
Parse a protocol buffer from a file descriptor<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParsePartialFromFileDescriptor</span><span class="token punctuation">(</span><span class="token keyword">int</span> file_descriptor<span class="token punctuation">)</span>
Like <span class="token function">ParseFromFileDescriptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but accepts messages that are missing required fields<span class="token punctuation">.</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParseFromIstream</span><span class="token punctuation">(</span>std<span class="token operator">::</span>istream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Parse a protocol buffer from a C<span class="token operator">++</span> istream<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParsePartialFromIstream</span><span class="token punctuation">(</span>std<span class="token operator">::</span>istream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Like <span class="token function">ParseFromIstream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but accepts messages that are missing required fields<span class="token punctuation">.</span>
bool <span class="token function">MergePartialFromBoundedZeroCopyStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>ZeroCopyInputStream <span class="token operator">*</span> input<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span>
Read a protocol buffer from the given zero<span class="token operator">-</span>copy input stream<span class="token punctuation">,</span> expecting the message to be exactly <span class="token string">&quot;size&quot;</span> bytes <span class="token keyword">long</span><span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
bool <span class="token function">MergeFromBoundedZeroCopyStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>ZeroCopyInputStream <span class="token operator">*</span> input<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span>
Like <span class="token function">ParseFromBoundedZeroCopyStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but accepts messages that are missing required fields<span class="token punctuation">.</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParseFromBoundedZeroCopyStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>ZeroCopyInputStream <span class="token operator">*</span> input<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParsePartialFromBoundedZeroCopyStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>ZeroCopyInputStream <span class="token operator">*</span> input<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span>
Like <span class="token function">ParseFromBoundedZeroCopyStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but accepts messages that are missing required fields<span class="token punctuation">.</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParseFromString</span><span class="token punctuation">(</span>ConstStringParam data<span class="token punctuation">)</span>
Parses a protocol buffer contained in a string<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParsePartialFromString</span><span class="token punctuation">(</span>ConstStringParam data<span class="token punctuation">)</span>
Like <span class="token function">ParseFromString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but accepts messages that are missing required fields<span class="token punctuation">.</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParseFromArray</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span>
Parse a protocol buffer contained in an array of bytes<span class="token punctuation">.</span>
PROTOBUF_ATTRIBUTE_REINITIALIZES bool <span class="token function">ParsePartialFromArray</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span>
Like <span class="token function">ParseFromArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but accepts messages that are missing required fields<span class="token punctuation">.</span>
bool <span class="token function">MergeFromCodedStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>CodedInputStream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Reads a protocol buffer from the stream and merges it into this Message<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
bool <span class="token function">MergePartialFromCodedStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>CodedInputStream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Like <span class="token function">MergeFromCodedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but succeeds even <span class="token keyword">if</span> required fields are missing in the input<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
bool <span class="token function">MergeFromString</span><span class="token punctuation">(</span>ConstStringParam data<span class="token punctuation">)</span>
Merge a protocol buffer contained in a string<span class="token punctuation">.</span>
Serialization
Methods <span class="token keyword">for</span> serializing in protocol buffer format<span class="token punctuation">.</span>

Most of these are just simple wrappers around <span class="token function">ByteSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> and <span class="token function">SerializeWithCachedSizes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

bool <span class="token function">SerializeToCodedStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>CodedOutputStream <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Write a protocol buffer of this message to the given output<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
bool <span class="token function">SerializePartialToCodedStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>CodedOutputStream <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Like <span class="token function">SerializeToCodedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but allows missing required fields<span class="token punctuation">.</span>
bool <span class="token function">SerializeToZeroCopyStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>ZeroCopyOutputStream <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Write the message to the given zero<span class="token operator">-</span>copy output stream<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
bool <span class="token function">SerializePartialToZeroCopyStream</span><span class="token punctuation">(</span>io<span class="token operator">::</span>ZeroCopyOutputStream <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Like <span class="token function">SerializeToZeroCopyStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but allows missing required fields<span class="token punctuation">.</span>
bool <span class="token function">SerializeToString</span><span class="token punctuation">(</span>std<span class="token operator">::</span>string <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Serialize the message and store it in the given string<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
bool <span class="token function">SerializePartialToString</span><span class="token punctuation">(</span>std<span class="token operator">::</span>string <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Like <span class="token function">SerializeToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but allows missing required fields<span class="token punctuation">.</span>
bool <span class="token function">SerializeToArray</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token keyword">const</span>
Serialize the message and store it in the given byte array<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
bool <span class="token function">SerializePartialToArray</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token keyword">const</span>
Like <span class="token function">SerializeToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but allows missing required fields<span class="token punctuation">.</span>
std<span class="token operator">::</span>string <span class="token function">SerializeAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
Make a string encoding the message<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
std<span class="token operator">::</span>string <span class="token function">SerializePartialAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
Like <span class="token function">SerializeAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but allows missing required fields<span class="token punctuation">.</span>
bool <span class="token function">SerializeToFileDescriptor</span><span class="token punctuation">(</span><span class="token keyword">int</span> file_descriptor<span class="token punctuation">)</span> <span class="token keyword">const</span>
Serialize the message and write it to the given file descriptor<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
bool <span class="token function">SerializePartialToFileDescriptor</span><span class="token punctuation">(</span><span class="token keyword">int</span> file_descriptor<span class="token punctuation">)</span> <span class="token keyword">const</span>
Like <span class="token function">SerializeToFileDescriptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but allows missing required fields<span class="token punctuation">.</span>
bool <span class="token function">SerializeToOstream</span><span class="token punctuation">(</span>std<span class="token operator">::</span>ostream <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Serialize the message and write it to the given C<span class="token operator">++</span> ostream<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
bool <span class="token function">SerializePartialToOstream</span><span class="token punctuation">(</span>std<span class="token operator">::</span>ostream <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Like <span class="token function">SerializeToOstream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but allows missing required fields<span class="token punctuation">.</span>
bool <span class="token function">AppendToString</span><span class="token punctuation">(</span>std<span class="token operator">::</span>string <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Like <span class="token function">SerializeToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but appends to the data to the string&apos;s existing contents<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
bool <span class="token function">AppendPartialToString</span><span class="token punctuation">(</span>std<span class="token operator">::</span>string <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Like <span class="token function">AppendToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but allows missing required fields<span class="token punctuation">.</span>
virtual <span class="token class-name">size_t</span> <span class="token function">ByteSizeLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span>
Computes the serialized size of the message<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">int</span> <span class="token function">ByteSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
Legacy <span class="token function">ByteSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> API<span class="token punctuation">.</span>
<span class="token keyword">void</span> <span class="token function">SerializeWithCachedSizes</span><span class="token punctuation">(</span>io<span class="token operator">::</span>CodedOutputStream <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Serializes the message without recomputing the size<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
uint8 <span class="token operator">*</span> <span class="token function">SerializeWithCachedSizesToArray</span><span class="token punctuation">(</span>uint8 <span class="token operator">*</span> target<span class="token punctuation">)</span> <span class="token keyword">const</span>
Like SerializeWithCachedSizes<span class="token punctuation">,</span> but writes directly to <span class="token operator">*</span>target<span class="token punctuation">,</span> returning a pointer to the byte immediately after the last byte written<span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
virtual <span class="token keyword">int</span> <span class="token function">GetCachedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span>
Returns the result of the last call to <span class="token function">ByteSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span> more<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
virtual <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> <span class="token function">_InternalParse</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> <span class="token punctuation">,</span> internal<span class="token operator">::</span>ParseContext <span class="token operator">*</span> <span class="token punctuation">)</span>
<span class="token keyword">enum</span> <span class="token class-name">MessageLite</span><span class="token operator">::</span>ParseFlags <span class="token punctuation">{</span>
  kMerge <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
  kParse <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  kMergePartial <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
  kParsePartial <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
  kMergeWithAliasing <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
  kParseWithAliasing <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
  kMergePartialWithAliasing <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span>
  kParsePartialWithAliasing <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">7</span>
<span class="token punctuation">}</span>
kMerge kParse kMergePartial kParsePartial kMergeWithAliasing kParseWithAliasing kMergePartialWithAliasing kParsePartialWithAliasing virtual uint8 <span class="token operator">*</span> MessageLite<span class="token operator">::</span><span class="token function">_InternalSerialize</span><span class="token punctuation">(</span>
        uint8 <span class="token operator">*</span> ptr<span class="token punctuation">,</span>
        io<span class="token operator">::</span>EpsCopyOutputStream <span class="token operator">*</span> stream<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span>
Fast path when conditions <span class="token function">match</span> <span class="token punctuation">(</span>ie<span class="token punctuation">.</span>

non<span class="token operator">-</span>deterministic<span class="token punctuation">)</span> uint8<span class="token operator">*</span> <span class="token function">_InternalSerialize</span><span class="token punctuation">(</span>uint8<span class="token operator">*</span> ptr<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

protected Arena <span class="token operator">*</span> MessageLite<span class="token operator">::</span><span class="token function">GetOwningArena</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
Returns the arena<span class="token punctuation">,</span> <span class="token keyword">if</span> any<span class="token punctuation">,</span> that directly owns this message and its internal <span class="token function">memory</span> <span class="token punctuation">(</span>Arena<span class="token operator">::</span>Own is different in that the arena doesn&apos;t directly own the internal memory<span class="token punctuation">)</span><span class="token punctuation">.</span>

This method is used in proto&apos;s implementation <span class="token keyword">for</span> swapping<span class="token punctuation">,</span> moving and setting allocated<span class="token punctuation">,</span> <span class="token keyword">for</span> deciding whether the ownership of this message or its internal memory could be changed<span class="token punctuation">.</span>

virtual MessageLite <span class="token operator">*</span> MessageLite<span class="token operator">::</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span>
Construct a new instance of the same type<span class="token punctuation">.</span>

Ownership is passed to the caller<span class="token punctuation">.</span>

virtual MessageLite <span class="token operator">*</span> MessageLite<span class="token operator">::</span><span class="token function">New</span><span class="token punctuation">(</span>
        Arena <span class="token operator">*</span> arena<span class="token punctuation">)</span> <span class="token keyword">const</span>
Construct a new instance on the arena<span class="token punctuation">.</span>

Ownership is passed to the caller <span class="token keyword">if</span> arena is a <span class="token constant">NULL</span><span class="token punctuation">.</span> Default implementation <span class="token keyword">for</span> backwards compatibility<span class="token punctuation">.</span>

<span class="token keyword">void</span> <span class="token operator">*</span> MessageLite<span class="token operator">::</span><span class="token function">GetMaybeArenaPointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
Get a pointer that may be equal to this message&apos;s arena<span class="token punctuation">,</span> or may not be<span class="token punctuation">.</span>

If the value returned by this method is equal to some arena pointer<span class="token punctuation">,</span> then this message is on that arena<span class="token punctuation">;</span> however<span class="token punctuation">,</span> <span class="token keyword">if</span> this message is on some arena<span class="token punctuation">,</span> this method may or may not <span class="token keyword">return</span> that arena&apos;s pointer<span class="token punctuation">.</span> As a tradeoff<span class="token punctuation">,</span> this method may be more efficient than <span class="token function">GetArena</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span> The intent is to allow underlying representations that use e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> tagged pointers to sometimes store the arena pointer directly<span class="token punctuation">,</span> and sometimes in a more indirect way<span class="token punctuation">,</span> and allow a fastpath comparison against the arena pointer when it&apos;s easy to obtain<span class="token punctuation">.</span>

virtual <span class="token keyword">void</span> MessageLite<span class="token operator">::</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
Clear all fields of the message and set them to their <span class="token keyword">default</span> values<span class="token punctuation">.</span>

<span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> avoids freeing memory<span class="token punctuation">,</span> assuming that any memory allocated to hold parts of the message will be needed again to hold the next message<span class="token punctuation">.</span> If you actually want to free the memory used by a Message<span class="token punctuation">,</span> you must delete it<span class="token punctuation">.</span>

virtual std<span class="token operator">::</span>string MessageLite<span class="token operator">::</span><span class="token function">InitializationErrorString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
This is not implemented <span class="token keyword">for</span> Lite messages – it just returns <span class="token string">&quot;(cannot determine missing fields for lite message)&quot;</span><span class="token punctuation">.</span>

However<span class="token punctuation">,</span> it is implemented <span class="token keyword">for</span> full messages<span class="token punctuation">.</span> See message<span class="token punctuation">.</span>h<span class="token punctuation">.</span>

virtual <span class="token keyword">void</span> MessageLite<span class="token operator">::</span><span class="token function">CheckTypeAndMergeFrom</span><span class="token punctuation">(</span>
        <span class="token keyword">const</span> MessageLite <span class="token operator">&amp;</span> other<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
If <span class="token operator">|</span>other<span class="token operator">|</span> is the exact same class as this<span class="token punctuation">,</span> calls <span class="token function">MergeFrom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

Otherwise<span class="token punctuation">,</span> results are <span class="token function">undefined</span> <span class="token punctuation">(</span>probably crash<span class="token punctuation">)</span><span class="token punctuation">.</span>

std<span class="token operator">::</span>string MessageLite<span class="token operator">::</span><span class="token function">DebugString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
These methods <span class="token keyword">return</span> a human<span class="token operator">-</span>readable summary of the message<span class="token punctuation">.</span>

Note that since the MessageLite interface does not support reflection<span class="token punctuation">,</span> there is very little information that these methods can provide<span class="token punctuation">.</span> They are shadowed by methods of the same name on the Message interface which provide much more information<span class="token punctuation">.</span> The methods here are intended primarily to facilitate code reuse <span class="token keyword">for</span> logic that needs to interoperate with both full and lite protos<span class="token punctuation">.</span>

The format of the returned string is subject to change<span class="token punctuation">,</span> so please <span class="token keyword">do</span> not assume it will remain stable over time<span class="token punctuation">.</span>

std<span class="token operator">::</span>string MessageLite<span class="token operator">::</span><span class="token function">Utf8DebugString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
MessageLite<span class="token operator">::</span>DebugString is already Utf8 Safe<span class="token punctuation">.</span>

This is to add compatibility with Message<span class="token punctuation">.</span>

PROTOBUF_ATTRIBUTE_REINITIALIZES bool
    MessageLite<span class="token operator">::</span><span class="token function">ParseFromCodedStream</span><span class="token punctuation">(</span>
        io<span class="token operator">::</span>CodedInputStream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Fill the message with a protocol buffer parsed from the given input stream<span class="token punctuation">.</span>

Returns false on a read error or <span class="token keyword">if</span> the input is in the wrong format<span class="token punctuation">.</span> A successful <span class="token keyword">return</span> does not indicate the entire input is consumed<span class="token punctuation">,</span> ensure you call <span class="token function">ConsumedEntireMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> to check that <span class="token keyword">if</span> applicable<span class="token punctuation">.</span>

PROTOBUF_ATTRIBUTE_REINITIALIZES bool
    MessageLite<span class="token operator">::</span><span class="token function">ParseFromZeroCopyStream</span><span class="token punctuation">(</span>
        io<span class="token operator">::</span>ZeroCopyInputStream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Read a protocol buffer from the given zero<span class="token operator">-</span>copy input stream<span class="token punctuation">.</span>

If successful<span class="token punctuation">,</span> the entire input will be consumed<span class="token punctuation">.</span>

PROTOBUF_ATTRIBUTE_REINITIALIZES bool
    MessageLite<span class="token operator">::</span><span class="token function">ParseFromFileDescriptor</span><span class="token punctuation">(</span>
        <span class="token keyword">int</span> file_descriptor<span class="token punctuation">)</span>
Parse a protocol buffer from a file descriptor<span class="token punctuation">.</span>

If successful<span class="token punctuation">,</span> the entire input will be consumed<span class="token punctuation">.</span>

PROTOBUF_ATTRIBUTE_REINITIALIZES bool
    MessageLite<span class="token operator">::</span><span class="token function">ParseFromIstream</span><span class="token punctuation">(</span>
        std<span class="token operator">::</span>istream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Parse a protocol buffer from a C<span class="token operator">++</span> istream<span class="token punctuation">.</span>

If successful<span class="token punctuation">,</span> the entire input will be consumed<span class="token punctuation">.</span>

bool MessageLite<span class="token operator">::</span><span class="token function">MergePartialFromBoundedZeroCopyStream</span><span class="token punctuation">(</span>
        io<span class="token operator">::</span>ZeroCopyInputStream <span class="token operator">*</span> input<span class="token punctuation">,</span>
        <span class="token keyword">int</span> size<span class="token punctuation">)</span>
Read a protocol buffer from the given zero<span class="token operator">-</span>copy input stream<span class="token punctuation">,</span> expecting the message to be exactly <span class="token string">&quot;size&quot;</span> bytes <span class="token keyword">long</span><span class="token punctuation">.</span>

If successful<span class="token punctuation">,</span> exactly this many bytes will have been consumed from the input<span class="token punctuation">.</span>

PROTOBUF_ATTRIBUTE_REINITIALIZES bool
    MessageLite<span class="token operator">::</span><span class="token function">ParseFromString</span><span class="token punctuation">(</span>
        ConstStringParam data<span class="token punctuation">)</span>
Parses a protocol buffer contained in a string<span class="token punctuation">.</span>

Returns true on success<span class="token punctuation">.</span> This function takes a string in <span class="token function">the</span> <span class="token punctuation">(</span>non<span class="token operator">-</span>human<span class="token operator">-</span>readable<span class="token punctuation">)</span> binary wire format<span class="token punctuation">,</span> matching the encoding output by MessageLite<span class="token operator">::</span><span class="token function">SerializeToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span> If you&apos;d like to convert a human<span class="token operator">-</span>readable string into a protocol buffer object<span class="token punctuation">,</span> see google<span class="token operator">::</span>protobuf<span class="token operator">::</span>TextFormat<span class="token operator">::</span><span class="token function">ParseFromString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

bool MessageLite<span class="token operator">::</span><span class="token function">MergeFromCodedStream</span><span class="token punctuation">(</span>
        io<span class="token operator">::</span>CodedInputStream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Reads a protocol buffer from the stream and merges it into this Message<span class="token punctuation">.</span>

Singular fields read from the what is already in the Message and repeated fields are appended to those already present<span class="token punctuation">.</span>

It is the responsibility of the caller to call input<span class="token operator">-&gt;</span><span class="token function">LastTagWas</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">for</span> groups<span class="token punctuation">)</span> or input<span class="token operator">-&gt;</span><span class="token function">ConsumedEntireMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">for</span> non<span class="token operator">-</span>groups<span class="token punctuation">)</span> after this returns to verify that the message&apos;s end was delimited correctly<span class="token punctuation">.</span>

<span class="token function">ParseFromCodedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is implemented as <span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> followed by <span class="token function">MergeFromCodedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

bool MessageLite<span class="token operator">::</span><span class="token function">MergePartialFromCodedStream</span><span class="token punctuation">(</span>
        io<span class="token operator">::</span>CodedInputStream <span class="token operator">*</span> input<span class="token punctuation">)</span>
Like <span class="token function">MergeFromCodedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but succeeds even <span class="token keyword">if</span> required fields are missing in the input<span class="token punctuation">.</span>

<span class="token function">MergeFromCodedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is just implemented as <span class="token function">MergePartialFromCodedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> followed by <span class="token function">IsInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

bool MessageLite<span class="token operator">::</span><span class="token function">SerializeToCodedStream</span><span class="token punctuation">(</span>
        io<span class="token operator">::</span>CodedOutputStream <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Write a protocol buffer of this message to the given output<span class="token punctuation">.</span>

Returns false on a write error<span class="token punctuation">.</span> If the message is missing required fields<span class="token punctuation">,</span> this may GOOGLE_CHECK<span class="token operator">-</span>fail<span class="token punctuation">.</span>

bool MessageLite<span class="token operator">::</span><span class="token function">SerializeToZeroCopyStream</span><span class="token punctuation">(</span>
        io<span class="token operator">::</span>ZeroCopyOutputStream <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Write the message to the given zero<span class="token operator">-</span>copy output stream<span class="token punctuation">.</span>

All required fields must be set<span class="token punctuation">.</span>

bool MessageLite<span class="token operator">::</span><span class="token function">SerializeToString</span><span class="token punctuation">(</span>
        std<span class="token operator">::</span>string <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Serialize the message and store it in the given string<span class="token punctuation">.</span>

All required fields must be set<span class="token punctuation">.</span>

bool MessageLite<span class="token operator">::</span><span class="token function">SerializeToArray</span><span class="token punctuation">(</span>
        <span class="token keyword">void</span> <span class="token operator">*</span> data<span class="token punctuation">,</span>
        <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token keyword">const</span>
Serialize the message and store it in the given byte array<span class="token punctuation">.</span>

All required fields must be set<span class="token punctuation">.</span>

std<span class="token operator">::</span>string MessageLite<span class="token operator">::</span><span class="token function">SerializeAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
Make a string encoding the message<span class="token punctuation">.</span>

Is equivalent to calling <span class="token function">SerializeToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> on a string and using that<span class="token punctuation">.</span> Returns the empty string <span class="token keyword">if</span> <span class="token function">SerializeToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> would have returned an error<span class="token punctuation">.</span> Note<span class="token operator">:</span> If you intend to generate many such strings<span class="token punctuation">,</span> you may reduce heap fragmentation by instead re<span class="token operator">-</span>using the same string object with calls to <span class="token function">SerializeToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

bool MessageLite<span class="token operator">::</span><span class="token function">SerializeToFileDescriptor</span><span class="token punctuation">(</span>
        <span class="token keyword">int</span> file_descriptor<span class="token punctuation">)</span> <span class="token keyword">const</span>
Serialize the message and write it to the given file descriptor<span class="token punctuation">.</span>

All required fields must be set<span class="token punctuation">.</span>

bool MessageLite<span class="token operator">::</span><span class="token function">SerializeToOstream</span><span class="token punctuation">(</span>
        std<span class="token operator">::</span>ostream <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Serialize the message and write it to the given C<span class="token operator">++</span> ostream<span class="token punctuation">.</span>

All required fields must be set<span class="token punctuation">.</span>

bool MessageLite<span class="token operator">::</span><span class="token function">AppendToString</span><span class="token punctuation">(</span>
        std<span class="token operator">::</span>string <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Like <span class="token function">SerializeToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> but appends to the data to the string&apos;s existing contents<span class="token punctuation">.</span>

All required fields must be set<span class="token punctuation">.</span>

virtual <span class="token class-name">size_t</span> MessageLite<span class="token operator">::</span><span class="token function">ByteSizeLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span>
Computes the serialized size of the message<span class="token punctuation">.</span>

This recursively calls <span class="token function">ByteSizeLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> on all embedded messages<span class="token punctuation">.</span>

<span class="token function">ByteSizeLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is generally linear in the number of fields defined <span class="token keyword">for</span> the proto<span class="token punctuation">.</span>

<span class="token keyword">void</span> MessageLite<span class="token operator">::</span><span class="token function">SerializeWithCachedSizes</span><span class="token punctuation">(</span>
        io<span class="token operator">::</span>CodedOutputStream <span class="token operator">*</span> output<span class="token punctuation">)</span> <span class="token keyword">const</span>
Serializes the message without recomputing the size<span class="token punctuation">.</span>

The message must not have changed since the last call to <span class="token function">ByteSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> and the value returned by ByteSize must be non<span class="token operator">-</span>negative<span class="token punctuation">.</span> Otherwise the results are undefined<span class="token punctuation">.</span>

uint8 <span class="token operator">*</span> MessageLite<span class="token operator">::</span><span class="token function">SerializeWithCachedSizesToArray</span><span class="token punctuation">(</span>
        uint8 <span class="token operator">*</span> target<span class="token punctuation">)</span> <span class="token keyword">const</span>
Like SerializeWithCachedSizes<span class="token punctuation">,</span> but writes directly to <span class="token operator">*</span>target<span class="token punctuation">,</span> returning a pointer to the byte immediately after the last byte written<span class="token punctuation">.</span>

<span class="token string">&quot;target&quot;</span> must point at a byte array of at least <span class="token function">ByteSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> bytes<span class="token punctuation">.</span> Whether to use deterministic serialization<span class="token punctuation">,</span> e<span class="token punctuation">.</span>g<span class="token punctuation">.</span><span class="token punctuation">,</span> maps in sorted order<span class="token punctuation">,</span> is determined by CodedOutputStream<span class="token operator">::</span><span class="token function">IsDefaultSerializationDeterministic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

virtual <span class="token keyword">int</span> MessageLite<span class="token operator">::</span><span class="token function">GetCachedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span>
Returns the result of the last call to <span class="token function">ByteSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

An embedded message&apos;s size is needed both to serialize <span class="token function">it</span> <span class="token punctuation">(</span>because embedded messages are length<span class="token operator">-</span>delimited<span class="token punctuation">)</span> and to compute the outer message&apos;s size<span class="token punctuation">.</span> Caching the size avoids computing it multiple times<span class="token punctuation">.</span>

<span class="token function">ByteSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> does not automatically use the cached size when available because this would require invalidating it every time the message was modified<span class="token punctuation">,</span> which would be too hard and expensive<span class="token punctuation">.</span> <span class="token punctuation">(</span>E<span class="token punctuation">.</span>g<span class="token punctuation">.</span> <span class="token keyword">if</span> a deeply<span class="token operator">-</span>nested sub<span class="token operator">-</span>message is changed<span class="token punctuation">,</span> all of its parents&apos; cached sizes would need to be invalidated<span class="token punctuation">,</span> which is too much work <span class="token keyword">for</span> an otherwise inlined setter method<span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre>
<p>其中可以看到有枚举定义：</p>
<pre class="language-"><code class="lang-c"><span class="token keyword">enum</span> <span class="token class-name">MessageLite</span><span class="token operator">::</span>ParseFlags <span class="token punctuation">{</span>
  kMerge <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
  kParse <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  kMergePartial <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
  kParsePartial <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
  kMergeWithAliasing <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
  kParseWithAliasing <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
  kMergePartialWithAliasing <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span>
  kParsePartialWithAliasing <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">7</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="java版messagelite"><a name="java版messagelite" class="plugin-anchor" href="#java版messagelite"><i class="fa fa-link" aria-hidden="true"></i></a><code>Java</code>版<code>MessageLite</code></h2>
<h3 id="java版messagelite的代码定义"><a name="java版messagelite的代码定义" class="plugin-anchor" href="#java版messagelite的代码定义"><i class="fa fa-link" aria-hidden="true"></i></a><code>Java</code>版<code>MessageLite</code>的代码定义</h3>
<ul>
<li><a href="https://chromium.googlesource.com/external/github.com/google/protobuf/+/HEAD/java/core/src/main/java/com/google/protobuf/MessageLite.java" target="_blank">java/core/src/main/java/com/google/protobuf/MessageLite.java - external/github.com/google/protobuf - Git at Google (googlesource.com)</a></li>
</ul>
<pre class="language-"><code class="lang-java"><span class="token comment">// Protocol Buffers - Google&apos;s data interchange format</span>
<span class="token comment">// Copyright 2008 Google Inc.  All rights reserved.</span>
<span class="token comment">// https://developers.google.com/protocol-buffers/</span>
<span class="token comment">//</span>
<span class="token comment">// Redistribution and use in source and binary forms, with or without</span>
<span class="token comment">// modification, are permitted provided that the following conditions are</span>
<span class="token comment">// met:</span>
<span class="token comment">//</span>
<span class="token comment">//     * Redistributions of source code must retain the above copyright</span>
<span class="token comment">// notice, this list of conditions and the following disclaimer.</span>
<span class="token comment">//     * Redistributions in binary form must reproduce the above</span>
<span class="token comment">// copyright notice, this list of conditions and the following disclaimer</span>
<span class="token comment">// in the documentation and/or other materials provided with the</span>
<span class="token comment">// distribution.</span>
<span class="token comment">//     * Neither the name of Google Inc. nor the names of its</span>
<span class="token comment">// contributors may be used to endorse or promote products derived from</span>
<span class="token comment">// this software without specific prior written permission.</span>
<span class="token comment">//</span>
<span class="token comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<span class="token comment">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<span class="token comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<span class="token comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<span class="token comment">// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<span class="token comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<span class="token comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<span class="token comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<span class="token comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<span class="token comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<span class="token comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="token comment">// TODO(kenton):  Use generics?  E.g. Builder&lt;BuilderType extends Builder&gt;, then</span>
<span class="token comment">//   mergeFrom*() could return BuilderType for better type-safety.</span>
<span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>protobuf</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">OutputStream</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * Abstract interface implemented by Protocol Message objects.
 *
 * &lt;p&gt;This interface is implemented by all protocol message objects. Non-lite messages additionally
 * implement the Message interface, which is a subclass of MessageLite. Use MessageLite instead when
 * you only need the subset of features which it supports -- namely, nothing that uses descriptors
 * or reflection. You can instruct the protocol compiler to generate classes which implement only
 * MessageLite, not the full Message interface, by adding the follow line to the .proto file:
 *
 * &lt;pre&gt;
 *   option optimize_for = LITE_RUNTIME;
 * &lt;/pre&gt;
 *
 * &lt;p&gt;This is particularly useful on resource-constrained systems where the full protocol buffers
 * runtime library is too big.
 *
 * &lt;p&gt;Note that on non-constrained systems (e.g. servers) when you need to link in lots of protocol
 * definitions, a better way to reduce total code footprint is to use {@code optimize_for =
 * CODE_SIZE}. This will make the generated code smaller while still supporting all the same
 * features (at the expense of speed). {@code optimize_for = LITE_RUNTIME} is best when you only
 * have a small number of message types linked into your binary, in which case the size of the
 * protocol buffers runtime itself is the biggest problem.
 *
 * @author kenton@google.com Kenton Varda
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MessageLite</span> <span class="token keyword">extends</span> <span class="token class-name">MessageLiteOrBuilder</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * Serializes the message and writes it to {@code output}. This does not flush or close the
   * stream.
   */</span>
  <span class="token keyword">void</span> <span class="token function">writeTo</span><span class="token punctuation">(</span><span class="token class-name">CodedOutputStream</span> output<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Get the number of bytes required to encode this message. The result is only computed on the
   * first call and memoized after that.
   *
   * If this message requires more than Integer.MAX_VALUE bytes to encode, the return value will
   * be smaller than the actual number of bytes required and might be negative.
   */</span>
  <span class="token keyword">int</span> <span class="token function">getSerializedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/** Gets the parser for a message of the same type as this message. */</span>
  <span class="token class-name">Parser</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">MessageLite</span><span class="token punctuation">&gt;</span></span> <span class="token function">getParserForType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// -----------------------------------------------------------------</span>
  <span class="token comment">// Convenience methods.</span>
  <span class="token comment">/**
   * Serializes the message to a {@code ByteString} and returns it. This is just a trivial wrapper
   * around {@link #writeTo(CodedOutputStream)}.
   *
   * If this message requires more than Integer.MAX_VALUE bytes to encode, the behavior is
   * unpredictable. It may throw a runtime exception or truncate or slice the data.
   */</span>
  <span class="token class-name">ByteString</span> <span class="token function">toByteString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Serializes the message to a {@code byte} array and returns it. This is just a trivial wrapper
   * around {@link #writeTo(CodedOutputStream)}.
   *
   * If this message requires more than Integer.MAX_VALUE bytes to encode, the behavior is
   * unpredictable. It may throw a runtime exception or truncate or slice the data.
   */</span>
  <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Serializes the message and writes it to {@code output}. This is just a trivial wrapper around
   * {@link #writeTo(CodedOutputStream)}. This does not flush or close the stream.
   *
   * &lt;p&gt;NOTE: Protocol Buffers are not self-delimiting. Therefore, if you write any more data to the
   * stream after the message, you must somehow ensure that the parser on the receiving end does not
   * interpret this as being part of the protocol message. This can be done e.g. by writing the size
   * of the message before the data, then making sure to limit the input to that size on the
   * receiving end (e.g. by wrapping the InputStream in one which limits the input). Alternatively,
   * just use {@link #writeDelimitedTo(OutputStream)}.
   */</span>
  <span class="token keyword">void</span> <span class="token function">writeTo</span><span class="token punctuation">(</span><span class="token class-name">OutputStream</span> output<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Like {@link #writeTo(OutputStream)}, but writes the size of the message as a varint before
   * writing the data. This allows more data to be written to the stream after the message without
   * the need to delimit the message data yourself. Use {@link
   * Builder#mergeDelimitedFrom(InputStream)} (or the static method {@code
   * YourMessageType.parseDelimitedFrom(InputStream)}) to parse messages written by this method.
   */</span>
  <span class="token keyword">void</span> <span class="token function">writeDelimitedTo</span><span class="token punctuation">(</span><span class="token class-name">OutputStream</span> output<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
  <span class="token comment">// =================================================================</span>
  <span class="token comment">// Builders</span>
  <span class="token comment">/** Constructs a new builder for a message of the same type as this message. */</span>
  <span class="token class-name">Builder</span> <span class="token function">newBuilderForType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Constructs a builder initialized with the current message. Use this to derive a new message
   * from the current one.
   */</span>
  <span class="token class-name">Builder</span> <span class="token function">toBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/** Abstract interface implemented by Protocol Message builders. */</span>
  <span class="token keyword">interface</span> <span class="token class-name">Builder</span> <span class="token keyword">extends</span> <span class="token class-name">MessageLiteOrBuilder</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>
    <span class="token comment">/** Resets all fields to their default values. */</span>
    <span class="token class-name">Builder</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Constructs the message based on the state of the Builder. Subsequent changes to the Builder
     * will not affect the returned message.
     *
     * @throws UninitializedMessageException The message is missing one or more required fields
     *     (i.e. {@link #isInitialized()} returns false). Use {@link #buildPartial()} to bypass this
     *     check.
     */</span>
    <span class="token class-name">MessageLite</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Like {@link #build()}, but does not throw an exception if the message is missing required
     * fields. Instead, a partial message is returned. Subsequent changes to the Builder will not
     * affect the returned message.
     */</span>
    <span class="token class-name">MessageLite</span> <span class="token function">buildPartial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Clones the Builder.
     *
     * @see Object#clone()
     */</span>
    <span class="token class-name">Builder</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Parses a message of this type from the input and merges it with this message.
     *
     * &lt;p&gt;Warning: This does not verify that all required fields are present in the input message.
     * If you call {@link #build()} without setting all required fields, it will throw an {@link
     * UninitializedMessageException}, which is a {@code RuntimeException} and thus might not be
     * caught. There are a few good ways to deal with this:
     *
     * &lt;ul&gt;
     *   &lt;li&gt;Call {@link #isInitialized()} to verify that all required fields are set before
     *       building.
     *   &lt;li&gt;Use {@code buildPartial()} to build, which ignores missing required fields.
     * &lt;/ul&gt;
     *
     * &lt;p&gt;Note: The caller should call {@link CodedInputStream#checkLastTagWas(int)} after calling
     * this to verify that the last tag seen was the appropriate end-group tag, or zero for EOF.
     */</span>
    <span class="token class-name">Builder</span> <span class="token function">mergeFrom</span><span class="token punctuation">(</span><span class="token class-name">CodedInputStream</span> input<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Like {@link Builder#mergeFrom(CodedInputStream)}, but also parses extensions. The extensions
     * that you want to be able to parse must be registered in {@code extensionRegistry}. Extensions
     * not in the registry will be treated as unknown fields.
     */</span>
    <span class="token class-name">Builder</span> <span class="token function">mergeFrom</span><span class="token punctuation">(</span><span class="token class-name">CodedInputStream</span> input<span class="token punctuation">,</span> <span class="token class-name">ExtensionRegistryLite</span> extensionRegistry<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
    <span class="token comment">// ---------------------------------------------------------------</span>
    <span class="token comment">// Convenience methods.</span>
    <span class="token comment">/**
     * Parse {@code data} as a message of this type and merge it with the message being built. This
     * is just a small wrapper around {@link #mergeFrom(CodedInputStream)}.
     *
     * @return this
     */</span>
    <span class="token class-name">Builder</span> <span class="token function">mergeFrom</span><span class="token punctuation">(</span><span class="token class-name">ByteString</span> data<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InvalidProtocolBufferException</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Parse {@code data} as a message of this type and merge it with the message being built. This
     * is just a small wrapper around {@link #mergeFrom(CodedInputStream,ExtensionRegistryLite)}.
     *
     * @return this
     */</span>
    <span class="token class-name">Builder</span> <span class="token function">mergeFrom</span><span class="token punctuation">(</span><span class="token class-name">ByteString</span> data<span class="token punctuation">,</span> <span class="token class-name">ExtensionRegistryLite</span> extensionRegistry<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">InvalidProtocolBufferException</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Parse {@code data} as a message of this type and merge it with the message being built. This
     * is just a small wrapper around {@link #mergeFrom(CodedInputStream)}.
     *
     * @return this
     */</span>
    <span class="token class-name">Builder</span> <span class="token function">mergeFrom</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InvalidProtocolBufferException</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Parse {@code data} as a message of this type and merge it with the message being built. This
     * is just a small wrapper around {@link #mergeFrom(CodedInputStream)}.
     *
     * @return this
     */</span>
    <span class="token class-name">Builder</span> <span class="token function">mergeFrom</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> off<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InvalidProtocolBufferException</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Parse {@code data} as a message of this type and merge it with the message being built. This
     * is just a small wrapper around {@link #mergeFrom(CodedInputStream,ExtensionRegistryLite)}.
     *
     * @return this
     */</span>
    <span class="token class-name">Builder</span> <span class="token function">mergeFrom</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">,</span> <span class="token class-name">ExtensionRegistryLite</span> extensionRegistry<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">InvalidProtocolBufferException</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Parse {@code data} as a message of this type and merge it with the message being built. This
     * is just a small wrapper around {@link #mergeFrom(CodedInputStream,ExtensionRegistryLite)}.
     *
     * @return this
     */</span>
    <span class="token class-name">Builder</span> <span class="token function">mergeFrom</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> off<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">,</span> <span class="token class-name">ExtensionRegistryLite</span> extensionRegistry<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">InvalidProtocolBufferException</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Parse a message of this type from {@code input} and merge it with the message being built.
     * This is just a small wrapper around {@link #mergeFrom(CodedInputStream)}. Note that this
     * method always reads the &lt;i&gt;entire&lt;/i&gt; input (unless it throws an exception). If you want it
     * to stop earlier, you will need to wrap your input in some wrapper stream that limits reading.
     * Or, use {@link MessageLite#writeDelimitedTo(OutputStream)} to write your message and {@link
     * #mergeDelimitedFrom(InputStream)} to read it.
     *
     * &lt;p&gt;Despite usually reading the entire input, this does not close the stream.
     *
     * @return this
     */</span>
    <span class="token class-name">Builder</span> <span class="token function">mergeFrom</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span> input<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Parse a message of this type from {@code input} and merge it with the message being built.
     * This is just a small wrapper around {@link
     * #mergeFrom(CodedInputStream,ExtensionRegistryLite)}.
     *
     * @return this
     */</span>
    <span class="token class-name">Builder</span> <span class="token function">mergeFrom</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span> input<span class="token punctuation">,</span> <span class="token class-name">ExtensionRegistryLite</span> extensionRegistry<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Merge {@code other} into the message being built. {@code other} must have the exact same type
     * as {@code this} (i.e. {@code getClass().equals(getDefaultInstanceForType().getClass())}).
     *
     * &lt;p&gt;Merging occurs as follows. For each field:

     * * For singular primitive fields, if the field is set in {@code other}, then {@code other}&apos;s
     * value overwrites the value in this message.

     * * For singular message fields, if the field is set in {@code other}, it is merged into the
     * corresponding sub-message of this message using the same merging rules.

     * * For repeated fields, the elements in {@code other} are concatenated with the elements in
     * this message. * For oneof groups, if the other message has one of the fields set, the group
     * of this message is cleared and replaced by the field of the other message, so that the oneof
     * constraint is preserved.
     *
     * &lt;p&gt;This is equivalent to the {@code Message::MergeFrom} method in C++.
     */</span>
    <span class="token class-name">Builder</span> <span class="token function">mergeFrom</span><span class="token punctuation">(</span><span class="token class-name">MessageLite</span> other<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Like {@link #mergeFrom(InputStream)}, but does not read until EOF. Instead, the size of the
     * message (encoded as a varint) is read first, then the message data. Use {@link
     * MessageLite#writeDelimitedTo(OutputStream)} to write messages in this format.
     *
     * @return True if successful, or false if the stream is at EOF when the method starts. Any
     *     other error (including reaching EOF during parsing) will cause an exception to be thrown.
     */</span>
    <span class="token keyword">boolean</span> <span class="token function">mergeDelimitedFrom</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span> input<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
    <span class="token comment">/** Like {@link #mergeDelimitedFrom(InputStream)} but supporting extensions. */</span>
    <span class="token keyword">boolean</span> <span class="token function">mergeDelimitedFrom</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span> input<span class="token punctuation">,</span> <span class="token class-name">ExtensionRegistryLite</span> extensionRegistry<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>-&gt; 对应的函数定义：</p>
<ul>
<li><code>public interface MessageLite extends MessageLiteOrBuilder</code> {<ul>
<li><code>void writeTo(CodedOutputStream output) throws IOException;</code></li>
<li><code>int getSerializedSize();</code></li>
<li><code>Parser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>?</span> <span class="token attr-name">extends</span> <span class="token attr-name">MessageLite</span><span class="token punctuation">&gt;</span></span> getParserForType();</code></li>
<li><code>ByteString toByteString();</code></li>
<li><code>byte[] toByteArray();</code></li>
<li><code>void writeTo(OutputStream output) throws IOException;</code></li>
<li><code>void writeDelimitedTo(OutputStream output) throws IOException;</code></li>
<li><code>Builders</code><ul>
<li><code>Builder newBuilderForType();</code></li>
<li><code>Builder toBuilder();</code></li>
<li><code>interface Builder extends MessageLiteOrBuilder, Cloneable {</code><ul>
<li><code>Builder clear();</code></li>
<li><code>MessageLite build();</code></li>
<li><code>MessageLite buildPartial();</code></li>
<li><code>Builder clone();</code></li>
<li><code>Builder mergeFrom(CodedInputStream input) throws IOException;</code></li>
<li><code>Builder mergeFrom(CodedInputStream input, ExtensionRegistryLite extensionRegistry) throws IOException;</code></li>
<li><code>Builder mergeFrom(ByteString data) throws InvalidProtocolBufferException;</code></li>
<li><code>Builder mergeFrom(ByteString data, ExtensionRegistryLite extensionRegistry) throws InvalidProtocolBufferException;</code></li>
<li><code>Builder mergeFrom(byte[] data) throws InvalidProtocolBufferException;</code></li>
<li><code>Builder mergeFrom(byte[] data, int off, int len) throws InvalidProtocolBufferException;</code></li>
<li><code>Builder mergeFrom(byte[] data, ExtensionRegistryLite extensionRegistry) throws InvalidProtocolBufferException;</code></li>
<li><code>Builder mergeFrom(byte[] data, int off, int len, ExtensionRegistryLite extensionRegistry) throws InvalidProtocolBufferException;</code></li>
<li><code>Builder mergeFrom(InputStream input) throws IOException;</code></li>
<li><code>Builder mergeFrom(InputStream input, ExtensionRegistryLite extensionRegistry) throws IOException;</code></li>
<li><code>Builder mergeFrom(MessageLite other);</code></li>
<li><code>boolean mergeDelimitedFrom(InputStream input) throws IOException;</code></li>
<li><code>boolean mergeDelimitedFrom(InputStream input, ExtensionRegistryLite extensionRegistry) throws IOException;</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="java版messagelite的文档说明"><a name="java版messagelite的文档说明" class="plugin-anchor" href="#java版messagelite的文档说明"><i class="fa fa-link" aria-hidden="true"></i></a><code>Java</code>版<code>MessageLite</code>的文档说明</h3>
<ul>
<li>com.google.protobuf Interface MessageLite<ul>
<li><a href="https://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/MessageLite" target="_blank">https://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/MessageLite</a></li>
<li><a href="https://developers.google.com/protocol-buffers/docs/reference/java" target="_blank">https://developers.google.com/protocol-buffers/docs/reference/java</a><ul>
<li>搜索并点击左边的：<code>MessageLite</code>，即可查看文档</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="language-"><code class="lang-c">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>protobuf
Interface MessageLite
All Superinterfaces<span class="token operator">:</span>
MessageLiteOrBuilder
All Known Subinterfaces<span class="token operator">:</span>
Message
All Known Implementing Classes<span class="token operator">:</span>
AbstractMessage<span class="token punctuation">,</span> AbstractMessageLite<span class="token punctuation">,</span> Any<span class="token punctuation">,</span> Api<span class="token punctuation">,</span> BoolValue<span class="token punctuation">,</span> BytesValue<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>DescriptorProto<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>DescriptorProto<span class="token punctuation">.</span>ExtensionRange<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>DescriptorProto<span class="token punctuation">.</span>ReservedRange<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>EnumDescriptorProto<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>EnumDescriptorProto<span class="token punctuation">.</span>EnumReservedRange<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>EnumOptions<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>EnumValueDescriptorProto<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>EnumValueOptions<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>ExtensionRangeOptions<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>FieldDescriptorProto<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>FieldOptions<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>FileDescriptorProto<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>FileDescriptorSet<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>FileOptions<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>GeneratedCodeInfo<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>GeneratedCodeInfo<span class="token punctuation">.</span>Annotation<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>MessageOptions<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>MethodDescriptorProto<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>MethodOptions<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>OneofDescriptorProto<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>OneofOptions<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>ServiceDescriptorProto<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>ServiceOptions<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>SourceCodeInfo<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>SourceCodeInfo<span class="token punctuation">.</span>Location<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>UninterpretedOption<span class="token punctuation">,</span> DescriptorProtos<span class="token punctuation">.</span>UninterpretedOption<span class="token punctuation">.</span>NamePart<span class="token punctuation">,</span> DoubleValue<span class="token punctuation">,</span> Duration<span class="token punctuation">,</span> DynamicMessage<span class="token punctuation">,</span> Empty<span class="token punctuation">,</span> Enum<span class="token punctuation">,</span> EnumValue<span class="token punctuation">,</span> Field<span class="token punctuation">,</span> FieldMask<span class="token punctuation">,</span> FloatValue<span class="token punctuation">,</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>GeneratedMessageV3<span class="token punctuation">,</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>GeneratedMessageV3<span class="token punctuation">.</span>ExtendableMessage<span class="token punctuation">,</span> Int32Value<span class="token punctuation">,</span> Int64Value<span class="token punctuation">,</span> ListValue<span class="token punctuation">,</span> Method<span class="token punctuation">,</span> Mixin<span class="token punctuation">,</span> Option<span class="token punctuation">,</span> PluginProtos<span class="token punctuation">.</span>CodeGeneratorRequest<span class="token punctuation">,</span> PluginProtos<span class="token punctuation">.</span>CodeGeneratorResponse<span class="token punctuation">,</span> PluginProtos<span class="token punctuation">.</span>CodeGeneratorResponse<span class="token punctuation">.</span>File<span class="token punctuation">,</span> PluginProtos<span class="token punctuation">.</span>Version<span class="token punctuation">,</span> SourceContext<span class="token punctuation">,</span> StringValue<span class="token punctuation">,</span> Struct<span class="token punctuation">,</span> Timestamp<span class="token punctuation">,</span> Type<span class="token punctuation">,</span> UInt32Value<span class="token punctuation">,</span> UInt64Value<span class="token punctuation">,</span> Value

public interface MessageLite
extends MessageLiteOrBuilder
Abstract interface implemented by Protocol Message objects<span class="token punctuation">.</span>
This interface is implemented by all protocol message objects<span class="token punctuation">.</span> Non<span class="token operator">-</span>lite messages additionally implement the Message interface<span class="token punctuation">,</span> which is a subclass of MessageLite<span class="token punctuation">.</span> Use MessageLite instead when you only need the subset of features which it supports <span class="token operator">--</span> namely<span class="token punctuation">,</span> nothing that uses descriptors or reflection<span class="token punctuation">.</span> You can instruct the protocol compiler to generate classes which implement only MessageLite<span class="token punctuation">,</span> not the full Message interface<span class="token punctuation">,</span> by adding the follow line to the <span class="token punctuation">.</span>proto file<span class="token operator">:</span>

   option optimize_for <span class="token operator">=</span> LITE_RUNTIME<span class="token punctuation">;</span>

This is particularly useful on resource<span class="token operator">-</span>constrained systems where the full protocol buffers runtime library is too big<span class="token punctuation">.</span>

Note that on non<span class="token operator">-</span>constrained <span class="token function">systems</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> servers<span class="token punctuation">)</span> when you need to link in lots of protocol definitions<span class="token punctuation">,</span> a better way to reduce total code footprint is to use optimize_for <span class="token operator">=</span> CODE_SIZE<span class="token punctuation">.</span> This will make the generated code smaller <span class="token keyword">while</span> still supporting all the same <span class="token function">features</span> <span class="token punctuation">(</span>at the expense of speed<span class="token punctuation">)</span><span class="token punctuation">.</span> optimize_for <span class="token operator">=</span> LITE_RUNTIME is best when you only have a small number of message types linked into your binary<span class="token punctuation">,</span> in which <span class="token keyword">case</span> the size of the protocol buffers runtime itself is the biggest problem<span class="token punctuation">.</span>

Nested Class Summary
Nested Classes
Modifier and Type    Interface and Description
<span class="token keyword">static</span> interface     MessageLite<span class="token punctuation">.</span>Builder
Abstract interface implemented by Protocol Message builders<span class="token punctuation">.</span>
Method Summary
All MethodsInstance MethodsAbstract Methods
Modifier and Type    Method and Description
Parser<span class="token operator">&lt;</span><span class="token operator">?</span> extends MessageLite<span class="token operator">&gt;</span>    <span class="token function">getParserForType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Gets the parser <span class="token keyword">for</span> a message of the same type as this message<span class="token punctuation">.</span>
<span class="token keyword">int</span>    <span class="token function">getSerializedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Get the number of bytes required to encode this message<span class="token punctuation">.</span>
MessageLite<span class="token punctuation">.</span>Builder    <span class="token function">newBuilderForType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Constructs a new builder <span class="token keyword">for</span> a message of the same type as this message<span class="token punctuation">.</span>
MessageLite<span class="token punctuation">.</span>Builder    <span class="token function">toBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Constructs a builder initialized with the current message<span class="token punctuation">.</span>
byte<span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Serializes the message to a byte array and returns it<span class="token punctuation">.</span>
ByteString    <span class="token function">toByteString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Serializes the message to a ByteString and returns it<span class="token punctuation">.</span>
<span class="token keyword">void</span>    <span class="token function">writeDelimitedTo</span><span class="token punctuation">(</span>java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>OutputStream output<span class="token punctuation">)</span>
Like <span class="token function">writeTo</span><span class="token punctuation">(</span>OutputStream<span class="token punctuation">)</span><span class="token punctuation">,</span> but writes the size of the message as a varint before writing the data<span class="token punctuation">.</span>
<span class="token keyword">void</span>    <span class="token function">writeTo</span><span class="token punctuation">(</span>CodedOutputStream output<span class="token punctuation">)</span>
Serializes the message and writes it to output<span class="token punctuation">.</span>
<span class="token keyword">void</span>    <span class="token function">writeTo</span><span class="token punctuation">(</span>java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>OutputStream output<span class="token punctuation">)</span>
Serializes the message and writes it to output<span class="token punctuation">.</span>
Methods inherited from interfaceÂ com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>MessageLiteOrBuilder
getDefaultInstanceForType<span class="token punctuation">,</span> isInitialized
Method Detail
writeTo
<span class="token keyword">void</span> <span class="token function">writeTo</span><span class="token punctuation">(</span>CodedOutputStream output<span class="token punctuation">)</span>
      throws java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException
Serializes the message and writes it to output<span class="token punctuation">.</span> This does not flush or close the stream<span class="token punctuation">.</span>
Throws<span class="token operator">:</span>
java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException
getSerializedSize
<span class="token keyword">int</span> <span class="token function">getSerializedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Get the number of bytes required to encode this message<span class="token punctuation">.</span> The result is only computed on the first call and memoized after that<span class="token punctuation">.</span>
getParserForType
Parser<span class="token operator">&lt;</span><span class="token operator">?</span> extends MessageLite<span class="token operator">&gt;</span> <span class="token function">getParserForType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Gets the parser <span class="token keyword">for</span> a message of the same type as this message<span class="token punctuation">.</span>
toByteString
ByteString <span class="token function">toByteString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Serializes the message to a ByteString and returns it<span class="token punctuation">.</span> This is just a trivial wrapper around <span class="token function">writeTo</span><span class="token punctuation">(</span>CodedOutputStream<span class="token punctuation">)</span><span class="token punctuation">.</span>
toByteArray
byte<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Serializes the message to a byte array and returns it<span class="token punctuation">.</span> This is just a trivial wrapper around <span class="token function">writeTo</span><span class="token punctuation">(</span>CodedOutputStream<span class="token punctuation">)</span><span class="token punctuation">.</span>
writeTo
<span class="token keyword">void</span> <span class="token function">writeTo</span><span class="token punctuation">(</span>java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>OutputStream output<span class="token punctuation">)</span>
      throws java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException
Serializes the message and writes it to output<span class="token punctuation">.</span> This is just a trivial wrapper around <span class="token function">writeTo</span><span class="token punctuation">(</span>CodedOutputStream<span class="token punctuation">)</span><span class="token punctuation">.</span> This does not flush or close the stream<span class="token punctuation">.</span>
NOTE<span class="token operator">:</span> Protocol Buffers are not self<span class="token operator">-</span>delimiting<span class="token punctuation">.</span> Therefore<span class="token punctuation">,</span> <span class="token keyword">if</span> you write any more data to the stream after the message<span class="token punctuation">,</span> you must somehow ensure that the parser on the receiving end does not interpret this as being part of the protocol message<span class="token punctuation">.</span> This can be done e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> by writing the size of the message before the data<span class="token punctuation">,</span> then making sure to limit the input to that size on the receiving <span class="token function">end</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> by wrapping the InputStream in one which limits the input<span class="token punctuation">)</span><span class="token punctuation">.</span> Alternatively<span class="token punctuation">,</span> just use <span class="token function">writeDelimitedTo</span><span class="token punctuation">(</span>OutputStream<span class="token punctuation">)</span><span class="token punctuation">.</span>

Throws<span class="token operator">:</span>
java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException
writeDelimitedTo
<span class="token keyword">void</span> <span class="token function">writeDelimitedTo</span><span class="token punctuation">(</span>java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>OutputStream output<span class="token punctuation">)</span>
               throws java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException
Like <span class="token function">writeTo</span><span class="token punctuation">(</span>OutputStream<span class="token punctuation">)</span><span class="token punctuation">,</span> but writes the size of the message as a varint before writing the data<span class="token punctuation">.</span> This allows more data to be written to the stream after the message without the need to delimit the message data yourself<span class="token punctuation">.</span> Use MessageLite<span class="token punctuation">.</span>Builder<span class="token punctuation">.</span><span class="token function">mergeDelimitedFrom</span><span class="token punctuation">(</span>InputStream<span class="token punctuation">)</span> <span class="token punctuation">(</span>or the <span class="token keyword">static</span> method YourMessageType<span class="token punctuation">.</span><span class="token function">parseDelimitedFrom</span><span class="token punctuation">(</span>InputStream<span class="token punctuation">)</span><span class="token punctuation">)</span> to parse messages written by this method<span class="token punctuation">.</span>
Throws<span class="token operator">:</span>
java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException
newBuilderForType
MessageLite<span class="token punctuation">.</span>Builder <span class="token function">newBuilderForType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Constructs a new builder <span class="token keyword">for</span> a message of the same type as this message<span class="token punctuation">.</span>
toBuilder
MessageLite<span class="token punctuation">.</span>Builder <span class="token function">toBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Constructs a builder initialized with the current message<span class="token punctuation">.</span> Use this to derive a new message from the current one<span class="token punctuation">.</span>
</code></pre>
<footer class="page-footer"><span class="copyright">crifan.org，使用<a href="https://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank">署名4.0国际(CC BY 4.0)协议</a>发布 all right reserved，powered by Gitbook</span><span class="footer-modification">最后更新：
2022-11-10 10:13:46
</span></footer></body></html>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: MessageLite">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../../youtube/" class="navigation navigation-next " aria-label="Next page: YouTube中Protobuf">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"MessageLite定义","level":"1.4.2.1.1","depth":4,"next":{"title":"YouTube中Protobuf","level":"1.4.3","depth":2,"path":"protobuf_re/youtube/README.md","ref":"protobuf_re/youtube/README.md","articles":[{"title":"普通的iOS类","level":"1.4.3.1","depth":3,"path":"protobuf_re/youtube/normal_ios/README.md","ref":"protobuf_re/youtube/normal_ios/README.md","articles":[{"title":"YTIPlayerRequest","level":"1.4.3.1.1","depth":4,"path":"protobuf_re/youtube/normal_ios/ytiplayerrequest.md","ref":"protobuf_re/youtube/normal_ios/ytiplayerrequest.md","articles":[]},{"title":"YTIAdBreakRequest","level":"1.4.3.1.2","depth":4,"path":"protobuf_re/youtube/normal_ios/ytiadbreakrequest.md","ref":"protobuf_re/youtube/normal_ios/ytiadbreakrequest.md","articles":[]},{"title":"YTIInnerTubeContext","level":"1.4.3.1.3","depth":4,"path":"protobuf_re/youtube/normal_ios/ytiinnertubecontext.md","ref":"protobuf_re/youtube/normal_ios/ytiinnertubecontext.md","articles":[]},{"title":"YTIClientInfo","level":"1.4.3.1.4","depth":4,"path":"protobuf_re/youtube/normal_ios/yticlientinfo.md","ref":"protobuf_re/youtube/normal_ios/yticlientinfo.md","articles":[]},{"title":"YTIOnesieHotConfig","level":"1.4.3.1.5","depth":4,"path":"protobuf_re/youtube/normal_ios/ytionesiehotconfig.md","ref":"protobuf_re/youtube/normal_ios/ytionesiehotconfig.md","articles":[]}]},{"title":"lite的C++类","level":"1.4.3.2","depth":3,"path":"protobuf_re/youtube/lite_cpp/README.md","ref":"protobuf_re/youtube/lite_cpp/README.md","articles":[{"title":"OnesieRequestProto","level":"1.4.3.2.1","depth":4,"path":"protobuf_re/youtube/lite_cpp/onesierequestproto.md","ref":"protobuf_re/youtube/lite_cpp/onesierequestproto.md","articles":[]}]}]},"previous":{"title":"MessageLite","level":"1.4.2.1","depth":3,"path":"protobuf_re/lite_cpp/messagelite/README.md","ref":"protobuf_re/lite_cpp/messagelite/README.md","articles":[{"title":"MessageLite定义","level":"1.4.2.1.1","depth":4,"path":"protobuf_re/lite_cpp/messagelite/define.md","ref":"protobuf_re/lite_cpp/messagelite/define.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["theme-comscore","anchors","expandable-menu","-lunr","-search","search-plus","disqus","-highlight","prism","prism-themes","github-buttons","-splitter","splitter-nosessionbutcookie","-sharing","sharing-plus","tbfed-pagefooter","donate","sitemap-general","copy-code-button","callouts","toolbar-button"],"root":"./src","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"crifan.org，使用<a href='https://creativecommons.org/licenses/by/4.0/deed.zh'>署名4.0国际(CC BY 4.0)协议</a>发布","modify_label":"最后更新：","modify_format":"YYYY-MM-DD HH:mm:ss"},"prism":{"css":["prism-themes/themes/prism-atom-dark.css"]},"disqus":{"useIdentifier":false,"shortName":"crifan"},"callouts":{"showTypeInHeader":false},"toolbar-button":{"label":"下载PDF","url":"https://book.crifan.org/books/ios_re_protobuf_reverse/pdf/ios_re_protobuf_reverse.pdf","icon":"fa-file-pdf-o"},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"donate":{"title":"","button":"打赏","wechat":"https://www.crifan.org/files/res/crifan_com/crifan_wechat_pay.jpg","alipay":"https://www.crifan.org/files/res/crifan_com/crifan_alipay_pay.jpg","wechatText":"微信打赏给Crifan","alipayText":"支付宝打赏给Crifan"},"sitemap-general":{"prefix":"https://book.crifan.org/books/ios_re_protobuf_reverse/website/"},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-comscore":{},"splitter-nosessionbutcookie":{},"prism-themes":{},"github-buttons":{"buttons":[{"repo":"ios_re_protobuf_reverse","user":"crifan","type":"star","count":true,"size":"small"},{"user":"crifan","type":"follow","width":"120","count":false,"size":"small"}]},"expandable-menu":{},"copy-code-button":{},"sharing":{"qq":true,"all":["douban","facebook","google","instapaper","line","linkedin","messenger","pocket","qq","qzone","stumbleupon","twitter","viber","vk","weibo","whatsapp"],"douban":false,"facebook":true,"weibo":true,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":false,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchors":{},"search-plus":{}},"theme":"default","author":"Crifan Li <admin@crifan.com>","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"iOS逆向YouTube：protobuf逆向","language":"zh-hans","links":{"sidebar":{"主页":"http://www.crifan.org"}},"gitbook":"*","description":"整理iOS逆向YouTube期间涉及到的Protobuf的逆向。先是概览；再是Protobuf的正向相关知识；然后是Protobuf逆向内容，包括普通的iOS的类、lite精简版的C++的类、YouTube中Protobuf的内容；其中，普通的iOS的类有GPBMessage、GPBDescriptor、GPBFieldDescriptor；lite精简版C++的类有MessageLite及其定义；YouTube中的普通的iOS类的Protobuf类有：YTIPlayerRequest、YTIAdBreakRequest、YTIInnerTubeContext，YTIClientInfo、YTIOnesieHotConfig，以及lite的C++类有OnesieRequestProto；"},"file":{"path":"protobuf_re/lite_cpp/messagelite/define.md","mtime":"2022-11-10T02:13:46.268Z","type":"markdown"},"gitbook":{"version":"3.7.1","time":"2022-11-10T02:35:59.390Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-expandable-menu/expandable-chapters.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-splitter-nosessionbutcookie/splitter.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-toolbar-button/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

