
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <title>Java通用 · Frida逆向实例和工具函数</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.7">
        <meta name="author" content="Crifan Li <admin@crifan.com>">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-menu/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-atom-dark.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter-nosessionbutcookie/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-callouts/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="android_class.html" />
    
    
    <link rel="prev" href="./" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"repo":"frida_re_example_function","user":"crifan","type":"star","count":true,"size":"small"},{"user":"crifan","type":"follow","width":"120","count":false,"size":"small"}]};
    </script>

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="http://www.crifan.org" target="_blank" class="custom-link">主页</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                        <b>1.1.</b>
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../frida_overview/">
            
                <a href="../../frida_overview/">
            
                    
                        <b>1.2.</b>
                    
                    概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../frida_re_example/">
            
                <a href="../../frida_re_example/">
            
                    
                        <b>1.3.</b>
                    
                    Frida逆向实例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../frida_re_example/code_snippet/">
            
                <a href="../../frida_re_example/code_snippet/">
            
                    
                        <b>1.3.1.</b>
                    
                    代码段
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../frida_re_example/code_snippet/frida_official.html">
            
                <a href="../../frida_re_example/code_snippet/frida_official.html">
            
                    
                        <b>1.3.1.1.</b>
                    
                    Frida官网
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../../frida_re_example/code_snippet/online_others.html">
            
                <a href="../../frida_re_example/code_snippet/online_others.html">
            
                    
                        <b>1.3.1.2.</b>
                    
                    网上别人的案例
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../frida_re_example/frida/">
            
                <a href="../../frida_re_example/frida/">
            
                    
                        <b>1.3.2.</b>
                    
                    frida
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../../frida_re_example/frida/ios_objc/">
            
                <a href="../../frida_re_example/frida/ios_objc/">
            
                    
                        <b>1.3.2.1.</b>
                    
                    iOS的ObjC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1.1" data-path="../../frida_re_example/frida/ios_objc/object/">
            
                <a href="../../frida_re_example/frida/ios_objc/object/">
            
                    
                        <b>1.3.2.1.1.</b>
                    
                    ObjC的Object
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1.1.1" data-path="../../frida_re_example/frida/ios_objc/object/methods_ownMethods.html">
            
                <a href="../../frida_re_example/frida/ios_objc/object/methods_ownMethods.html">
            
                    
                        <b>1.3.2.1.1.1.</b>
                    
                    $methods和$ownMethods
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.1.2" data-path="../../frida_re_example/frida/ios_objc/hook_func/">
            
                <a href="../../frida_re_example/frida/ios_objc/hook_func/">
            
                    
                        <b>1.3.2.1.2.</b>
                    
                    Interceptor=hook函数
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1.2.1" data-path="../../frida_re_example/frida/ios_objc/hook_func/single_cls_single_func.html">
            
                <a href="../../frida_re_example/frida/ios_objc/hook_func/single_cls_single_func.html">
            
                    
                        <b>1.3.2.1.2.1.</b>
                    
                    单个类的单个函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.1.2.2" data-path="../../frida_re_example/frida/ios_objc/hook_func/single_cls_all_func.html">
            
                <a href="../../frida_re_example/frida/ios_objc/hook_func/single_cls_all_func.html">
            
                    
                        <b>1.3.2.1.2.2.</b>
                    
                    单个类的所有函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.1.2.3" data-path="../../frida_re_example/frida/ios_objc/hook_func/cll_cls_all_func.html">
            
                <a href="../../frida_re_example/frida/ios_objc/hook_func/cll_cls_all_func.html">
            
                    
                        <b>1.3.2.1.2.3.</b>
                    
                    所有类的所有函数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.1.3" data-path="../../frida_re_example/frida/ios_objc/apiresolver/">
            
                <a href="../../frida_re_example/frida/ios_objc/apiresolver/">
            
                    
                        <b>1.3.2.1.3.</b>
                    
                    ApiResolver
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.1.4" data-path="../../frida_re_example/frida/ios_objc/stalker/">
            
                <a href="../../frida_re_example/frida/ios_objc/stalker/">
            
                    
                        <b>1.3.2.1.4.</b>
                    
                    Stalker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1.4.1" data-path="../../frida_re_example/frida/ios_objc/stalker/akd_lldb_unnamed_symbol2575.html">
            
                <a href="../../frida_re_example/frida/ios_objc/stalker/akd_lldb_unnamed_symbol2575.html">
            
                    
                        <b>1.3.2.1.4.1.</b>
                    
                    ___lldb_unnamed_symbol2575$$akd
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../../frida_re_example/frida/android/">
            
                <a href="../../frida_re_example/frida/android/">
            
                    
                        <b>1.3.2.2.</b>
                    
                    Android
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.2.1" data-path="../../frida_re_example/frida/android/hook_demo.html">
            
                <a href="../../frida_re_example/frida/android/hook_demo.html">
            
                    
                        <b>1.3.2.2.1.</b>
                    
                    demo示例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2.2" data-path="../../frida_re_example/frida/android/hookforcestop.html">
            
                <a href="../../frida_re_example/frida/android/hookforcestop.html">
            
                    
                        <b>1.3.2.2.2.</b>
                    
                    hookForceStop
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../frida_re_example/frida_trace/">
            
                <a href="../../frida_re_example/frida_trace/">
            
                    
                        <b>1.3.3.</b>
                    
                    frida-trace
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../../frida_re_example/frida_trace/ios_objc/">
            
                <a href="../../frida_re_example/frida_trace/ios_objc/">
            
                    
                        <b>1.3.3.1.</b>
                    
                    iOS的ObjC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1.1" data-path="../../frida_re_example/frida_trace/ios_objc/akd_apple_login.html">
            
                <a href="../../frida_re_example/frida_trace/ios_objc/akd_apple_login.html">
            
                    
                        <b>1.3.3.1.1.</b>
                    
                    akd中Apple账号验证过程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.1.2" data-path="../../frida_re_example/frida_trace/ios_objc/preferences_full_apple_login.html">
            
                <a href="../../frida_re_example/frida_trace/ios_objc/preferences_full_apple_login.html">
            
                    
                        <b>1.3.3.1.2.</b>
                    
                    Preferences中Apple账号登录全过程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../../frida_re_example/frida_trace/android/">
            
                <a href="../../frida_re_example/frida_trace/android/">
            
                    
                        <b>1.3.3.2.</b>
                    
                    Android
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.2.1" data-path="../../frida_re_example/frida_trace/android/commands.html">
            
                <a href="../../frida_re_example/frida_trace/android/commands.html">
            
                    
                        <b>1.3.3.2.1.</b>
                    
                    commands
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.2" data-path="../../frida_re_example/frida_trace/android/system_server.html">
            
                <a href="../../frida_re_example/frida_trace/android/system_server.html">
            
                    
                        <b>1.3.3.2.2.</b>
                    
                    安卓进程system_server
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.4.</b>
                    
                    Frida工具函数
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../common_js/">
            
                <a href="../common_js/">
            
                    
                        <b>1.4.1.</b>
                    
                    通用js函数
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../common_js/frida_common.html">
            
                <a href="../common_js/frida_common.html">
            
                    
                        <b>1.4.1.1.</b>
                    
                    Frida的js通用函数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../ios/">
            
                <a href="../ios/">
            
                    
                        <b>1.4.2.</b>
                    
                    iOS函数
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../ios/callstack.html">
            
                <a href="../ios/callstack.html">
            
                    
                        <b>1.4.2.1.</b>
                    
                    iOS函数调用堆栈
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="./">
            
                <a href="./">
            
                    
                        <b>1.4.3.</b>
                    
                    Android函数
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.4.3.1" data-path="java_common.html">
            
                <a href="java_common.html">
            
                    
                        <b>1.4.3.1.</b>
                    
                    Java通用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="android_class.html">
            
                <a href="android_class.html">
            
                    
                        <b>1.4.3.2.</b>
                    
                    Android类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.3" data-path="c/">
            
                <a href="c/">
            
                    
                        <b>1.4.3.3.</b>
                    
                    C
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.3.1" data-path="c/native.html">
            
                <a href="c/native.html">
            
                    
                        <b>1.4.3.3.1.</b>
                    
                    native C
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../appendix/">
            
                <a href="../../appendix/">
            
                    
                        <b>1.5.</b>
                    
                    附录
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../appendix/reference.html">
            
                <a href="../../appendix/reference.html">
            
                    
                        <b>1.5.1.</b>
                    
                    参考资料
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            本书使用 HonKit 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Java通用</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <html><head></head><body><h1 id="java通用"><a name="java通用" class="plugin-anchor" href="#java通用"><i class="fa fa-link" aria-hidden="true"></i></a>Java通用</h1>
<h2 id="describejavaclass"><a name="describejavaclass" class="plugin-anchor" href="#describejavaclass"><i class="fa fa-link" aria-hidden="true"></i></a>describeJavaClass</h2>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">describeJavaClass</span><span class="token punctuation">(</span><span class="token parameter">className</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> jClass <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">_name</span><span class="token operator">:</span> className<span class="token punctuation">,</span>
    <span class="token literal-property property">_methods</span><span class="token operator">:</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>jClass<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">m</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// _methods: Object.getOwnPropertyDescriptor(jClass.__proto__).filter(m =&gt; {</span>
    <span class="token comment">// _methods: Object.getOwnPropertySymbols(jClass.__proto__).filter(m =&gt; {</span>
      <span class="token keyword">return</span> <span class="token operator">!</span>m<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&apos;$&apos;</span><span class="token punctuation">)</span> <span class="token comment">// filter out Frida related special properties</span>
         <span class="token operator">||</span> m <span class="token operator">==</span> <span class="token string">&apos;class&apos;</span> <span class="token operator">||</span> m <span class="token operator">==</span> <span class="token string">&apos;constructor&apos;</span> <span class="token comment">// optional</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">_fields</span><span class="token operator">:</span> jClass<span class="token punctuation">.</span>class<span class="token punctuation">.</span><span class="token function">getFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">f</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> f<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>  
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="enummethods"><a name="enummethods" class="plugin-anchor" href="#enummethods"><i class="fa fa-link" aria-hidden="true"></i></a>enumMethods</h2>
<pre class="language-"><code class="lang-js"><span class="token comment">// enumerate all methods declared in a Java class</span>
<span class="token keyword">function</span> <span class="token function">enumMethods</span><span class="token punctuation">(</span><span class="token parameter">targetClass</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">var</span> hook <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>targetClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> ownMethods <span class="token operator">=</span> hook<span class="token punctuation">.</span>class<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;use getDeclaredMethods&quot;</span><span class="token punctuation">)</span>

  <span class="token comment">// var ownMethods = hook.class.getMethods();</span>
  <span class="token comment">// console.log(&quot;use getMethods&quot;)</span>

  hook<span class="token punctuation">.</span>$dispose<span class="token punctuation">;</span>
  <span class="token keyword">return</span> ownMethods<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>调用：</p>
<pre class="language-"><code class="lang-js">  <span class="token comment">// enumerate all methods in a class</span>
  <span class="token keyword">var</span> allMethods <span class="token operator">=</span> <span class="token function">enumMethods</span><span class="token punctuation">(</span>javaClassName<span class="token punctuation">)</span>
  allMethods<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">singleMethod</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>singleMethod<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="enumproperties"><a name="enumproperties" class="plugin-anchor" href="#enumproperties"><i class="fa fa-link" aria-hidden="true"></i></a>enumProperties</h2>
<pre class="language-"><code class="lang-js"><span class="token comment">// enumerate all property=field declared in a Java class</span>
<span class="token keyword">function</span> <span class="token function">enumProperties</span><span class="token punctuation">(</span><span class="token parameter">targetClass</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">var</span> hook <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>targetClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// var ownMethods = hook.class.getFields();</span>
  <span class="token comment">// console.log(&quot;use getFields&quot;)</span>

  <span class="token keyword">var</span> ownFields <span class="token operator">=</span> hook<span class="token punctuation">.</span>class<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;use getDeclaredFields&quot;</span><span class="token punctuation">)</span>

  hook<span class="token punctuation">.</span>$dispose<span class="token punctuation">;</span>
  <span class="token keyword">return</span> ownFields<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>调用：</p>
<pre class="language-"><code class="lang-js">  <span class="token keyword">var</span> allProperties <span class="token operator">=</span> <span class="token function">enumProperties</span><span class="token punctuation">(</span>javaClassName<span class="token punctuation">)</span>
  allProperties<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">singleProperty</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>singleProperty<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="printclassallmethodsfields"><a name="printclassallmethodsfields" class="plugin-anchor" href="#printclassallmethodsfields"><i class="fa fa-link" aria-hidden="true"></i></a>printClassAllMethodsFields</h2>
<pre class="language-"><code class="lang-js"><span class="token comment">// print single java class all Functions=Methods and Fields=Properties</span>
<span class="token keyword">function</span> <span class="token function">printClassAllMethodsFields</span><span class="token punctuation">(</span><span class="token parameter">javaClassName</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;==========&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;Class: &quot;</span> <span class="token operator">+</span> javaClassName <span class="token operator">+</span> <span class="token string">&quot; ==========&quot;</span><span class="token punctuation">)</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;-----&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;All Properties&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;-----&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> allProperties <span class="token operator">=</span> <span class="token function">enumProperties</span><span class="token punctuation">(</span>javaClassName<span class="token punctuation">)</span>
  allProperties<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">singleProperty</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>singleProperty<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;-----&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;All Methods&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;-----&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">// enumerate all methods in a class</span>
  <span class="token keyword">var</span> allMethods <span class="token operator">=</span> <span class="token function">enumMethods</span><span class="token punctuation">(</span>javaClassName<span class="token punctuation">)</span>
  allMethods<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">singleMethod</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>singleMethod<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="举例"><a name="举例" class="plugin-anchor" href="#举例"><i class="fa fa-link" aria-hidden="true"></i></a>举例</h3>
<p>调用1：</p>
<pre class="language-"><code class="lang-js">    <span class="token keyword">var</span> ContextImplClassName <span class="token operator">=</span> <span class="token string">&quot;android.app.ContextImpl&quot;</span>
    <span class="token function">printClassAllMethodsFields</span><span class="token punctuation">(</span>ContextImplClassName<span class="token punctuation">)</span>
</code></pre>
<p>调用2：</p>
<pre class="language-"><code class="lang-js">  <span class="token comment">// var C660660PrrClassName = &quot;X.C660660Prr&quot;</span>
  <span class="token keyword">var</span> C660660PrrClassName <span class="token operator">=</span> <span class="token string">&quot;X.0Prr&quot;</span>
  <span class="token function">printClassAllMethodsFields</span><span class="token punctuation">(</span>C660660PrrClassName<span class="token punctuation">)</span>
</code></pre>
<p>输出：</p>
<pre class="language-"><code class="lang-bash"><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>Class: X.0Prr <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
-----All Properties-----
use getDeclaredFields
public static java.lang.String X.0Prr.LIZ
public static com.ss.android.common.AppContext X.0Prr.LIZIZ
public static java.lang.String X.0Prr.LIZJ
public static java.lang.String X.0Prr.LIZLLL
public static int X.0Prr.LJ
public static int X.0Prr.LJFF
public static java.lang.String X.0Prr.LJI
public static java.lang.String X.0Prr.LJII
public static java.util.concurrent.ConcurrentHashMap X.0Prr.LJIIIIZZ
public static boolean X.0Prr.LJIIIZ
public static volatile org.json.JSONObject X.0Prr.LJIIJ
public static java.lang.String X.0Prr.LJIIJJI
public static java.lang.String X.0Prr.LJIIL
public static java.lang.String X.0Prr.LJIILIIL
public static java.lang.String X.0Prr.LJIILJJIL
public static final java.lang.Object X.0Prr.LJIILL
public static X.0Pro X.0Prr.LJIILLIIL
public static X.0PsA X.0Prr.LJIIZILJ
public static boolean X.0Prr.LJIJ
public static java.lang.String X.0Prr.LJIJI
public static volatile com.ss.android.deviceregister.DeviceCategory X.0Prr.LJIJJ
public static java.lang.String X.0Prr.LJIJJLI
public static volatile boolean X.0Prr.LJIL
public static java.util.concurrent.ConcurrentHashMap X.0Prr.LJJ
-----All Methods-----
use getDeclaredMethods
public static android.content.pm.PackageInfo X.0Prr.LIZ<span class="token punctuation">(</span>android.content.pm.PackageManager,java.lang.String,int<span class="token punctuation">)</span>
public static java.lang.String X.0Prr.LIZ<span class="token punctuation">(</span><span class="token punctuation">)</span>
public static java.lang.String X.0Prr.LIZ<span class="token punctuation">(</span>android.content.Context<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>int<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>X.0Pro<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>X.0PsA<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>android.content.Context,java.lang.String<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>com.ss.android.common.AppContext<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>com.ss.android.deviceregister.DeviceCategory<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>java.lang.String<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>java.lang.String,java.lang.Object<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>java.lang.String,java.lang.String<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>java.lang.Throwable<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>org.json.JSONObject<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>org.json.JSONObject,org.json.JSONObject<span class="token punctuation">)</span>
public static void X.0Prr.LIZ<span class="token punctuation">(</span>boolean<span class="token punctuation">)</span>
public static boolean X.0Prr.LIZ<span class="token punctuation">(</span>android.content.Context,org.json.JSONObject,boolean<span class="token punctuation">)</span>
public static android.content.pm.ApplicationInfo X.0Prr.LIZIZ<span class="token punctuation">(</span>android.content.pm.PackageManager,java.lang.String,int<span class="token punctuation">)</span>
public static java.lang.String X.0Prr.LIZIZ<span class="token punctuation">(</span><span class="token punctuation">)</span>
public static java.lang.String X.0Prr.LIZIZ<span class="token punctuation">(</span>android.content.Context<span class="token punctuation">)</span>
public static void X.0Prr.LIZIZ<span class="token punctuation">(</span>android.content.Context,java.lang.String<span class="token punctuation">)</span>
public static void X.0Prr.LIZIZ<span class="token punctuation">(</span>java.lang.String<span class="token punctuation">)</span>
public static java.lang.String X.0Prr.LIZJ<span class="token punctuation">(</span><span class="token punctuation">)</span>
public static java.lang.String X.0Prr.LIZJ<span class="token punctuation">(</span>android.content.Context<span class="token punctuation">)</span>
public static void X.0Prr.LIZJ<span class="token punctuation">(</span>java.lang.String<span class="token punctuation">)</span>
public static int X.0Prr.LIZLLL<span class="token punctuation">(</span><span class="token punctuation">)</span>
public static void X.0Prr.LIZLLL<span class="token punctuation">(</span>java.lang.String<span class="token punctuation">)</span>
public static int X.0Prr.LJ<span class="token punctuation">(</span><span class="token punctuation">)</span>
public static void X.0Prr.LJ<span class="token punctuation">(</span>java.lang.String<span class="token punctuation">)</span>
public static java.lang.String X.0Prr.LJFF<span class="token punctuation">(</span><span class="token punctuation">)</span>
public static void X.0Prr.LJFF<span class="token punctuation">(</span>java.lang.String<span class="token punctuation">)</span>
public static java.lang.String X.0Prr.LJI<span class="token punctuation">(</span><span class="token punctuation">)</span>
public static boolean X.0Prr.LJII<span class="token punctuation">(</span><span class="token punctuation">)</span>
public static void X.0Prr.LJIIIIZZ<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="getstackstr"><a name="getstackstr" class="plugin-anchor" href="#getstackstr"><i class="fa fa-link" aria-hidden="true"></i></a>getStackStr</h2>
<pre class="language-"><code class="lang-js"><span class="token comment">// get current stack trace string</span>
<span class="token keyword">function</span> <span class="token function">getStackStr</span><span class="token punctuation">(</span><span class="token parameter">ThrowableCls</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> newThrowable <span class="token operator">=</span> ThrowableCls<span class="token punctuation">.</span>$<span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// console.log(&quot;getStackStr: newThrowable=&quot; + newThrowable)</span>
  <span class="token keyword">var</span> stackElements <span class="token operator">=</span> newThrowable<span class="token punctuation">.</span><span class="token function">getStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// console.log(&quot;getStackStr: stackElements=&quot; + stackElements)</span>
  <span class="token keyword">var</span> stackStr <span class="token operator">=</span> <span class="token string">&quot;Stack: &quot;</span> <span class="token operator">+</span> stackElements<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">//method//stackElements[0].getMethodName()</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> stackElements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stackStr <span class="token operator">+=</span> <span class="token string">&quot;\n    at &quot;</span> <span class="token operator">+</span> stackElements<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// stackStr = &quot;\n\n&quot; + stackStr</span>
  stackStr <span class="token operator">=</span> stackStr <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span>
  <span class="token comment">// console.log(&quot;getStackStr: stackStr=&quot; + stackStr)</span>

  <span class="token keyword">return</span> stackStr
<span class="token punctuation">}</span>
</code></pre>
<p>调用：</p>
<pre class="language-"><code class="lang-js">  <span class="token keyword">var</span> stackStr <span class="token operator">=</span> <span class="token function">getStackStr</span><span class="token punctuation">(</span>ThrowableCls<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stackStr<span class="token punctuation">)</span>
</code></pre>
<h2 id="printstack"><a name="printstack" class="plugin-anchor" href="#printstack"><i class="fa fa-link" aria-hidden="true"></i></a>PrintStack</h2>
<pre class="language-"><code class="lang-js"><span class="token comment">// 打印当前调用堆栈信息 print call stack</span>
<span class="token keyword">function</span> <span class="token function">PrintStack</span><span class="token punctuation">(</span><span class="token parameter">ThrowableCls</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> stackStr <span class="token operator">=</span> <span class="token function">getStackStr</span><span class="token punctuation">(</span>ThrowableCls<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stackStr<span class="token punctuation">)</span>

  <span class="token comment">// let newThrowable = ThrowableCls.$new()</span>
  <span class="token comment">// let curLog = Java.use(&quot;android.util.Log&quot;)</span>
  <span class="token comment">// let stackStr = curLog.getStackTraceString(newThrowable)</span>
  <span class="token comment">// console.log(&quot;stackStr=&quot; + stackStr)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>调用：</p>
<pre class="language-"><code class="lang-js">    <span class="token keyword">var</span> ThrowableCls <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.Throwable&quot;</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ThrowableCls=&quot;</span> <span class="token operator">+</span> ThrowableCls<span class="token punctuation">)</span>

    <span class="token function">PrintStack</span><span class="token punctuation">(</span>ThrowableCls<span class="token punctuation">)</span>
</code></pre>
<h2 id="getfunctioncallstr"><a name="getfunctioncallstr" class="plugin-anchor" href="#getfunctioncallstr"><i class="fa fa-link" aria-hidden="true"></i></a>getFunctionCallStr</h2>
<pre class="language-"><code class="lang-js"><span class="token comment">// get Function call string</span>
<span class="token keyword">function</span> <span class="token function">getFunctionCallStr</span><span class="token punctuation">(</span><span class="token parameter">funcName<span class="token punctuation">,</span> funcParaDict</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// var isAMSStartSevice = funcName === &quot;AMS.startService&quot;</span>
  <span class="token comment">// if(isAMSStartSevice){</span>
  <span class="token comment">//   console.log(&quot;getFunctionCallStr: funcName=&quot; + funcName + &quot;, funcParaDict=&quot; + toJsonStr(funcParaDict))</span>
  <span class="token comment">// }</span>

  <span class="token keyword">var</span> logStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>funcName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token template-punctuation string">`</span></span>
  <span class="token comment">// var logStr = funcName + &quot;:&quot;</span>
  <span class="token keyword">var</span> isFirst <span class="token operator">=</span> <span class="token boolean">true</span>

  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> curParaName <span class="token keyword">in</span> funcParaDict<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> curParaValue <span class="token operator">=</span> funcParaDict<span class="token punctuation">[</span>curParaName<span class="token punctuation">]</span>
    <span class="token keyword">var</span> prevStr <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isFirst<span class="token punctuation">)</span><span class="token punctuation">{</span>
      prevStr <span class="token operator">=</span> <span class="token string">&quot; &quot;</span>
      isFirst <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      prevStr <span class="token operator">=</span> <span class="token string">&quot;, &quot;</span>
    <span class="token punctuation">}</span>

    logStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>logStr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prevStr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>curParaName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span> curParaValue
    <span class="token comment">// logStr = logStr + prevStr + curParaName + &quot;=&quot; + curParaValue</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// if(isAMSStartSevice){</span>
  <span class="token comment">//   console.log(&quot;getFunctionCallStr: logStr=&quot; + logStr)</span>
  <span class="token comment">// }</span>

  <span class="token keyword">return</span> logStr
<span class="token punctuation">}</span>
</code></pre>
<p>调用：</p>
<pre class="language-"><code class="lang-js">  <span class="token keyword">var</span> functionCallStr <span class="token operator">=</span> <span class="token function">getFunctionCallStr</span><span class="token punctuation">(</span>funcName<span class="token punctuation">,</span> funcParaDict<span class="token punctuation">)</span>
</code></pre>
<h2 id="printfunctioncallandstack"><a name="printfunctioncallandstack" class="plugin-anchor" href="#printfunctioncallandstack"><i class="fa fa-link" aria-hidden="true"></i></a>printFunctionCallAndStack</h2>
<pre class="language-"><code class="lang-js"><span class="token comment">// print Function call and stack trace string</span>
<span class="token keyword">function</span> <span class="token function">printFunctionCallAndStack</span><span class="token punctuation">(</span><span class="token parameter">funcName<span class="token punctuation">,</span> funcParaDict<span class="token punctuation">,</span> ThrowableCls</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// var isAMSStartSevice = funcName === &quot;AMS.startService&quot;</span>
  <span class="token comment">// if (isAMSStartSevice){</span>
  <span class="token comment">//   console.log(&quot;printFunctionCallAndStack: funcName=&quot; + funcName + &quot;, funcParaDict=&quot; + toJsonStr(funcParaDict) + &quot;, ThrowableCls=&quot; + ThrowableCls)</span>
  <span class="token comment">// }</span>

  <span class="token keyword">var</span> functionCallStr <span class="token operator">=</span> <span class="token function">getFunctionCallStr</span><span class="token punctuation">(</span>funcName<span class="token punctuation">,</span> funcParaDict<span class="token punctuation">)</span>

  <span class="token comment">// if (isAMSStartSevice){</span>
  <span class="token comment">//   console.log(&quot;printFunctionCallAndStack: functionCallStr=&quot; + functionCallStr)</span>
  <span class="token comment">// }</span>

  <span class="token keyword">var</span> stackStr <span class="token operator">=</span> <span class="token function">getStackStr</span><span class="token punctuation">(</span>ThrowableCls<span class="token punctuation">)</span>

  <span class="token comment">// if(isAMSStartSevice){</span>
  <span class="token comment">//   console.log(&quot;printFunctionCallAndStack: stackStr=&quot; + stackStr)</span>
  <span class="token comment">// }</span>

  <span class="token keyword">var</span> functionCallAndStackStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>functionCallStr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>stackStr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token comment">// var functionCallAndStackStr = functionCallStr + &quot;\n&quot; + stackStr</span>

  <span class="token comment">// if(isAMSStartSevice){</span>
  <span class="token comment">//   console.log(&quot;printFunctionCallAndStack: functionCallAndStackStr=&quot; + functionCallAndStackStr)</span>
  <span class="token comment">// }</span>

  <span class="token comment">// return functionCallAndStackStr</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>functionCallAndStackStr<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>调用：</p>
<pre class="language-"><code class="lang-js">    <span class="token comment">// ---------------------------------------- android.app.ContextImpl</span>
    <span class="token keyword">var</span> ContextImplClassName <span class="token operator">=</span> <span class="token string">&quot;android.app.ContextImpl&quot;</span>
    <span class="token keyword">var</span> ContextImplCls <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ContextImplClassName<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ContextImplCls=&quot;</span> <span class="token operator">+</span> ContextImplCls<span class="token punctuation">)</span>
    <span class="token comment">// printClassAllMethodsFields(ContextImplClassName)</span>

    <span class="token comment">// public boolean bindServiceAsUser(Intent service, ServiceConnection conn, int flags, UserHandle user)</span>
    <span class="token keyword">var</span> bindServiceAsUserFunc4 <span class="token operator">=</span> ContextImplCls<span class="token punctuation">.</span>bindServiceAsUser<span class="token punctuation">.</span><span class="token function">overload</span><span class="token punctuation">(</span><span class="token string">&apos;android.content.Intent&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;android.content.ServiceConnection&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;int&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;android.os.UserHandle&apos;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bindServiceAsUserFunc4<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      bindServiceAsUserFunc4<span class="token punctuation">.</span><span class="token function-variable function">implementation</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">service<span class="token punctuation">,</span> conn<span class="token punctuation">,</span> flags<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(&quot;ContextImpl.bindServiceAsUser 4: service=&quot; + service + &quot;, conn=&quot; + conn + &quot;, flags=&quot; + flags + &quot;, user=&quot; + user)</span>
        <span class="token comment">// PrintStack(ThrowableCls)</span>
        <span class="token keyword">var</span> funcName <span class="token operator">=</span> <span class="token string">&quot;ContextImpl.bindServiceAsUser 4&quot;</span>
        <span class="token keyword">var</span> funcParaDict <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;service&quot;</span><span class="token operator">:</span> service<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;conn&quot;</span><span class="token operator">:</span> conn<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;flags&quot;</span><span class="token operator">:</span> flags<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;user&quot;</span><span class="token operator">:</span> user<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        <span class="token function">printFunctionCallAndStack</span><span class="token punctuation">(</span>funcName<span class="token punctuation">,</span> funcParaDict<span class="token punctuation">,</span> ThrowableCls<span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bindServiceAsUser</span><span class="token punctuation">(</span>service<span class="token punctuation">,</span> conn<span class="token punctuation">,</span> flags<span class="token punctuation">,</span> user<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre>
<h2 id="findclass"><a name="findclass" class="plugin-anchor" href="#findclass"><i class="fa fa-link" aria-hidden="true"></i></a>findClass</h2>
<pre class="language-"><code class="lang-js"><span class="token comment">// find loaded classes that match a pattern (async)</span>
<span class="token comment">// for 抖音：会崩溃 Process terminated</span>
<span class="token keyword">function</span> <span class="token function">findClass</span><span class="token punctuation">(</span><span class="token parameter">pattern</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Finding all classes that match pattern: &quot;</span> <span class="token operator">+</span> pattern <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


  Java<span class="token punctuation">.</span><span class="token function">enumerateLoadedClasses</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">onMatch</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">aClass</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>aClass<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>aClass<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">onComplete</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="printallclasses"><a name="printallclasses" class="plugin-anchor" href="#printallclasses"><i class="fa fa-link" aria-hidden="true"></i></a>printAllClasses</h2>
<pre class="language-"><code class="lang-js"><span class="token comment">// emulate print all Java Classes</span>
<span class="token comment">// for 抖音：会崩溃 Process terminated</span>
<span class="token keyword">function</span> <span class="token function">printAllClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// findClass(&quot;*&quot;)</span>
  Java<span class="token punctuation">.</span><span class="token function">enumerateLoadedClasses</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">onMatch</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">className</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">onComplete</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<footer class="page-footer"><span class="copyright">crifan.org，使用<a href="https://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank">署名4.0国际(CC BY 4.0)协议</a>发布 all right reserved，powered by Gitbook</span><span class="footer-modification">最后更新：
2024-07-21 16:28:48
</span></footer></body></html>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Android函数">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="android_class.html" class="navigation navigation-next " aria-label="Next page: Android类">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Java通用","level":"1.4.3.1","depth":3,"next":{"title":"Android类","level":"1.4.3.2","depth":3,"path":"frida_tool_func/android/android_class.md","ref":"frida_tool_func/android/android_class.md","articles":[]},"previous":{"title":"Android函数","level":"1.4.3","depth":2,"path":"frida_tool_func/android/README.md","ref":"frida_tool_func/android/README.md","articles":[{"title":"Java通用","level":"1.4.3.1","depth":3,"path":"frida_tool_func/android/java_common.md","ref":"frida_tool_func/android/java_common.md","articles":[]},{"title":"Android类","level":"1.4.3.2","depth":3,"path":"frida_tool_func/android/android_class.md","ref":"frida_tool_func/android/android_class.md","articles":[]},{"title":"C","level":"1.4.3.3","depth":3,"path":"frida_tool_func/android/c/README.md","ref":"frida_tool_func/android/c/README.md","articles":[{"title":"native C","level":"1.4.3.3.1","depth":4,"path":"frida_tool_func/android/c/native.md","ref":"frida_tool_func/android/c/native.md","articles":[]}]}]},"dir":"ltr"},"config":{"plugins":["theme-comscore","anchors","expandable-menu","-lunr","-search","search-plus","disqus","-highlight","prism","prism-themes","github-buttons","-splitter","splitter-nosessionbutcookie","-sharing","sharing-plus","tbfed-pagefooter","donate","sitemap-general","copy-code-button","callouts","toolbar-button"],"root":"./src","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"crifan.org，使用<a href='https://creativecommons.org/licenses/by/4.0/deed.zh'>署名4.0国际(CC BY 4.0)协议</a>发布","modify_label":"最后更新：","modify_format":"YYYY-MM-DD HH:mm:ss"},"prism":{"css":["prism-themes/themes/prism-atom-dark.css"]},"disqus":{"useIdentifier":false,"shortName":"crifan"},"callouts":{"showTypeInHeader":false},"toolbar-button":{"label":"下载PDF","url":"https://book.crifan.org/books/frida_re_example_function/pdf/frida_re_example_function.pdf","icon":"fa-file-pdf-o"},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"donate":{"title":"","button":"打赏","wechat":"https://www.crifan.org/files/res/crifan_com/crifan_wechat_pay.jpg","alipay":"https://www.crifan.org/files/res/crifan_com/crifan_alipay_pay.jpg","wechatText":"微信打赏给Crifan","alipayText":"支付宝打赏给Crifan"},"sitemap-general":{"prefix":"https://book.crifan.org/books/frida_re_example_function/website/"},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-comscore":{},"splitter-nosessionbutcookie":{},"prism-themes":{},"github-buttons":{"buttons":[{"repo":"frida_re_example_function","user":"crifan","type":"star","count":true,"size":"small"},{"user":"crifan","type":"follow","width":"120","count":false,"size":"small"}]},"expandable-menu":{},"copy-code-button":{},"sharing":{"qq":true,"all":["douban","facebook","google","instapaper","line","linkedin","messenger","pocket","qq","qzone","stumbleupon","twitter","viber","vk","weibo","whatsapp"],"douban":false,"facebook":true,"weibo":true,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":false,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchors":{},"search-plus":{}},"theme":"default","author":"Crifan Li <admin@crifan.com>","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Frida逆向实例和工具函数","language":"zh-hans","links":{"sidebar":{"主页":"http://www.crifan.org"}},"gitbook":"*","description":"整理Frida逆向期间涉及到的各种实际案例，以及整理出的各种工具类函数。其中Frida的实际使用案例，包括网上别人的实例案例，包括官网的Cdeshare，以及frida和frida-trace。frida中包括iOS的ObjC的各种例子。包括Object对象的methods和ownMethods，以及用Interceptor去hook函数的，单个类的单个函数、单个类的所有函数、所有类的所有函数等。以及ApiResolver的案例以及Stalker的案例，尤其是___lldb_unnamed_symbol2575$$akd的完整代码；接着是frida-trace的实际例子，包括ObjC的akd中Apple账号验证过程、Preferences中Apple账号登录全过程的详细内容。"},"file":{"path":"frida_tool_func/android/java_common.md","mtime":"2024-07-21T08:28:48.989Z","type":"markdown"},"gitbook":{"version":"4.0.7","time":"2024-07-25T09:03:30.734Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-menu/expandable-chapters.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter-nosessionbutcookie/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-toolbar-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

