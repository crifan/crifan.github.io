
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <title>Load Commands · 可执行文件格式：Mach-O</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.7">
        <meta name="author" content="Crifan Li <admin@crifan.com>">
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-expandable-menu/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-prism/prism-atom-dark.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-splitter-nosessionbutcookie/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-callouts/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="lc_uuid.html" />
    
    
    <link rel="prev" href="../header/flags.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"repo":"exec_file_format_macho","user":"crifan","type":"star","count":true,"size":"small"},{"user":"crifan","type":"follow","width":"120","count":false,"size":"small"}]};
    </script>

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="http://www.crifan.org" target="_blank" class="custom-link">主页</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                        <b>1.1.</b>
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../../macho_overview/">
            
                <a href="../../../macho_overview/">
            
                    
                        <b>1.2.</b>
                    
                    Mach-O概览
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../../macho_overview/background/">
            
                <a href="../../../macho_overview/background/">
            
                    
                        <b>1.2.1.</b>
                    
                    背景知识
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../../../macho_overview/background/xnu.html">
            
                <a href="../../../macho_overview/background/xnu.html">
            
                    
                        <b>1.2.1.1.</b>
                    
                    XNU
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../../../macho_overview/background/compile_link_load.html">
            
                <a href="../../../macho_overview/background/compile_link_load.html">
            
                    
                        <b>1.2.1.2.</b>
                    
                    编译链接加载过程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../../../macho_overview/background/pic.html">
            
                <a href="../../../macho_overview/background/pic.html">
            
                    
                        <b>1.2.1.3.</b>
                    
                    PIC
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../">
            
                <a href="../../">
            
                    
                        <b>1.3.</b>
                    
                    Mach-O格式
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../summary/">
            
                <a href="../../summary/">
            
                    
                        <b>1.3.1.</b>
                    
                    Mach-O结构概述
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../summary/macho_layout.html">
            
                <a href="../../summary/macho_layout.html">
            
                    
                        <b>1.3.1.1.</b>
                    
                    Mach-O结构图
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.3.2.</b>
                    
                    Mach-O结构详情
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../header/">
            
                <a href="../header/">
            
                    
                        <b>1.3.2.1.</b>
                    
                    Header
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1.1" data-path="../header/magic.html">
            
                <a href="../header/magic.html">
            
                    
                        <b>1.3.2.1.1.</b>
                    
                    magic
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.1.2" data-path="../header/cputype_cpusubtype.html">
            
                <a href="../header/cputype_cpusubtype.html">
            
                    
                        <b>1.3.2.1.2.</b>
                    
                    cputype和cpusubtype
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.1.3" data-path="../header/filetype.html">
            
                <a href="../header/filetype.html">
            
                    
                        <b>1.3.2.1.3.</b>
                    
                    filetype
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.1.4" data-path="../header/flags.html">
            
                <a href="../header/flags.html">
            
                    
                        <b>1.3.2.1.4.</b>
                    
                    flags
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.3.2.2" data-path="./">
            
                <a href="./">
            
                    
                        <b>1.3.2.2.</b>
                    
                    Load Commands
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.2.1" data-path="lc_uuid.html">
            
                <a href="lc_uuid.html">
            
                    
                        <b>1.3.2.2.1.</b>
                    
                    LC_UUID
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2.2" data-path="lc_segment.html">
            
                <a href="lc_segment.html">
            
                    
                        <b>1.3.2.2.2.</b>
                    
                    LC_SEGMENT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2.3" data-path="lc_segment_64.html">
            
                <a href="lc_segment_64.html">
            
                    
                        <b>1.3.2.2.3.</b>
                    
                    LC_SEGMENT_64
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2.4" data-path="lc_symtab.html">
            
                <a href="lc_symtab.html">
            
                    
                        <b>1.3.2.2.4.</b>
                    
                    LC_SYMTAB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2.5" data-path="lc_dyld_chained_fixups.html">
            
                <a href="lc_dyld_chained_fixups.html">
            
                    
                        <b>1.3.2.2.5.</b>
                    
                    LC_DYLD_CHAINED_FIXUPS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2.6" data-path="lc_dyld_exports_trie.html">
            
                <a href="lc_dyld_exports_trie.html">
            
                    
                        <b>1.3.2.2.6.</b>
                    
                    LC_DYLD_EXPORTS_TRIE
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../segment/">
            
                <a href="../segment/">
            
                    
                        <b>1.3.2.3.</b>
                    
                    Segment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.3.1" data-path="../segment/__text/">
            
                <a href="../segment/__text/">
            
                    
                        <b>1.3.2.3.1.</b>
                    
                    __TEXT
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.3.1.1" data-path="../segment/__text/__text.html">
            
                <a href="../segment/__text/__text.html">
            
                    
                        <b>1.3.2.3.1.1.</b>
                    
                    __text
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.3.2" data-path="../segment/__data/">
            
                <a href="../segment/__data/">
            
                    
                        <b>1.3.2.3.2.</b>
                    
                    __DATA
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.3.2.1" data-path="../segment/__data/__la_symbol_ptr.html">
            
                <a href="../segment/__data/__la_symbol_ptr.html">
            
                    
                        <b>1.3.2.3.2.1.</b>
                    
                    __la_symbol_ptr
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3.2.2" data-path="../segment/__data/__got.html">
            
                <a href="../segment/__data/__got.html">
            
                    
                        <b>1.3.2.3.2.2.</b>
                    
                    __got
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.3.3" data-path="../segment/__import.html">
            
                <a href="../segment/__import.html">
            
                    
                        <b>1.3.2.3.3.</b>
                    
                    __IMPORT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3.4" data-path="../segment/__linkedit.html">
            
                <a href="../segment/__linkedit.html">
            
                    
                        <b>1.3.2.3.4.</b>
                    
                    __LINKEDIT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3.5" data-path="../segment/__objc.html">
            
                <a href="../segment/__objc.html">
            
                    
                        <b>1.3.2.3.5.</b>
                    
                    __OBJC
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="../section/">
            
                <a href="../section/">
            
                    
                        <b>1.3.2.4.</b>
                    
                    Section
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.4.1" data-path="../section/symbol.html">
            
                <a href="../section/symbol.html">
            
                    
                        <b>1.3.2.4.1.</b>
                    
                    symbol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4.2" data-path="../section/string.html">
            
                <a href="../section/string.html">
            
                    
                        <b>1.3.2.4.2.</b>
                    
                    string
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../fat/">
            
                <a href="../../fat/">
            
                    
                        <b>1.3.3.</b>
                    
                    FAT
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../../fat/examples.html">
            
                <a href="../../fat/examples.html">
            
                    
                        <b>1.3.3.1.</b>
                    
                    举例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../../fat/issues.html">
            
                <a href="../../fat/issues.html">
            
                    
                        <b>1.3.3.2.</b>
                    
                    常见问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../../fat/tools/">
            
                <a href="../../fat/tools/">
            
                    
                        <b>1.3.3.3.</b>
                    
                    工具
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.3.1" data-path="../../fat/tools/lipo.html">
            
                <a href="../../fat/tools/lipo.html">
            
                    
                        <b>1.3.3.3.1.</b>
                    
                    lipo
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../../codesign/">
            
                <a href="../../codesign/">
            
                    
                        <b>1.3.4.</b>
                    
                    codesign
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../../vm_addr/">
            
                <a href="../../vm_addr/">
            
                    
                        <b>1.3.5.</b>
                    
                    虚拟地址
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../../size_limit/">
            
                <a href="../../size_limit/">
            
                    
                        <b>1.3.6.</b>
                    
                    大小限制
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../../macho_tool/">
            
                <a href="../../../macho_tool/">
            
                    
                        <b>1.4.</b>
                    
                    Mach-O工具
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../../macho_tool/machoview/">
            
                <a href="../../../macho_tool/machoview/">
            
                    
                        <b>1.4.1.</b>
                    
                    MachOView
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../../../macho_tool/machoview/examples/">
            
                <a href="../../../macho_tool/machoview/examples/">
            
                    
                        <b>1.4.1.1.</b>
                    
                    举例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1.1" data-path="../../../macho_tool/machoview/examples/main_arm64.html">
            
                <a href="../../../macho_tool/machoview/examples/main_arm64.html">
            
                    
                        <b>1.4.1.1.1.</b>
                    
                    main_arm64
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.1.2" data-path="../../../macho_tool/machoview/examples/awemecore.html">
            
                <a href="../../../macho_tool/machoview/examples/awemecore.html">
            
                    
                        <b>1.4.1.1.2.</b>
                    
                    AwemeCore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.1.3" data-path="../../../macho_tool/machoview/examples/zzzzheibaoLib_dylib.html">
            
                <a href="../../../macho_tool/machoview/examples/zzzzheibaoLib_dylib.html">
            
                    
                        <b>1.4.1.1.3.</b>
                    
                    zzzzHeiBaoLib.dylib
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../../../macho_tool/machoview/summary/">
            
                <a href="../../../macho_tool/machoview/summary/">
            
                    
                        <b>1.4.1.2.</b>
                    
                    心得
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.2.1" data-path="../../../macho_tool/machoview/summary/self_compile.html">
            
                <a href="../../../macho_tool/machoview/summary/self_compile.html">
            
                    
                        <b>1.4.1.2.1.</b>
                    
                    自己编译
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../../macho_tool/rabin2/">
            
                <a href="../../../macho_tool/rabin2/">
            
                    
                        <b>1.4.2.</b>
                    
                    rabin2
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../../../macho_tool/rabin2/usage/">
            
                <a href="../../../macho_tool/rabin2/usage/">
            
                    
                        <b>1.4.2.1.</b>
                    
                    用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../../../macho_tool/rabin2/examples/">
            
                <a href="../../../macho_tool/rabin2/examples/">
            
                    
                        <b>1.4.2.2.</b>
                    
                    举例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.2.1" data-path="../../../macho_tool/rabin2/examples/awemecore.html">
            
                <a href="../../../macho_tool/rabin2/examples/awemecore.html">
            
                    
                        <b>1.4.2.2.1.</b>
                    
                    AwemeCore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2.2" data-path="../../../macho_tool/rabin2/examples/maskpro_dylib.html">
            
                <a href="../../../macho_tool/rabin2/examples/maskpro_dylib.html">
            
                    
                        <b>1.4.2.2.2.</b>
                    
                    MaskPro.dylib
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../../../macho_tool/rabin2/help.html">
            
                <a href="../../../macho_tool/rabin2/help.html">
            
                    
                        <b>1.4.2.3.</b>
                    
                    help
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../../macho_tool/jtool2/">
            
                <a href="../../../macho_tool/jtool2/">
            
                    
                        <b>1.4.3.</b>
                    
                    jtool2
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="../../../macho_tool/jtool2/usage/">
            
                <a href="../../../macho_tool/jtool2/usage/">
            
                    
                        <b>1.4.3.1.</b>
                    
                    用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="../../../macho_tool/jtool2/examples/">
            
                <a href="../../../macho_tool/jtool2/examples/">
            
                    
                        <b>1.4.3.2.</b>
                    
                    举例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.2.1" data-path="../../../macho_tool/jtool2/examples/awemecore.html">
            
                <a href="../../../macho_tool/jtool2/examples/awemecore.html">
            
                    
                        <b>1.4.3.2.1.</b>
                    
                    AwemeCore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2.2" data-path="../../../macho_tool/jtool2/examples/maskpro_dylib.html">
            
                <a href="../../../macho_tool/jtool2/examples/maskpro_dylib.html">
            
                    
                        <b>1.4.3.2.2.</b>
                    
                    MaskPro.dylib
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2.3" data-path="../../../macho_tool/jtool2/examples/akd.html">
            
                <a href="../../../macho_tool/jtool2/examples/akd.html">
            
                    
                        <b>1.4.3.2.3.</b>
                    
                    akd
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3.3" data-path="../../../macho_tool/jtool2/help.html">
            
                <a href="../../../macho_tool/jtool2/help.html">
            
                    
                        <b>1.4.3.3.</b>
                    
                    help
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../../macho_tool/otool/">
            
                <a href="../../../macho_tool/otool/">
            
                    
                        <b>1.4.4.</b>
                    
                    otool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="../../../macho_tool/otool/usage/">
            
                <a href="../../../macho_tool/otool/usage/">
            
                    
                        <b>1.4.4.1.</b>
                    
                    用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.2" data-path="../../../macho_tool/otool/examples/">
            
                <a href="../../../macho_tool/otool/examples/">
            
                    
                        <b>1.4.4.2.</b>
                    
                    举例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.2.1" data-path="../../../macho_tool/otool/examples/aweme.html">
            
                <a href="../../../macho_tool/otool/examples/aweme.html">
            
                    
                        <b>1.4.4.2.1.</b>
                    
                    Aweme
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.2.2" data-path="../../../macho_tool/otool/examples/awemecore.html">
            
                <a href="../../../macho_tool/otool/examples/awemecore.html">
            
                    
                        <b>1.4.4.2.2.</b>
                    
                    AwemeCore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.2.3" data-path="../../../macho_tool/otool/examples/maskpro_dylib.html">
            
                <a href="../../../macho_tool/otool/examples/maskpro_dylib.html">
            
                    
                        <b>1.4.4.2.3.</b>
                    
                    MaskPro.dylib
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4.3" data-path="../../../macho_tool/otool/help.html">
            
                <a href="../../../macho_tool/otool/help.html">
            
                    
                        <b>1.4.4.3.</b>
                    
                    help
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../../macho_tool/pagestuff/">
            
                <a href="../../../macho_tool/pagestuff/">
            
                    
                        <b>1.4.5.</b>
                    
                    pagestuff
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.1" data-path="../../../macho_tool/pagestuff/help.html">
            
                <a href="../../../macho_tool/pagestuff/help.html">
            
                    
                        <b>1.4.5.1.</b>
                    
                    help
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../../appendix/">
            
                <a href="../../../appendix/">
            
                    
                        <b>1.5.</b>
                    
                    附录
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../../appendix/doc_material.html">
            
                <a href="../../../appendix/doc_material.html">
            
                    
                        <b>1.5.1.</b>
                    
                    Mach-O文档和资料
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../../appendix/reference.html">
            
                <a href="../../../appendix/reference.html">
            
                    
                        <b>1.5.2.</b>
                    
                    参考资料
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            本书使用 HonKit 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >Load Commands</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <html><head></head><body><h1 id="load-commands"><a name="load-commands" class="plugin-anchor" href="#load-commands"><i class="fa fa-link" aria-hidden="true"></i></a>Load Commands</h1>
<ul>
<li>概述<ul>
<li>位置：Load commands紧跟在Mach-O的Header之后</li>
<li>作用：Load commands指定了文件的布局结构和链接特征<ul>
<li>有很多很多种Load commands</li>
<li>这些加载指令清晰地告诉加载器如何处理二进制数据，有些命令是由内核处理的，有些是由动态链接器处理的</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="load-commands类型介绍"><a name="load-commands类型介绍" class="plugin-anchor" href="#load-commands类型介绍"><i class="fa fa-link" aria-hidden="true"></i></a>Load Commands类型介绍</h2>
<ul>
<li>概述<ul>
<li><code>LC_SEGMENT</code>：被映射到内存的段</li>
<li><code>LC_SYMTAB</code>：符号表</li>
<li><code>LC_DYSYMTAB</code>：动态符号表</li>
<li><code>LC_LOAD_DYLIB</code>：动态链接库</li>
</ul>
</li>
<li>详解<ul>
<li><code>LC_REQ_DYLD</code> = 0x8000_0000<ul>
<li>含义：After MacOS X 10.1 when a new load command is added that is required to be understood by the dynamic linker for the image to execute properly the LC_REQ_DYLD bit will be or&apos;ed into the load command constant.  If the dynamic linker sees such a load command it it does not understand will issue a &quot;unknown load command required for execution&quot; error and refuse to use the image.  Other load commands without this bit that are not understood will simply be ignored.</li>
</ul>
</li>
<li><code>LC_SEGMENT</code> = 0x1<ul>
<li>数据结构定义：<code>segment_command</code></li>
<li>含义：segment of this file to be mapped<ul>
<li>Defines a segment of this file to be mapped into the address space of the process that loads this file. It also includes all the sections contained by the segment.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_SYMTAB</code> = 0x2<ul>
<li>数据结构定义：<code>symtab_command</code></li>
<li>含义：link-edit stab symbol table info<ul>
<li>Specifies the symbol table for this file. This information is used by both static and dynamic linkers when linking the file, and also by debuggers to map symbols to the original source code files from which the symbols were generated.</li>
</ul>
</li>
</ul>
</li>
<li>LC_SYMSEG = 0x3<ul>
<li>link-edit gdb symbol table info (obsolete)</li>
</ul>
</li>
<li><code>LC_THREAD</code> = 0x4<ul>
<li>数据结构定义：<code>thread_command</code></li>
<li>含义：thread<ul>
<li>For an executable file, the <code>LC_UNIXTHREAD</code> command defines the initial thread state of the main thread of the process. <code>LC_THREAD</code> is similar to <code>LC_UNIXTHREAD</code> but does not cause the kernel to allocate a stack.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_UNIXTHREAD</code> = 0x5<ul>
<li>含义：unix thread (includes a stack)</li>
</ul>
</li>
<li>LC_LOADFVMLIB = 0x6<ul>
<li>load a specified fixed VM shared library</li>
</ul>
</li>
<li>LC_IDFVMLIB = 0x7<ul>
<li>object identification info (obsolete)</li>
</ul>
</li>
<li>LC_IDENT = 0x8<ul>
<li>object identification info (obsolete)</li>
</ul>
</li>
<li>LC_FVMFILE = 0x9<ul>
<li>fixed VM file inclusion (internal use)</li>
</ul>
</li>
<li>LC_PREPAGE = 0xa<ul>
<li>prepage command (internal use)</li>
</ul>
</li>
<li><code>LC_DYSYMTAB</code> = 0xb<ul>
<li>数据结构定义：<code>dysymtab_command</code></li>
<li>含义：dynamic link-edit symbol table info<ul>
<li>Specifies additional symbol table information used by the dynamic linker.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_LOAD_DYLIB</code> = 0xc<ul>
<li>数据结构定义：<code>dylib_command</code></li>
<li>含义：load a dynamically linked shared library<ul>
<li>Defines the name of a dynamic shared library that this file links against.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_ID_DYLIB</code> = 0xd<ul>
<li>数据结构定义：<code>dylib_command</code></li>
<li>含义：dynamically linked shared lib ident<ul>
<li>Specifies the install name of a dynamic shared library.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_LOAD_DYLINKER</code> = 0xe<ul>
<li>数据结构定义：<code>dylinker_command</code></li>
<li>含义：load a dynamic linker<ul>
<li>Specifies the dynamic linker that the kernel executes to load this file.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_ID_DYLINKER</code> = 0xf<ul>
<li>数据结构定义：<code>dylinker_command</code></li>
<li>含义：dynamic linker identification<ul>
<li>Identifies this file as a dynamic linker.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_PREBOUND_DYLIB</code> = 0x10<ul>
<li>数据结构定义：<code>prebound_dylib_command</code></li>
<li>含义：modules prebound for a dynamically linked shared library<ul>
<li>For a shared library that this executable is linked prebound against, specifies the modules in the shared library that are used.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_ROUTINES</code> = 0x11<ul>
<li>数据结构定义：<code>routines_command</code></li>
<li>含义：image routines<ul>
<li>Contains the address of the shared library initialization routine (specified by the linker’s <code>-init</code> option).</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_SUB_FRAMEWORK</code> = 0x12<ul>
<li>数据结构定义：<code>sub_framework_command</code></li>
<li>含义：sub framework<ul>
<li>Identifies this file as the implementation of a subframework of an umbrella framework. The name of the umbrella framework is stored in the string parameter.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_SUB_UMBRELLA</code> = 0x13<ul>
<li>数据结构定义：<code>sub_umbrella_command</code></li>
<li>含义：sub umbrella<ul>
<li>Specifies a file that is a subumbrella of this umbrella framework.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_SUB_CLIENT</code> = 0x14<ul>
<li>数据结构定义：<code>sub_client_command</code></li>
<li>含义：sub client<ul>
<li>A subframework can explicitly allow another framework or bundle to link against it by including an <code>LC_SUB_CLIENT</code> load command containing the name of the framework or a client name for a bundle.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_SUB_LIBRARY</code> = 0x15<ul>
<li>数据结构定义：<code>sub_library_command</code></li>
<li>含义：sub library<ul>
<li>Defines the attributes of the <code>LC_SUB_LIBRARY</code> load command. Identifies a sublibrary of this framework and marks this framework as an umbrella framework.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_TWOLEVEL_HINTS</code> = 0x16<ul>
<li>数据结构定义：<code>twolevel_hints_command</code></li>
<li>含义：two-level namespace lookup hints<ul>
<li>Contains the two-level namespace lookup hint table.</li>
</ul>
</li>
</ul>
</li>
<li>LC_PREBIND_CKSUM = 0x17<ul>
<li>prebind checksum</li>
</ul>
</li>
<li>LC_LOAD_WEAK_DYLIB = 0x18 | LC_REQ_DYLD = 0x80000018<ul>
<li>load a dynamically linked shared library that is allowed to be missing (all symbols are weak imported)</li>
</ul>
</li>
<li><code>LC_SEGMENT_64</code> = 0x19<ul>
<li>数据结构定义：<code>segment_command_64</code></li>
<li>含义：64-bit segment of this file to be mapped<ul>
<li>Defines a 64-bit segment of this file to be mapped into the address space of the process that loads this file. It also includes all the sections contained by the segment.</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_ROUTINES_64</code> = 0x1a<ul>
<li>数据结构定义：<code>routines_command_64</code></li>
<li>含义：64-bit image routines<ul>
<li>Contains the address of the shared library 64-bit initialization routine (specified by the linker’s <code>-init</code> option).</li>
</ul>
</li>
</ul>
</li>
<li><code>LC_UUID</code> = 0x1b<ul>
<li>数据结构定义：<code>uuid_command</code></li>
<li>含义：the uuid<ul>
<li>Specifies the 128-bit UUID for an image or its corresponding dSYM file</li>
</ul>
</li>
</ul>
</li>
<li>LC_RPATH = 0x1c | LC_REQ_DYLD = 0x8000001c<ul>
<li>run path additions</li>
</ul>
</li>
<li>LC_CODE_SIGNATURE = 0x1d<ul>
<li>local of code signature</li>
</ul>
</li>
<li>LC_SEGMENT_SPLIT_INFO = 0x1e<ul>
<li>local of info to split segments</li>
</ul>
</li>
<li>LC_REEXPORT_DYLIB = 0x1f | LC_REQ_DYLD = 0x8000001f<ul>
<li>load and re-export dylib</li>
</ul>
</li>
<li>LC_LAZY_LOAD_DYLIB = 0x20<ul>
<li>delay load of dylib until first use</li>
</ul>
</li>
<li>LC_ENCRYPTION_INFO = 0x21<ul>
<li>encrypted segment information</li>
</ul>
</li>
<li>LC_DYLD_INFO = 0x22<ul>
<li>compressed dyld information</li>
</ul>
</li>
<li>LC_DYLD_INFO_ONLY = 0x22 | LC_REQ_DYLD = 0x80000022<ul>
<li>compressed dyld information only</li>
</ul>
</li>
<li>LC_LOAD_UPWARD_DYLIB = 0x23 | LC_REQ_DYLD = 0x80000023<ul>
<li>load upward dylib</li>
</ul>
</li>
<li>LC_VERSION_MIN_MACOSX = 0x24<ul>
<li>build for MacOSX min OS version</li>
</ul>
</li>
<li>LC_VERSION_MIN_IPHONEOS = 0x25<ul>
<li>build for iPhoneOS min OS version</li>
</ul>
</li>
<li>LC_FUNCTION_STARTS = 0x26<ul>
<li>compressed table of function start addresses</li>
</ul>
</li>
<li>LC_DYLD_ENVIRONMENT = 0x27<ul>
<li>string for dyld to treat like environment variable</li>
</ul>
</li>
<li>LC_MAIN = 0x28 | LC_REQ_DYLD = 0x80000028<ul>
<li>replacement for LC_UNIXTHREAD</li>
</ul>
</li>
<li>LC_DATA_IN_CODE = 0x29<ul>
<li>table of non-instructions in __text</li>
</ul>
</li>
<li>LC_SOURCE_VERSION = 0x2A<ul>
<li>source version used to build binary</li>
</ul>
</li>
<li>LC_DYLIB_CODE_SIGN_DRS = 0x2B<ul>
<li>Code signing DRs copied from linked dylibs</li>
</ul>
</li>
<li>LC_ENCRYPTION_INFO_64 = 0x2C<ul>
<li>64-bit encrypted segment information</li>
</ul>
</li>
<li>LC_LINKER_OPTION = 0x2D<ul>
<li>linker options in MH_OBJECT files</li>
</ul>
</li>
<li>LC_LINKER_OPTIMIZATION_HINT = 0x2E<ul>
<li>optimization hints in MH_OBJECT files</li>
</ul>
</li>
<li>LC_VERSION_MIN_TVOS = 0x2F<ul>
<li>build for AppleTV min OS version</li>
</ul>
</li>
<li>LC_VERSION_MIN_WATCHOS = 0x30<ul>
<li>build for Watch min OS version</li>
</ul>
</li>
<li>LC_NOTE = 0x31<ul>
<li>arbitrary data included within a Mach-O file</li>
</ul>
</li>
<li>LC_BUILD_VERSION = 0x32<ul>
<li>build for platform min OS version</li>
</ul>
</li>
<li>LC_DYLD_EXPORTS_TRIE = 0x33 | LC_REQ_DYLD = 0x80000033<ul>
<li>used with <code>LinkeditDataCommand</code>, payload is trie</li>
</ul>
</li>
<li>LC_DYLD_CHAINED_FIXUPS = 0x34 | LC_REQ_DYLD = 0x80000034<ul>
<li>used with <code>LinkeditDataCommand</code></li>
</ul>
</li>
<li>LC_FILESET_ENTRY = 0x35 | LC_REQ_DYLD = 0x80000035<ul>
<li>used with <code>FilesetEntryCommand</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="load-commands定义"><a name="load-commands定义" class="plugin-anchor" href="#load-commands定义"><i class="fa fa-link" aria-hidden="true"></i></a>Load Commands定义</h2>
<ul>
<li><p><img src="../../../assets/img/macho_detail_load_commands.png" alt="macho_detail_load_commands"></p>
</li>
<li><p>源码定义</p>
<ul>
<li>loader.h<ul>
<li>xnu-2050.18.24<ul>
<li><a href="https://opensource.apple.com/source/xnu/xnu-2050.18.24/EXTERNAL_HEADERS/mach-o/loader.h" target="_blank">loader.h</a></li>
</ul>
</li>
<li>xnu-7195.81.3<ul>
<li><a href="https://opensource.apple.com/source/xnu/xnu-7195.81.3/EXTERNAL_HEADERS/mach-o/loader.h.auto.html" target="_blank">loader.h html</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="language-"><code class="lang-c"><span class="token comment">/*
 * The load commands directly follow the mach_header.  The total size of all
 * of the commands is given by the sizeofcmds field in the mach_header.  All
 * load commands must have as their first two fields cmd and cmdsize.  The cmd
 * field is filled in with a constant for that command type.  Each command type
 * has a structure specifically for it.  The cmdsize field is the size in bytes
 * of the particular load command structure plus anything that follows it that
 * is a part of the load command (i.e. section structures, strings, etc.).  To
 * advance to the next load command the cmdsize can be added to the offset or
 * pointer of the current load command.  The cmdsize for 32-bit architectures
 * MUST be a multiple of 4 bytes and for 64-bit architectures MUST be a multiple
 * of 8 bytes (these are forever the maximum alignment of any load commands).
 * The padded bytes must be zero.  All tables in the object file must also
 * follow these rules so the file can be memory mapped.  Otherwise the pointers
 * to these tables will not work well or at all on some machines.  With all
 * padding zeroed like objects will compare byte for byte.
 */</span>
<span class="token keyword">struct</span> <span class="token class-name">load_command</span> <span class="token punctuation">{</span>
    <span class="token class-name">uint32_t</span> cmd<span class="token punctuation">;</span>        <span class="token comment">/* type of load command */</span>
    <span class="token class-name">uint32_t</span> cmdsize<span class="token punctuation">;</span>    <span class="token comment">/* total size of command in bytes */</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/*
 * After MacOS X 10.1 when a new load command is added that is required to be
 * understood by the dynamic linker for the image to execute properly the
 * LC_REQ_DYLD bit will be or&apos;ed into the load command constant.  If the dynamic
 * linker sees such a load command it it does not understand will issue a
 * &quot;unknown load command required for execution&quot; error and refuse to use the
 * image.  Other load commands without this bit that are not understood will
 * simply be ignored.
 */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_REQ_DYLD</span> <span class="token expression"><span class="token number">0x80000000</span></span></span>

<span class="token comment">/* Constants for the cmd field of all load commands, the type */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_SEGMENT</span>    <span class="token expression"><span class="token number">0x1</span>    </span><span class="token comment">/* segment of this file to be mapped */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_SYMTAB</span>    <span class="token expression"><span class="token number">0x2</span>    </span><span class="token comment">/* link-edit stab symbol table info */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_SYMSEG</span>    <span class="token expression"><span class="token number">0x3</span>    </span><span class="token comment">/* link-edit gdb symbol table info (obsolete) */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_THREAD</span>    <span class="token expression"><span class="token number">0x4</span>    </span><span class="token comment">/* thread */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_UNIXTHREAD</span>    <span class="token expression"><span class="token number">0x5</span>    </span><span class="token comment">/* unix thread (includes a stack) */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_LOADFVMLIB</span>    <span class="token expression"><span class="token number">0x6</span>    </span><span class="token comment">/* load a specified fixed VM shared library */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_IDFVMLIB</span>    <span class="token expression"><span class="token number">0x7</span>    </span><span class="token comment">/* fixed VM shared library identification */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_IDENT</span>    <span class="token expression"><span class="token number">0x8</span>    </span><span class="token comment">/* object identification info (obsolete) */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_FVMFILE</span>    <span class="token expression"><span class="token number">0x9</span>    </span><span class="token comment">/* fixed VM file inclusion (internal use) */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_PREPAGE</span>      <span class="token expression"><span class="token number">0xa</span>     </span><span class="token comment">/* prepage command (internal use) */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_DYSYMTAB</span>    <span class="token expression"><span class="token number">0xb</span>    </span><span class="token comment">/* dynamic link-edit symbol table info */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_LOAD_DYLIB</span>    <span class="token expression"><span class="token number">0xc</span>    </span><span class="token comment">/* load a dynamically linked shared library */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_ID_DYLIB</span>    <span class="token expression"><span class="token number">0xd</span>    </span><span class="token comment">/* dynamically linked shared lib ident */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_LOAD_DYLINKER</span> <span class="token expression"><span class="token number">0xe</span>    </span><span class="token comment">/* load a dynamic linker */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_ID_DYLINKER</span>    <span class="token expression"><span class="token number">0xf</span>    </span><span class="token comment">/* dynamic linker identification */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_PREBOUND_DYLIB</span> <span class="token expression"><span class="token number">0x10</span>    </span><span class="token comment">/* modules prebound for a dynamically */</span></span>
                <span class="token comment">/*  linked shared library */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_ROUTINES</span>    <span class="token expression"><span class="token number">0x11</span>    </span><span class="token comment">/* image routines */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_SUB_FRAMEWORK</span> <span class="token expression"><span class="token number">0x12</span>    </span><span class="token comment">/* sub framework */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_SUB_UMBRELLA</span> <span class="token expression"><span class="token number">0x13</span>    </span><span class="token comment">/* sub umbrella */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_SUB_CLIENT</span>    <span class="token expression"><span class="token number">0x14</span>    </span><span class="token comment">/* sub client */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_SUB_LIBRARY</span>  <span class="token expression"><span class="token number">0x15</span>    </span><span class="token comment">/* sub library */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_TWOLEVEL_HINTS</span> <span class="token expression"><span class="token number">0x16</span>    </span><span class="token comment">/* two-level namespace lookup hints */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_PREBIND_CKSUM</span>  <span class="token expression"><span class="token number">0x17</span>    </span><span class="token comment">/* prebind checksum */</span></span>

<span class="token comment">/*
 * load a dynamically linked shared library that is allowed to be missing
 * (all symbols are weak imported).
 */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_LOAD_WEAK_DYLIB</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">0x18</span> <span class="token operator">|</span> LC_REQ_DYLD<span class="token punctuation">)</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_SEGMENT_64</span>    <span class="token expression"><span class="token number">0x19</span>    </span><span class="token comment">/* 64-bit segment of this file to be
                   mapped */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_ROUTINES_64</span>    <span class="token expression"><span class="token number">0x1a</span>    </span><span class="token comment">/* 64-bit image routines */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_UUID</span>        <span class="token expression"><span class="token number">0x1b</span>    </span><span class="token comment">/* the uuid */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_RPATH</span>       <span class="token expression"><span class="token punctuation">(</span><span class="token number">0x1c</span> <span class="token operator">|</span> LC_REQ_DYLD<span class="token punctuation">)</span>    </span><span class="token comment">/* runpath additions */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_CODE_SIGNATURE</span> <span class="token expression"><span class="token number">0x1d</span>    </span><span class="token comment">/* local of code signature */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_SEGMENT_SPLIT_INFO</span> <span class="token expression"><span class="token number">0x1e</span> </span><span class="token comment">/* local of info to split segments */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_REEXPORT_DYLIB</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">0x1f</span> <span class="token operator">|</span> LC_REQ_DYLD<span class="token punctuation">)</span> </span><span class="token comment">/* load and re-export dylib */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_LAZY_LOAD_DYLIB</span> <span class="token expression"><span class="token number">0x20</span>    </span><span class="token comment">/* delay load of dylib until first use */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_ENCRYPTION_INFO</span> <span class="token expression"><span class="token number">0x21</span>    </span><span class="token comment">/* encrypted segment information */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_DYLD_INFO</span>     <span class="token expression"><span class="token number">0x22</span>    </span><span class="token comment">/* compressed dyld information */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_DYLD_INFO_ONLY</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">0x22</span><span class="token operator">|</span>LC_REQ_DYLD<span class="token punctuation">)</span>    </span><span class="token comment">/* compressed dyld information only */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_LOAD_UPWARD_DYLIB</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">0x23</span> <span class="token operator">|</span> LC_REQ_DYLD<span class="token punctuation">)</span> </span><span class="token comment">/* load upward dylib */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_VERSION_MIN_MACOSX</span> <span class="token expression"><span class="token number">0x24</span>   </span><span class="token comment">/* build for MacOSX min OS version */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_VERSION_MIN_IPHONEOS</span> <span class="token expression"><span class="token number">0x25</span> </span><span class="token comment">/* build for iPhoneOS min OS version */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_FUNCTION_STARTS</span> <span class="token expression"><span class="token number">0x26</span> </span><span class="token comment">/* compressed table of function start addresses */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_DYLD_ENVIRONMENT</span> <span class="token expression"><span class="token number">0x27</span> </span><span class="token comment">/* string for dyld to treat
                    like environment variable */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_MAIN</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">0x28</span><span class="token operator">|</span>LC_REQ_DYLD<span class="token punctuation">)</span> </span><span class="token comment">/* replacement for LC_UNIXTHREAD */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_DATA_IN_CODE</span> <span class="token expression"><span class="token number">0x29</span> </span><span class="token comment">/* table of non-instructions in __text */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_SOURCE_VERSION</span> <span class="token expression"><span class="token number">0x2A</span> </span><span class="token comment">/* source version used to build binary */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_DYLIB_CODE_SIGN_DRS</span> <span class="token expression"><span class="token number">0x2B</span> </span><span class="token comment">/* Code signing DRs copied from linked dylibs */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>    <span class="token macro-name">LC_ENCRYPTION_INFO_64</span> <span class="token expression"><span class="token number">0x2C</span> </span><span class="token comment">/* 64-bit encrypted segment information */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_LINKER_OPTION</span> <span class="token expression"><span class="token number">0x2D</span> </span><span class="token comment">/* linker options in MH_OBJECT files */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_LINKER_OPTIMIZATION_HINT</span> <span class="token expression"><span class="token number">0x2E</span> </span><span class="token comment">/* optimization hints in MH_OBJECT files */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_VERSION_MIN_TVOS</span> <span class="token expression"><span class="token number">0x2F</span> </span><span class="token comment">/* build for AppleTV min OS version */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_VERSION_MIN_WATCHOS</span> <span class="token expression"><span class="token number">0x30</span> </span><span class="token comment">/* build for Watch min OS version */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_NOTE</span> <span class="token expression"><span class="token number">0x31</span> </span><span class="token comment">/* arbitrary data included within a Mach-O file */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_BUILD_VERSION</span> <span class="token expression"><span class="token number">0x32</span> </span><span class="token comment">/* build for platform min OS version */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_DYLD_EXPORTS_TRIE</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">0x33</span> <span class="token operator">|</span> LC_REQ_DYLD<span class="token punctuation">)</span> </span><span class="token comment">/* used with linkedit_data_command, payload is trie */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_DYLD_CHAINED_FIXUPS</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">0x34</span> <span class="token operator">|</span> LC_REQ_DYLD<span class="token punctuation">)</span> </span><span class="token comment">/* used with linkedit_data_command */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LC_FILESET_ENTRY</span>      <span class="token expression"><span class="token punctuation">(</span><span class="token number">0x35</span> <span class="token operator">|</span> LC_REQ_DYLD<span class="token punctuation">)</span> </span><span class="token comment">/* used with fileset_entry_command */</span></span>
</code></pre>
<ul>
<li>说明<ul>
<li><code>iOS 15.0</code>后新增的Load Command<ul>
<li><code>LC_DYLD_CHAINED_FIXUPS</code></li>
<li><code>LC_DYLD_EXPORTS_TRIE</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<footer class="page-footer"><span class="copyright">crifan.org，使用<a href="https://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank">署名4.0国际(CC BY 4.0)协议</a>发布 all right reserved，powered by Gitbook</span><span class="footer-modification">最后更新：
2023-10-07 17:04:15
</span></footer></body></html>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../header/flags.html" class="navigation navigation-prev " aria-label="Previous page: flags">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="lc_uuid.html" class="navigation navigation-next " aria-label="Next page: LC_UUID">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Load Commands","level":"1.3.2.2","depth":3,"next":{"title":"LC_UUID","level":"1.3.2.2.1","depth":4,"path":"macho_format/detail/load_commands/lc_uuid.md","ref":"macho_format/detail/load_commands/lc_uuid.md","articles":[]},"previous":{"title":"flags","level":"1.3.2.1.4","depth":4,"path":"macho_format/detail/header/flags.md","ref":"macho_format/detail/header/flags.md","articles":[]},"articles":[{"title":"LC_UUID","level":"1.3.2.2.1","depth":4,"path":"macho_format/detail/load_commands/lc_uuid.md","ref":"macho_format/detail/load_commands/lc_uuid.md","articles":[]},{"title":"LC_SEGMENT","level":"1.3.2.2.2","depth":4,"path":"macho_format/detail/load_commands/lc_segment.md","ref":"macho_format/detail/load_commands/lc_segment.md","articles":[]},{"title":"LC_SEGMENT_64","level":"1.3.2.2.3","depth":4,"path":"macho_format/detail/load_commands/lc_segment_64.md","ref":"macho_format/detail/load_commands/lc_segment_64.md","articles":[]},{"title":"LC_SYMTAB","level":"1.3.2.2.4","depth":4,"path":"macho_format/detail/load_commands/lc_symtab.md","ref":"macho_format/detail/load_commands/lc_symtab.md","articles":[]},{"title":"LC_DYLD_CHAINED_FIXUPS","level":"1.3.2.2.5","depth":4,"path":"macho_format/detail/load_commands/lc_dyld_chained_fixups.md","ref":"macho_format/detail/load_commands/lc_dyld_chained_fixups.md","articles":[]},{"title":"LC_DYLD_EXPORTS_TRIE","level":"1.3.2.2.6","depth":4,"path":"macho_format/detail/load_commands/lc_dyld_exports_trie.md","ref":"macho_format/detail/load_commands/lc_dyld_exports_trie.md","articles":[]}],"dir":"ltr"},"config":{"plugins":["theme-comscore","anchors","expandable-menu","-lunr","-search","search-plus","disqus","-highlight","prism","prism-themes","github-buttons","-splitter","splitter-nosessionbutcookie","-sharing","sharing-plus","tbfed-pagefooter","donate","sitemap-general","copy-code-button","callouts","toolbar-button"],"root":"./src","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"crifan.org，使用<a href='https://creativecommons.org/licenses/by/4.0/deed.zh'>署名4.0国际(CC BY 4.0)协议</a>发布","modify_label":"最后更新：","modify_format":"YYYY-MM-DD HH:mm:ss"},"prism":{"css":["prism-themes/themes/prism-atom-dark.css"]},"disqus":{"useIdentifier":false,"shortName":"crifan"},"callouts":{"showTypeInHeader":false},"toolbar-button":{"label":"下载PDF","url":"https://book.crifan.org/books/exec_file_format_macho/pdf/exec_file_format_macho.pdf","icon":"fa-file-pdf-o"},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"donate":{"title":"","button":"打赏","wechat":"https://www.crifan.org/files/res/crifan_com/crifan_wechat_pay.jpg","alipay":"https://www.crifan.org/files/res/crifan_com/crifan_alipay_pay.jpg","wechatText":"微信打赏给Crifan","alipayText":"支付宝打赏给Crifan"},"sitemap-general":{"prefix":"https://book.crifan.org/books/exec_file_format_macho/website/"},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-comscore":{},"splitter-nosessionbutcookie":{},"prism-themes":{},"github-buttons":{"buttons":[{"repo":"exec_file_format_macho","user":"crifan","type":"star","count":true,"size":"small"},{"user":"crifan","type":"follow","width":"120","count":false,"size":"small"}]},"expandable-menu":{},"copy-code-button":{},"sharing":{"qq":true,"all":["douban","facebook","google","instapaper","line","linkedin","messenger","pocket","qq","qzone","stumbleupon","twitter","viber","vk","weibo","whatsapp"],"douban":false,"facebook":true,"weibo":true,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":false,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchors":{},"search-plus":{}},"theme":"default","author":"Crifan Li <admin@crifan.com>","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"可执行文件格式：Mach-O","language":"zh-hans","links":{"sidebar":{"主页":"http://www.crifan.org"}},"gitbook":"*","description":"介绍Mac和iOS等Apple苹果系统的常见可执行文件格式：Mach-O；先是Mach-O概览；包括背景知识的XNU、PIC等；然后介绍Mach-O格式，包括结构概述和结构图，以及结构详情，包括Header、Load Commands和Segment的data；其中Header包括magic、cputype和cpusubtype、filetype、flags；Load Commands包括LC_UUID、LC_SEGMENT、LC_SEGMENT_64、LC_SYMTAB、LC_DYLD_CHAINED_FIXUPS、LC_DYLD_EXPORTS_TRIE等；Segment包括__TEXT、__DATA、__IMPORT、__LINKEDIT、__OBJC；以及各个Segment的section，比如symbol、strings等；然后是Mach-O格式的子项，包括FAT、codesign、虚拟地址、大小限制等；然后整理Mach-O的各种工具，包括MachOView、rabin2、jtool2、otool、pagestuff，以及每个工具的用法、举例、help语法等；"},"file":{"path":"macho_format/detail/load_commands/README.md","mtime":"2023-10-07T09:04:15.801Z","type":"markdown"},"gitbook":{"version":"4.0.7","time":"2024-03-25T02:19:19.282Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-expandable-menu/expandable-chapters.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-splitter-nosessionbutcookie/splitter.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-toolbar-button/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

