
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <title>核心逻辑和架构 · 借贷协议：AAVE</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.7">
        <meta name="author" content="Crifan Li <admin@crifan.com>">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-menu/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-atom-dark.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter-nosessionbutcookie/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-callouts/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../lending_logic/" />
    
    
    <link rel="prev" href="./" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"repo":"lending_protocol_aave","user":"crifan","type":"star","count":true,"size":"small"},{"user":"crifan","type":"follow","width":"120","count":false,"size":"small"}]};
    </script>

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="http://www.crifan.org" target="_blank" class="custom-link">主页</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.1.</b>
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="./">
            
                <a href="./">
            
                    
                        <b>1.2.</b>
                    
                    AAVE借贷协议概述
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.2.1" data-path="core_logic_arch.html">
            
                <a href="core_logic_arch.html">
            
                    
                        <b>1.2.1.</b>
                    
                    核心逻辑和架构
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../lending_logic/">
            
                <a href="../lending_logic/">
            
                    
                        <b>1.3.</b>
                    
                    借贷逻辑
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../lending_logic/deposit.html">
            
                <a href="../lending_logic/deposit.html">
            
                    
                        <b>1.3.1.</b>
                    
                    deposit=存款
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../lending_logic/borrow.html">
            
                <a href="../lending_logic/borrow.html">
            
                    
                        <b>1.3.2.</b>
                    
                    borrow=借款
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../lending_logic/repay.html">
            
                <a href="../lending_logic/repay.html">
            
                    
                        <b>1.3.3.</b>
                    
                    repay=偿还
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../lending_logic/redeem.html">
            
                <a href="../lending_logic/redeem.html">
            
                    
                        <b>1.3.4.</b>
                    
                    redeem=赎回
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../lending_logic/liquidation/">
            
                <a href="../lending_logic/liquidation/">
            
                    
                        <b>1.3.5.</b>
                    
                    liquidation=清算
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../lending_logic/liquidation/health_factor.html">
            
                <a href="../lending_logic/liquidation/health_factor.html">
            
                    
                        <b>1.3.5.1.</b>
                    
                    健康因子Health Factor
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../lending_logic/rate_mode.html">
            
                <a href="../lending_logic/rate_mode.html">
            
                    
                        <b>1.3.6.</b>
                    
                    Swap borrow rate mode=切换借贷利率模型
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../sub_module/">
            
                <a href="../sub_module/">
            
                    
                        <b>1.4.</b>
                    
                    子模块
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../sub_module/atoken/">
            
                <a href="../sub_module/atoken/">
            
                    
                        <b>1.4.1.</b>
                    
                    aToken
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../sub_module/atoken/token_function.html">
            
                <a href="../sub_module/atoken/token_function.html">
            
                    
                        <b>1.4.1.1.</b>
                    
                    代币的作用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../sub_module/governance.html">
            
                <a href="../sub_module/governance.html">
            
                    
                        <b>1.4.2.</b>
                    
                    Governance治理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../sub_module/safety_module.html">
            
                <a href="../sub_module/safety_module.html">
            
                    
                        <b>1.4.3.</b>
                    
                    Safety Module安全模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../sub_module/flash_loan.html">
            
                <a href="../sub_module/flash_loan.html">
            
                    
                        <b>1.4.4.</b>
                    
                    Flash Loan闪电贷
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../sub_module/gho.html">
            
                <a href="../sub_module/gho.html">
            
                    
                        <b>1.4.5.</b>
                    
                    稳定币GHO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../sub_module/credit_delegation.html">
            
                <a href="../sub_module/credit_delegation.html">
            
                    
                        <b>1.4.6.</b>
                    
                    Credit Delegation信用委托
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../sub_module/debt_tokenization.html">
            
                <a href="../sub_module/debt_tokenization.html">
            
                    
                        <b>1.4.7.</b>
                    
                    Debt Tokenization=债务代币化
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../rate_model/">
            
                <a href="../rate_model/">
            
                    
                        <b>1.5.</b>
                    
                    利率模型
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../rate_model/variable_vs_stable.html">
            
                <a href="../rate_model/variable_vs_stable.html">
            
                    
                        <b>1.5.1.</b>
                    
                    可变利率vs稳定利率
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../rate_model/stable_rate.html">
            
                <a href="../rate_model/stable_rate.html">
            
                    
                        <b>1.5.2.</b>
                    
                    稳定利率
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../rate_model/various_para.html">
            
                <a href="../rate_model/various_para.html">
            
                    
                        <b>1.5.3.</b>
                    
                    各种参数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../version/">
            
                <a href="../version/">
            
                    
                        <b>1.6.</b>
                    
                    版本
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../version/v1.html">
            
                <a href="../version/v1.html">
            
                    
                        <b>1.6.1.</b>
                    
                    AAVE v1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../version/v2/">
            
                <a href="../version/v2/">
            
                    
                        <b>1.6.2.</b>
                    
                    AAVE v2
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="../version/v2/gas_optimize.html">
            
                <a href="../version/v2/gas_optimize.html">
            
                    
                        <b>1.6.2.1.</b>
                    
                    Gas优化和改进
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../version/v3/">
            
                <a href="../version/v3/">
            
                    
                        <b>1.6.3.</b>
                    
                    AAVE v3
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.1" data-path="../version/v3/e_mode.html">
            
                <a href="../version/v3/e_mode.html">
            
                    
                        <b>1.6.3.1.</b>
                    
                    E-Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.2" data-path="../version/v3/isolation_mode.html">
            
                <a href="../version/v3/isolation_mode.html">
            
                    
                        <b>1.6.3.2.</b>
                    
                    Isolation Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.3" data-path="../version/v3/portal.html">
            
                <a href="../version/v3/portal.html">
            
                    
                        <b>1.6.3.3.</b>
                    
                    Portal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4" data-path="../version/v3/risk_management/">
            
                <a href="../version/v3/risk_management/">
            
                    
                        <b>1.6.3.4.</b>
                    
                    Risk Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.4.1" data-path="../version/v3/risk_management/control_borrow.html">
            
                <a href="../version/v3/risk_management/control_borrow.html">
            
                    
                        <b>1.6.3.4.1.</b>
                    
                    Granular borrowing power control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4.2" data-path="../version/v3/risk_management/price_oracle_sentinel.html">
            
                <a href="../version/v3/risk_management/price_oracle_sentinel.html">
            
                    
                        <b>1.6.3.4.2.</b>
                    
                    Price Oracle Sentinel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4.3" data-path="../version/v3/risk_management/siloed_borrowing.html">
            
                <a href="../version/v3/risk_management/siloed_borrowing.html">
            
                    
                        <b>1.6.3.4.3.</b>
                    
                    Siloed Borrowing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3.5" data-path="../version/v3/role_authority_manage.html">
            
                <a href="../version/v3/role_authority_manage.html">
            
                    
                        <b>1.6.3.5.</b>
                    
                    权限和角色管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.6" data-path="../version/v3/protocol_features.html">
            
                <a href="../version/v3/protocol_features.html">
            
                    
                        <b>1.6.3.6.</b>
                    
                    协议特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.7" data-path="../version/v3/multiple_rewards_claim.html">
            
                <a href="../version/v3/multiple_rewards_claim.html">
            
                    
                        <b>1.6.3.7.</b>
                    
                    Multiple Rewards and Claim
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../compare/">
            
                <a href="../compare/">
            
                    
                        <b>1.7.</b>
                    
                    对比
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../compare/aave_vs_compound.html">
            
                <a href="../compare/aave_vs_compound.html">
            
                    
                        <b>1.7.1.</b>
                    
                    AAVE vs Compound
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../dev_related/">
            
                <a href="../dev_related/">
            
                    
                        <b>1.8.</b>
                    
                    开发相关
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../dev_related/core_class_code.html">
            
                <a href="../dev_related/core_class_code.html">
            
                    
                        <b>1.8.1.</b>
                    
                    核心的类和代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../dev_related/aave_v3_contracts_overview.html">
            
                <a href="../dev_related/aave_v3_contracts_overview.html">
            
                    
                        <b>1.8.2.</b>
                    
                    AAVE V3合约概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../dev_related/audit_report.html">
            
                <a href="../dev_related/audit_report.html">
            
                    
                        <b>1.8.3.</b>
                    
                    审计报告
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../dev_related/bug_bounty.html">
            
                <a href="../dev_related/bug_bounty.html">
            
                    
                        <b>1.8.4.</b>
                    
                    漏洞赏金
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../appendix/">
            
                <a href="../appendix/">
            
                    
                        <b>1.9.</b>
                    
                    附录
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../appendix/terms.html">
            
                <a href="../appendix/terms.html">
            
                    
                        <b>1.9.1.</b>
                    
                    名词和术语
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../appendix/aave_docs.html">
            
                <a href="../appendix/aave_docs.html">
            
                    
                        <b>1.9.2.</b>
                    
                    AAVE资料
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../appendix/aave_evolution.html">
            
                <a href="../appendix/aave_evolution.html">
            
                    
                        <b>1.9.3.</b>
                    
                    AAVE发展进化历史
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../appendix/reference.html">
            
                <a href="../appendix/reference.html">
            
                    
                        <b>1.9.4.</b>
                    
                    参考资料
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            本书使用 HonKit 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >核心逻辑和架构</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <html><head></head><body><h1 id="核心逻辑和架构"><a name="核心逻辑和架构" class="plugin-anchor" href="#核心逻辑和架构"><i class="fa fa-link" aria-hidden="true"></i></a>核心逻辑和架构</h1>
<ul>
<li>AAVE借贷协议<ul>
<li>协议版本 <ul>
<li>AAVE v1 <ul>
<li>详见：AAVE V1</li>
</ul>
</li>
<li>AAVE v2 <ul>
<li>详见：AAVE V2</li>
</ul>
</li>
<li>AAVE v3 <ul>
<li>详见：AAVE V3</li>
</ul>
</li>
</ul>
</li>
<li>核心内容<ul>
<li>ETHLend<ul>
<li><img src="../assets/img/aave_ethlend_core_content.webp" alt="aave_ethlend_core_content"></li>
</ul>
</li>
<li>AAVE V2<ul>
<li><img src="../assets/img/aave_v2_core_content.jpg" alt="aave_v2_core_content"></li>
</ul>
</li>
</ul>
</li>
<li>协议架构Protocol Architecture<ul>
<li>AAVE v1<ul>
<li><img src="../assets/img/protocol_arch_aave_v1.png" alt="protocol_arch_aave_v1"></li>
</ul>
</li>
<li>AAVE V2 <ul>
<li><img src="../assets/img/protocol_arch_aave_v2.png" alt="protocol_arch_aave_v2"></li>
<li><img src="../assets/img/protocol_arch_aave_v2_2.png" alt="protocol_arch_aave_v2_2"></li>
</ul>
</li>
<li>对比<ul>
<li>V2和V1架构图的核心区别 <ul>
<li><ol>
<li>以前存储在LendingPoolCore合约中的资金现在存储在每个特定的attoken中 </li>
<li>这使得协议在资产之间更好地隔离，这有利于实现可感知产量的attoken。 </li>
</ol>
</li>
<li><ol>
<li>LendingPoolCore和LendingPoolDataProvider已被删除并替换为库。这在优化代码复杂性和冗长性的同时，将所有操作的气体足迹减少了15%到20%。 </li>
</ol>
</li>
<li><ol>
<li>现在所有的动作都通过LendingPool进行;在每个token上替换以前需要的redeem()。 </li>
</ol>
</li>
<li><ol>
<li>债务代币跟踪用户债务 </li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>核心流程 <ul>
<li>关键词=核心动作=核心事件 <ul>
<li>包括 <ul>
<li>deposit=存入 </li>
<li>redeem == withdraw=取回 </li>
<li>borrow=借出 </li>
<li>repay=偿还 </li>
<li>swap = Rate swap == Swap borrow rate mode = 利率调整 = 切换借贷利率模型 </li>
<li>liquidation=清算 </li>
<li>其他特殊 <ul>
<li>flash loan=闪电贷 </li>
</ul>
</li>
</ul>
</li>
<li>对应合约中的函数 <ul>
<li>LendingPool <ul>
<li>deposit() </li>
<li>withdraw() </li>
<li>borrow() </li>
<li>repay() </li>
<li>swapBorrowRateMode() </li>
<li>setUserUseReserveAsCollateral() </li>
<li>flashloan() </li>
<li>liquidationCall() </li>
</ul>
</li>
</ul>
</li>
<li>主要逻辑、关系、顺序 <ul>
<li>先存款deposit -&gt; 后赎回redeem==withdraw </li>
<li>先借款borrow -&gt; 后偿还repay / 或清算liquidation <ul>
<li>根据需要，去切换借贷利率模型Swap borrow rate mode ？ </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>AAVE借贷流程 流程 <ul>
<li>概述 <ul>
<li>LendingPool合约中实现的高级功能之一是贷款头寸的标记化。当用户存入特定的准备金时，他会收到相应数量的aTokens，这些token映射了所存入的流动性，并积累了所存入的基础资产的利息。代币是在存款时铸造的，它们的价值会增加，直到它们在赎回或清算时被烧毁。每当用户打开借贷头寸时，用作抵押品的代币被锁定，无法转让。 <ul>
<li>One of the advanced features implemented in the LendingPool contract is the tokenization of the lending position. When a user deposits in a specific reserve, he receives a corresponding amount of aTokens, tokens that map the liquidity deposited and accrue the interests of the deposited underlying assets. Atokens are minted upon deposit, their value increases until they are burned on redeem or liquidated. Whenever a user opens a borrow position, the tokens used as collateral are locked and cannot be transferred. </li>
</ul>
</li>
</ul>
</li>
<li>详解 <ul>
<li>首先，用户在 Aave 存入资金时，协议会铸造与标的资产 1:1 数量的 aTokens 代币，该代币符合 ERC20 标准，可以转移或进行交易。另外，存款利息的发放体现在 aToken 的余额上，即用户的 aToken 余额会随着时间的推移而增长 </li>
<li>其次，用户存入资产进行抵押后，即可在协议借出一定比例的资产，一般为超额抵押借贷；在借款时，用户可以选择固定利率或浮动利率两种模式。另外，根据不同代币的风险情况，每个代币的最大可借出资产价值（LTV）都不一样。如图 ，DAI 的 LTV 为 75%，即抵押 1 个 DAI 可借出对应 0.75 个 DAI 价值的资产 <ul>
<li><img src="../assets/img/dai_stablecoin_status.jpg" alt="dai_stablecoin_status"></li>
</ul>
</li>
<li>最后，用户在协议上进行偿还借出资产，并需要支付利息，利息由每个资产的利用率及市场的供需情况决定。若抵押资产的价格下跌，导致抵押品价值与借出资产价值的比例低于清算阈值时，用户将面临清算；清算过程依赖于预言机的喂价，Aave 协议使用的是 Chainlink。当用户完成偿还操作后，即可取回抵押资产，同时协议销毁对应的 aTokens  </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<footer class="page-footer"><span class="copyright">crifan.org，使用<a href="https://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank">署名4.0国际(CC BY 4.0)协议</a>发布 all right reserved，powered by Gitbook</span><span class="footer-modification">最后更新：
2024-09-30 10:01:22
</span></footer></body></html>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: AAVE借贷协议概述">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../lending_logic/" class="navigation navigation-next " aria-label="Next page: 借贷逻辑">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"核心逻辑和架构","level":"1.2.1","depth":2,"next":{"title":"借贷逻辑","level":"1.3","depth":1,"path":"lending_logic/README.md","ref":"lending_logic/README.md","articles":[{"title":"deposit=存款","level":"1.3.1","depth":2,"path":"lending_logic/deposit.md","ref":"lending_logic/deposit.md","articles":[]},{"title":"borrow=借款","level":"1.3.2","depth":2,"path":"lending_logic/borrow.md","ref":"lending_logic/borrow.md","articles":[]},{"title":"repay=偿还","level":"1.3.3","depth":2,"path":"lending_logic/repay.md","ref":"lending_logic/repay.md","articles":[]},{"title":"redeem=赎回","level":"1.3.4","depth":2,"path":"lending_logic/redeem.md","ref":"lending_logic/redeem.md","articles":[]},{"title":"liquidation=清算","level":"1.3.5","depth":2,"path":"lending_logic/liquidation/README.md","ref":"lending_logic/liquidation/README.md","articles":[{"title":"健康因子Health Factor","level":"1.3.5.1","depth":3,"path":"lending_logic/liquidation/health_factor.md","ref":"lending_logic/liquidation/health_factor.md","articles":[]}]},{"title":"Swap borrow rate mode=切换借贷利率模型","level":"1.3.6","depth":2,"path":"lending_logic/rate_mode.md","ref":"lending_logic/rate_mode.md","articles":[]}]},"previous":{"title":"AAVE借贷协议概述","level":"1.2","depth":1,"path":"aave_lending_proto/README.md","ref":"aave_lending_proto/README.md","articles":[{"title":"核心逻辑和架构","level":"1.2.1","depth":2,"path":"aave_lending_proto/core_logic_arch.md","ref":"aave_lending_proto/core_logic_arch.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["theme-comscore","anchors","expandable-menu","-lunr","-search","search-plus","disqus","-highlight","prism","prism-themes","github-buttons","-splitter","splitter-nosessionbutcookie","-sharing","sharing-plus","tbfed-pagefooter","donate","sitemap-general","copy-code-button","callouts","toolbar-button"],"root":"./src","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"crifan.org，使用<a href='https://creativecommons.org/licenses/by/4.0/deed.zh'>署名4.0国际(CC BY 4.0)协议</a>发布","modify_label":"最后更新：","modify_format":"YYYY-MM-DD HH:mm:ss"},"prism":{"css":["prism-themes/themes/prism-atom-dark.css"]},"disqus":{"useIdentifier":false,"shortName":"crifan"},"callouts":{"showTypeInHeader":false},"toolbar-button":{"label":"下载PDF","url":"https://book.crifan.org/books/lending_protocol_aave/pdf/lending_protocol_aave.pdf","icon":"fa-file-pdf-o"},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"donate":{"title":"","button":"打赏","wechat":"https://www.crifan.org/files/res/crifan_com/crifan_wechat_pay.jpg","alipay":"https://www.crifan.org/files/res/crifan_com/crifan_alipay_pay.jpg","wechatText":"微信打赏给Crifan","alipayText":"支付宝打赏给Crifan"},"sitemap-general":{"prefix":"https://book.crifan.org/books/lending_protocol_aave/website/"},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-comscore":{},"splitter-nosessionbutcookie":{},"prism-themes":{},"github-buttons":{"buttons":[{"repo":"lending_protocol_aave","user":"crifan","type":"star","count":true,"size":"small"},{"user":"crifan","type":"follow","width":"120","count":false,"size":"small"}]},"expandable-menu":{},"copy-code-button":{},"sharing":{"qq":true,"all":["douban","facebook","google","instapaper","line","linkedin","messenger","pocket","qq","qzone","stumbleupon","twitter","viber","vk","weibo","whatsapp"],"douban":false,"facebook":true,"weibo":true,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":false,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchors":{},"search-plus":{}},"theme":"default","author":"Crifan Li <admin@crifan.com>","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"借贷协议：AAVE","language":"zh-hans","links":{"sidebar":{"主页":"http://www.crifan.org"}},"gitbook":"*","description":"整理介绍区块链和加密货币领域中的借贷协议龙头之一：AAVE。先是概述和核心逻辑架构；然后是借贷协议，包括deposit存款、borrow借款、repay偿还、redeem赎回、liquidation清算和借贷利率模型；清算包括健康因子；以及子模块，包括aToken及代币的作用、Governance治理、Safety Module安全模块、Flash Loan闪电贷、稳定币GHO、Credit Delegation信用委托、Debt Tokenization债务代币化；以及利率模型，包括可变利率、稳定利率、两者对比、各种参数；以及三种版本AAVE v1、v2、v3，以及相关的Gas优化、E-Mode、Isolation Mode、Portal、Risk Management的Granular borrowing power control、Price Oracle Sentinel、Siloed Borrowing、权限和角色管理、协议特性、Multiple Rewards and Claim；以及AAVE和其他的对比，比如Compound；再就是开发相关的核心类和代码、V3合约概览、审计报告、漏洞赏金；最后附录加上名字术语、AAVE资料、发展进化历史等。"},"file":{"path":"aave_lending_proto/core_logic_arch.md","mtime":"2024-09-30T02:01:22.807Z","type":"markdown"},"gitbook":{"version":"4.0.7","time":"2024-09-30T02:15:16.467Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-expandable-menu/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter-nosessionbutcookie/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-toolbar-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

