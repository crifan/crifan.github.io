{"./":{"url":"./","title":"前言","keywords":"","body":"多媒体业务核心子系统：IMS 最新版本：v1.0 更新时间：20200917 简介 总结移动网络中用于实现多媒体业务的核心子系统IMS，包括IMS的概况，总体架构，核心元素比如AS、CSCF、HSS、MRF、BGCF、MGCF、BGF等，相关组织和协议，包括ETSI、NGN、TISPAN、SIP、用户认证相关、SBC等，以及基于IMS的技术如VoLTE、RCS、ViLTE、VoWiFi等，最后总结相关名词术语。 源码+浏览+下载 本书的各种源码、在线浏览地址、多种格式文件下载如下： Gitbook源码 crifan/multimedia_core_system_ims: 多媒体业务核心子系统：IMS 如何使用此Gitbook源码去生成发布为电子书 详见：crifan/gitbook_template: demo how to use crifan gitbook template and demo 在线浏览 多媒体业务核心子系统：IMS book.crifan.com 多媒体业务核心子系统：IMS crifan.github.io 离线下载阅读 多媒体业务核心子系统：IMS PDF 多媒体业务核心子系统：IMS ePub 多媒体业务核心子系统：IMS Mobi 版权说明 此电子书教程的全部内容，如无特别说明，均为本人原创和整理。其中部分内容参考自网络，均已备注了出处。如有发现侵犯您版权，请通过邮箱联系我 admin 艾特 crifan.com，我会尽快删除。谢谢合作。 鸣谢 感谢我的老婆陈雪的包容理解和悉心照料，才使得我crifan有更多精力去专注技术专研和整理归纳出这些电子书和技术教程，特此鸣谢。 更多其他电子书 本人crifan还写了其他100+本电子书教程，感兴趣可移步至： crifan/crifan_ebook_readme: Crifan的电子书的使用说明 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2021-01-17 00:53:06 "},"ims_overview/":{"url":"ims_overview/","title":"IMS概述","keywords":"","body":"IMS概述 IMS IMS=IP Multimedia Subsystem=Internet Protocol Multimedia Subsystem=IP多媒体子系统 =IMCNS=IM CN Subsystem=IP Multimedia Core Network Subsystem=IP多媒体核心网络子系统 是什么：一个基于互联网协议提供多媒体业务的体系架构 属于3GPP组织旗下的 3GPP=3rd Generation Partnership Project 作用：提供一种通用的架构，用来实现/提供VoIP和多媒体服务 背景 之前 是一种创新方式，实现电信服务迁移 旧 服务：电话 基于PS = 属于PS domain领域 新 领域：基于（端对端的）IP 服务：各种新（多媒体）服务 用于访问IMS服务的方式 CS=Circuit Switched PS=Packet Switched 3GPP设计（引入）IMS是作为PS的扩展 后来又支持新的，基于IP的多媒体服务 应该理解为： IMS不仅是个服务，更是个框架 底层：基于数据包packet 实现了：高级IP服务和应用 发展历史 IMS发展历史 3GPP R5 第一次提出IMS概念： 2G发展到3G阶段，出现W-CDMA网络（UMTS） 基于SIP多媒体领域（domain） 加到了 NGN网络 也支持GSM和GPRS网络 3GPP R6 新增支持WLAN的互联（interworking） 3GPP R7 支持固定网络，和TISPAN一起支持更多类型网络 其内部是：SOA=Subsystem-Oriented Architecture=面向子系统的架构 出现 Early IMS=早期IMS 支持IPv4网络 为IPv6提供扩展路径 最新叫法：IMS = core IMS 蜂窝网络发展历史 1G 使用模拟信号传输 只支持CS传输电话语音 2G 全数字 支持CS的语音和数据（传输）服务 2.5G 新增PS交换数据服务 在2G基础上 3G （尝试）提供基于PS的全部类型的服务 包括传统的电话语音 特点 模块化modular 可扩展extendable 背景 文字 传统移动电话使用类电路交换网络提供语音通话服务 而非使用计算机分组交换通信方式的网络。 虽然已有很多方式在智能手机上提供网络电话与其他互联网多媒体服务 但并未形成行业标准 IMS则为此提供了一个标准化体系架构 图 应用演化直到IMS 希望用IMS实现各种功能和服务 接入方式=接入网络 早期 GPRS 后续：支持其他 WLAN CDMA2000 固定电话线 等 新应用 presence information video conferencing POC=Push to talk over Cellular multiparty gaming community services content sharing crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_arch/":{"url":"ims_arch/","title":"IMS架构","keywords":"","body":"IMS架构 3GPP / TISPAN IMS 架构网络 说明 NGN=Next Generation Networking TISPAN：提供了DSL访问的规范 TISPAN=tispan=Telecoms & Internet converged Services & Protocols for Advanced Networks=电信和互联网融合业务及高级网络协议 SGW=Signaling Gateway 作用：在传输层（SCCP, SCTP）中处理信号转换 A-RACF=Access - Resource and Admission Control Function NASS=Network Attachment Subsystem=网络附着子系统 DSLAM=Digital Subscriber Line Access Multiplexer 更侧重interface接口的IMS架构 其他版本的架构 简化版IMS架构 IMS总体架构 IMS architecture for SBC 相关架构 IMS方案 FiberHome IMS Solution IMS架构和接口 3GPP R7参考模型 IMS网络架构 IMS and MSRP 基于IMS的下一代服务平台 Service Convergence in Quadruple Play NG Service Platform The IMS-based Design OMA IMS in OMA服务环境上下文 OMA SIMPLE 即时通讯参考模型 Parlay X网络服务 SOA Heterogeneous Services Bus IMS-SOA Architecture crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_org_relation/":{"url":"ims_org_relation/","title":"IMS组织关系","keywords":"","body":"IMS组织关系 此处整理IMS及相关组织和协议的关系： 具体细节是： IMS 是3GPP组织定义的 利用了现有的各种协议 IETF 资源定位 URI 新 RFC 3986 旧： RFC 2396 会话控制 SIP RFC 3261 SDP RFC 2327 授权和认证 Diameter=Diameter Base Protocol 新 RFC 6733 旧 RFC 3588 RFC 5719 HTTP Authentication: Basic and Digest Access Authentication RFC 2617 格式：Authorization: Basic 实时数据传输 RTP RFC 3550 3GPP TS 23.060 GPRS TS 23.228 IMS (stage 2) TS 24.228 Signalling flows for the IP multimedia call control based on SIP and SDP TS 24.229 IP multimedia call control protocol based on Session Initiation Protocol (SIP) and Session Description Protocol (SDP), Stage 3 TS 24.279 Combining Circuit Switched (CS) and IP Multimedia Subsystem (IMS) services, Stage 3 TS 25.301 UTRAN TS 29.228 IP Multimedia (IM) Subsystem Cx and Dx Interfaces; Signalling flows and message contents TS 29.229 UMTS LTE Cx and Dx interfaces based on the Diameter protocol OMA Instant Messaging using SIMPLE Architecture Instant Messaging Requirements Instant Messaging using SIMPLE Presence SIMPLE Architecture Resource List Server (RLS) XDM Specification 3GPP=3rd Generation Partnership Project=第三代合作伙伴计划 是什么：一个组织机构 目标：统一各方的电信方面的标准 在国际电信联盟的IMT-2000计划范围内制订和实现全球性的（第三代）移动电话系统规范。 致力于GSM到UMTS(W-CDMA)的演化 各方（合作伙伴）包括 日本：ARIB、TTC 欧洲：ETSI 中国：CCSA 韩国：TTA 美国：ATIS 印度：TSDSI 具体制定标准 组织形式 TSG=Technical Specification Group=技术规范组 WG=Working Group=工作组 现状 目前有3个TSG，每个TSG下面又有多个WG 不过每个TSG中的每个WG负责不同方面的内容 具体关系 RAN=Radio Access Network RAN WG1：Radio Layer 1 specification RAN WG2：Radio Layer 2 and Radio Layer 3 RR specification RAN WG3：Iub Iur and Iu specification – UTRAN O&M requirements RAN WG4：Radio performance and protocol aspects (system) – RF parameters and BS conformance RAN WG5：Mobile terminal conformance testing RAN WG6：GERAN radio and protocol SA=Service and System Aspects SA WG1：Services SA WG2：Architecture SA WG3：Security SA WG4：Codec SA WG5：Telecom Management SA WG6：Mission-critical applications CT=Core Network and Terminals CT WG1：MM/CC/SM (lu) CT WG2：closed CT WG3：Interworking with external networks CT WG4：MAP/GTP / BCH/SS CT WG5：OSA (Now transferred to OMA) CT WG6：Smart Card Application Aspects 3GPP2 目标：致力于以IS-95（在北美和韩国应用广泛的CDMA标准，中国电信CDMA与之兼容）向IS-2000过渡 说明 和高通公司关系更加紧密 3GPP和3GPP2两者实际上存在一定竞争关系 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_element/":{"url":"ims_element/","title":"IMS元素","keywords":"","body":"IMS元素 此处整理IMS的各种元素，包括架构中的核心元素和其他相关元素。 其他IMS细节 通话连续性 SR-VCC Enhanced Single Radio Voice Call Continuity Architecture, 3GPP Rel-10 Roaming漫游 IMS Roaming Architecture with LBO and VoLTE MO Call Media Home Routed UNI NNI Reference Points IMS Protocol Stack协议栈 概述 Transport level interworking - Protocol Stack Service level interworking - Protocol Stack crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_element/core/":{"url":"ims_element/core/","title":"核心元素","keywords":"","body":"IMS核心元素 对于IMS架构 其中的： 核心元素和简介 AS=Application Server=应用服务器 Executes service logic associated with value-added services Provides enhanced and intelligent services to subscribers CSCF=Call Session Control Function=调用会话控制功能 P-CSCF=Proxy CSCF is the first point of contact and the control point for the User Equipment (UE) within the Service Provider network. It forwards session requests from the UE to the S-CSCF S-CSCF=Serving CSCF has access to the user subscription data and actually handles the session request I-CSCF=Interrogating CSCF is the first contact point within a Service Provider network for all incoming session requests from another Service Provider BGCF=Breakout Gateway Control Function Identifies the network that will be used for connecting IP sessions to the PSTN HSS=Home Subscriber Server=归属用户服务器=HSS用户数据库 Stores all the static and dynamic information for a subscriber Maintains a list of features and services associated with a user, and also the location and means of access to the user Provides user profile information SLF=Subscription Locator Function Queried during Registration and Session Setup to get the name of the HSS containing the required subscriber specific data MGCF=Media Gateway Control Function Controls the parts of the call state that pertain to connection control for media channels in a T-MGF MGW Selects the CSCF depending on the routing number for incoming calls from legacy networks Performs protocol conversion between ISUP and call control protocols (e.g., SIP) and maintains call states MRF MRFC=Multimedia Resource Function Controller Controls the media stream resources in the MRFP under direction from an S-CSCF or Application Server Interprets information coming from an AS or S-CSCF (e.g., session identifier) and controls MRFP accordingly MRFP=Multimedia Resource Function Processor Provides media resources under the direction of MRFC May generate media streams (e.g., multimedia announcements), mix incoming media streams for multiple parties, or process media streams (e.g., audio trans-coding, media analysis) PDF=Policy Decision Function Provides management of network QoS resources, authorization of resource allocations, and makes policy decisions with regard to use of network QoS resources SPDF=Service Policy Decision Function T-MGF=Trunk Media Gateway Function Terminates bearer channels from a switched circuit network and media streams from a packet network (e.g., RTP streams in an IP network) Establishes and releases connections between these channels under control of the MGCF in support of calls between PSTN and IP network SGF=Signaling Gateway Function Acts as a gateway between the IP call/session control signaling and the SS7-based PSTN signaling May provide signaling translation, for example between SIP and SS7 or simply signaling transport conversion e.g., SS7 over IP to SS7 over TDM A-BGF=Access Border Gateway Function Packet gateway between an access network and a core network used to mask a service provider’s network from access networks, through which UE accessing packet-based services (e.g., IMS, Internet) Functions may include Opening and closing gate, Traffic classification and marking, Traffic policing and shaping, Network address and port translation, and Usage information Under control of the PDF I-BGF=Interconnection Border Gateway Function Packet gateway used to interconnect a service provider’s core network with another service provider’s core network supporting the packet-based services Functions may be the same as that of the A-BGF I-BCF=Interconnection Border Control Function Controls I-BGF to interwork with other packet-based networks May support the following functions (not limited to) Inter-domain protocol normalization and/or repair Inter-domain protocol interworking Interaction with PDF for resource reservation, resource allocation, and/or other resource related information MRB=Media Resource Broker Assigns specific media server resources to incoming calls at the request of service applications (i.e., an AS) Acquires knowledge of media server resources utilization and reservation requests that it can use to help decide which media server resources to assign to resource requests from applications Employs methods/algorithms to determine media server resource assignment crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_element/core/as.html":{"url":"ims_element/core/as.html","title":"AS","keywords":"","body":"AS AS=Application Server=应用服务器 作用：负责和提供SIP应用服务器服务 其他说明 它与S-CSCF之间使用SIP 模式 基于具体的服务不同，AS可以选择不同的SIP模式 SIP代理模式 SIP用户代理（UA=User Agent）模式 SIP B2BUA模式 部署位置 可以设置在：IMS本网内 如果位于本网，它还可以使用Sh或Si接口查询HSS。 也可以设置在：外部的第三方网络 典型案例 VCC Server 由3GPP开发的语音持续调用功能 SIP AS 负责和提供IMS具体服务 IM-SSF =IP Multimedia Service Switching Function=IP多媒体切换功能 SIP和CAP之间的接口，用于与CAMEL应用服务器通信 OSA SCS =OSA Service Capability Server=OSA服务性能服务器 OSA=Open Service Architecture=开放服务架构 SIP和OSA框架之间的接口 多个OSA服务之间的交互 功能模型 AD-ILCM和AS-OLCM用来保存事务状态并且可以根据特定服务的需要保存会话状态 对于S-CSCF来说 AS-ILCM接口是输入端 AS-OLCM接口是输出端 应用逻辑提供服务和AS-ILCM、AS-OLCM之间的交互 PSI =Public Service Identity=公共服务标识 用来标识应用服务提供的服务 PSI可以提供两种标识格式 SIP URI Tel URI 通常被HSS以完整PSI或通配PSI保存 说明 完整PSI包含完整的PSI标识，可以直接用来路游 通配PSI表达一组PSI标识 IMS-SSF IMS-SSF IMS-SSF=IMS - Service Switching=IM-SSF 是什么：相当于一个网管gateway 介于两者之间 基于SIP/Diameter的IMS 基于CAP的CAMEL的AS 实现互相转换 SIP/Diameter的消息 CAP的消息 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_element/core/cscf.html":{"url":"ims_element/core/cscf.html","title":"CSCF","keywords":"","body":"CSCF CSCF=Call Session Control Function=调用会话控制功能 是什么 SIP服务器和代理共同实现通话控制功能，统称为：CSCF 会话控制流程 功能：它们在IMS系统中处理SIP信号数据包 包含 P-CSCF=Proxy CSCF 概述 is the first point of contact and the control point for the User Equipment (UE) within the Service Provider network. It forwards session requests from the UE to the S-CSCF 是一个SIP代理，作为与IMS终端直联通信点 它可以设置在公网中也可以设置在IMS本网中 某些网络在这个功能组中可能使用了SBC SBC= Session Border Controller=会谈边界控制器 P-CSCF其核心是一个特殊的SBC 该SBC使用的用户网络接口不仅保护网络，也保护了IMS终端 在IMS终端和P-CSCF之间传递加密信号时，使用附加的SBC是毫无意义同时也是不可用的。 终端可以使用DHCP协议来找到它的P-CSCF，也可以使用配置（如出厂设置、3GPP IMS管理对象）、或是记录在ISIM中、或是在PDP环境（GPRS PDP Context）中赋值。 其他说明 它在IMS终端注册之前就被分派给IMS终端，并且在注册期间不会改变 它位于所有信号的通路，可以检查所有的信号。IMS终端必须忽略任何其它未加密的信号。 它提供用户的认证，并且为IMS终端创建一个IPsec或TLS连接。这样可以阻止欺骗攻击和重放攻击，并且保护用户的隐私。 它检查信号，确保IMS终端没有企图作弊（比如改变通常信号路游，不遵守IMS网络路游策略） 它也可以使用SigComp压缩和解压缩SIP信息，以降低较慢的无线电链路的负载。 它也可以加入PDF。它可以允许媒体水平的资源（如QoS）可以达到媒体水平。它也可以用作策略控制、带宽管理等等。 PDF=Policy Decision Function=策略决择功能 SPDF=Serving Policy Decision Function QoS=Quality of Service PDF也可以作为独立的功能组 它也产生费用记录 S-CSCF=Serving CSCF 概述 has access to the user subscription data and actually handles the session request 从信号层面的来看，S-CSCF是IMS子系统的核心节点 它虽然是SIP服务器，但也负责会话的控制 它永远设置在IMS本网络中，径直地使用Cx和Dx接口访问HSS 它从HSS下载用户配置并且上传用户与S-CSCF关系信息 出于对处理用户配置效率的考虑，S-CSCF会在其本地缓存用户配置。但它不会在本地对用户配置进行更改 所有必要的用户配置信息都会从HSS那里加载 其他说明 它负责处理SIP注册。它会将用户位置（如终端的IP地址）和SIP地址进行绑定。 它位于所有在它那里注册的用户所发出的信号信息的通路上，可以检查所有的信息。 它负责决定SIP信息将抵达哪一个应用服务处理，以完成应用服务。 它提供路游服务，通常是使用电子号码（ENUM - Electronic Numbering）查找 它运行网络运营商的策略 出于分布式负载和高可靠性的原因，IMS网络中允许设置多个S-CSCF。这种情况下，由HSS在用户配置记录哪一个S-CSCF被关系到该用户，而后由I-CSCF来查询这些记录。 I-CSCF=Interrogating CSCF 概述 is the first contact point within a Service Provider network for all incoming session requests from another Service Provider 是另一个位于管理域边缘的功能组 它的IP地址通过DNS发布，所以远程服务器可以查找到它，并把它作为向它所在的域传递SIP包的跳点 功能 它查询HSS，获取S-CSCF的地址并且分派给用户以完成SIP注册。 它也为S-CSCF传递SIP请求和回应 直到IMS第6版，它是可以用来把内网隐藏起来，使外部网络无法获取内部网络的信息（加密部分SIP信息）。这里称之为THIG THIG=Topology Hiding Inter-network Gateway=隐藏内部网络拓扑网关 从第7版开始，这个功能从I-CSCF移走，作为IBCF的一部分。IBCF被用作外部网络的网关，提供NAT和防火墙功能。IBCF实际上是NNI的会谈边界控制器的裁剪版本。 IBCF=Interconnection Border Control Function=互联边界控制功能组 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_element/core/hss.html":{"url":"ims_element/core/hss.html","title":"HSS","keywords":"","body":"HSS HSS=Home Subscriber Server=归属用户服务器=HSS用户数据库 功能 Stores all the static and dynamic information for a subscriber Maintains a list of features and services associated with a user, and also the location and means of access to the user Provides user profile information 主用户数据库 它为IMS网络中实际管理通话的实体提供支持 如访问用户相关的信息（称之为用户配置），对用户认证和授权以及 提供用户位置IP地址等相关信息 在同时使用多个HSS时，需要SLF映射用户保存的位置 SLF=Subscriber Location Function=用户位置功能组 即当查询某个用户配置时，由SLF指出哪个HSS保存了这个用户配置 保存用户信息 IMPU IMPI IMSI=国际移动用户标识符 MSISDN 用户服务配置 服务开关 其它信息 其他说明 类似的 GSM的 HLR=Home Location Regiser=归属位置寄存器 AuC=Authentication Centre=认证中心 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_element/core/mrf.html":{"url":"ims_element/core/mrf.html","title":"MRF","keywords":"","body":"MRF MRF =Media Resource Function=媒体资源功能组 提供与媒体相关的功能，包括媒体处理（如混音）、播放拨号音和语音提示 进一步划分为 MRFC=Media Resource Function Controller=媒体资源功能控制器 MRFC是信号层面的节点，它根据来自AS和S-CSCF的信息来操控MRFP 作用类似于：SIP B2BUA MRFP=Media Resource Function Processor=媒体资源功能处理器 MRFP是媒体层面的节点，用来混合、产生或者处理媒体流。 它也可以管理共享资源的访问权限 MRB =Media Resource Broker=媒体资源协商器 一个功能实体。 负责收集已经发布的MRF信息，并且向AS这样的信息消费实体提供适当的MRF信息。 MRB通常有两个模式： 查询模式：AS主动查询MRB相应的媒体并且创建使用MRB回应的调用。 线性模式：AS向MRB发送SIP INVITE，由MRB创建调用。 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_element/core/bgcf.html":{"url":"ims_element/core/bgcf.html","title":"BGCF","keywords":"","body":"BGCF BGCF =Breakout Gateway Control Function=出口网关控制功能 是一个SIP代理，它处理来自S-CSCF的路由请求。 BGCF有基于电话号码的路由功能，用来选择与PSTN网络的接口点。 当BGCF发现被叫网络位于一个PSTN网络时，BGCF就选择一个媒体网关控制功能(MGCF)，将会话路由到MGCF，MGCF负责与PSTN网络交互。 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_element/core/mgcf.html":{"url":"ims_element/core/mgcf.html","title":"MGCF","keywords":"","body":"MGCF MGCF =Media Gateway Control Function=媒体网关控制功能 完成IMS网络与PSTN网络之间的调用控制协议转换 主要是将SIP消息转换成ISUP消息。 并控制IM-MGW中媒体信道，管理PSTN网络的承载和与IMS网络的IP流间的连接。 IMS MGW=IMS Media Gateway crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_element/core/bgf.html":{"url":"ims_element/core/bgf.html","title":"BGF","keywords":"","body":"BGF BGF=Border Gateway Function C-BGF=CBGF=Core - Border Gateway Function 是什么：一种访问网关access gateway 位置：介于某种访问网络access network和IMS核心网络（core network）之间 I-BGF=IBGF=Interconnection - Border Gateway Function 是什么：NNI的其中一种 位置：介于core(可信的）和 外部网络 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_element/related/":{"url":"ims_element/related/","title":"相关元素","keywords":"","body":"IMS其他相关元素 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_element/related/ip_sm_gw.html":{"url":"ims_element/related/ip_sm_gw.html","title":"IP-SM-GW","keywords":"","body":"IP-SM-GW IP-SM-GW=IP SM GW=IP-SM Gateway=IP Short-Messaging Gateway 一句话描述：一个用来实现SMS over IP的AS AS=Application Server 背景 希望通过IP发送SMS短信 SMS over IP IP-SM-GW网络架构 2 IPSMGW sites IPSMGW – CS Fallback 作用 概述 The IP-SM-GW shall provide the protocol interworking for delivery of the short message between the IP-based UE and the SMS-SC The message is routed to the SMS-SC for delivery to the SMS-based user or the message is received from the SMS-SC of an SMS-based UE for delivery to an IP-based UE 包括 to determine the domain (CS/PS or IMS) for delivery of a Short Message to connect to the SMS-GMSC using established MAP protocols, appearing to the SMS-GMSC as an MSC or SGSN using the E or Gd interfaces to respond to Send Routeing Information for Short Message requests made by the SMS-GMSC, and forwarded from the HSS, with its own address to connect to the SMS-IWMSC using established MAP protocols, appearing to the SMS-IWMSC as an MSC or SGSN using the E or Gd interfaces to connect to the HSS using established MAP protocols , to obtain the address of MSC/SGSN address(es) for SM termination in CS/PS to acquire and maintain knowledge of the association between the MSISDN, IMSI and the address of the S-CSCF serving of the user; to check that it has a valid address in SMS for the sender as well as the recipient when receiving an IMS message for an SMS user. The IP-SM-GW shall obtain a valid address for both from the SIP headers of the IMS message (e.g. the sender would be identified in the asserted id in form of TEL URI); for terminating procedures, to map the recipient’s address from an MSISDN/IMSI to TEL URI format when receiving an SMS for an IP-based UE, and then it is the responsibility of the IMS core to perform any further mapping towards a SIP URI as required; to act as an Application Server towards the IMS core; to perform domain selection to choose the appropriate domain to deliver a message to a recipient and to obtain the MSC and/or SGSN addresses from the HSS; and to manage flags indicating user availability for SMS termination in the HSS 架构 Architecture for providing SMS over a generic IP-CAN 子模块 IP-SM-GW stack IP-SM-GW Transport layer 相关 Short Message delivery with Transport-Level interworking Sh Reference Point Sh for Failover 具体实现 Sentinel SentinelIP-SM-GW in an LTE network GL Simulation of IP-SM-GW for SMS over IMS Network crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_related/":{"url":"ims_related/","title":"IMS相关","keywords":"","body":"IMS相关 和IMS相关的有很多协议： IMS相关协议 RFC 1889 Real-time Transport Protocol (RTP) RFC 2327 Session Description Protocol (SDP) RFC 2748 Common Open Policy Server protocol (COPS) RFC 2782 a DNS RR for specifying the location of services (SRV) RFC 2806 URLs for telephone calls (TEL) RFC 2915 the naming authority pointer DNS resource record (NAPTR) RFC 2916 E.164 number and DNS RFC 3261 Session Initiation Protocol (SIP) RFC 3262 reliability of provisional responses (PRACK) RFC 3263 locating SIP servers RFC 3264 an offer/answer model with the Session Description Protocol RFC 3310 HTTP Digest Authentication using Authentication and Key Agreement (AKA) RFC 3311 update method RFC 3312 integration of resource management and SIP RFC 3319 DHCPv6 options for SIP servers RFC 3320 signalling compression (SIGCOMP) RFC 3323 a privacy mechanism for SIP RFC 3324 short term requirements for network asserted identity RFC 3325 private extensions to SIP for asserted identity within trusted networks RFC 3326 the reason header field RFC 3327 extension header field for registering non-adjacent contacts (path header) RFC 3329 security mechanism agreement RFC 3455 private header extensions for SIP RFC 3485 SIP and SDP static dictionary for signaling compression RFC 3574 Transition Scenarios for 3GPP Networks RFC 3588 DIAMETER base protocol RFC 3589 DIAMETER command codes for 3GPP release 5 (informational) RFC 3608 extension header field for service route discovery during registration RFC 3680 SIP event package for registrations RFC 3824 using E164 numbers with SIP 以及其他相关内容。 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_related/etsi/":{"url":"ims_related/etsi/","title":"ETSI","keywords":"","body":"ETSI ETSI ETSI=European Telecommunications Standards Institute=欧洲电信标准协会 是什么：一个欧洲的技术组织/机构 全称：ETSI Technical Committee=ETSI技术委员会 总部：法国 目标：致力于欧盟范围内的ICT方面标准化 主要负责标准制定 主要涉及3方面=领域 电信 Telecommunications 信息技术 Information Technology 广播 Broadcasting 成员 来自 59国家 的653个成员 维度 3个维度 NGN NGN NGN=Next Generation Networking=下一代网络 范畴：ETSI的NGN 愿景=目标 基于IP的网络的内部和网络之间均可互操作 Inter-operable, Inter-domain All IP-based network 宽带接入 Broadband access 多媒体能力 Multi-media capabilities 支持多种服务的移动和漫游 Support mobility & nomadicity Multiple services 业务模型无关 Business Model Agnostic 服务范围 个人间通讯 Person-to-Person 会话 Conversational 概述 包含 语音电话Voice call 视频电话Video call 聊天 Chat 多媒体会话Multimedia Sessions 消息 Messaging 概述 包含 邮件eMail 短信SMS 增强短信EMS 多媒体消息MMS 即时通讯和状态呈现 IM & Presence 内容点播 Content-on-demand 概述 包含 浏览Browsing 下载Download 流媒体传输 Streaming 推送Push 广播Broadcast 实现多媒体=富媒体功能 主要特点 \"plugging in\" new Subsystem Separate Transport and Service Layers Open access to services from multiple operators Interoperability and flexible innovative services 核心组件=主要内容：包含各个子系统Subsystem IP connectivity subsystems NASS=Network Attachment Subsystem 主要功能 Access authentication NW configuration e.g. DHCP Location function RACS=Resource and Admission Control Subsystem 主要功能 Resource admission control in Access Network Service-oriented subsystems IMS = Core IMS 概述 Based on 3GPP IMS core 主要功能 3GPP IMS (R6) supporting multimedia services and adapted to accommodate xDSL-based access, and PSTN/ISDN Simulation & Emulation PES = PSTN/ISDN Emulation Subsystem=PSTN Emulation 概述 CS phones: emulate legacy CS core network 主要功能 A PSTN/ISDN Emulation Subsystem specifically tailored to allow TDM equipment replacement, while keeping legacy terminals unchanged 接入技术Access Technologies 主流网络 Mobile 3GPP standardization DSL=Digital Subscriber Line Wired & Wireless LAN Cable 旧网络=遗留网络 Legacy Networks PSTN/ISDN emulation Provides PSTN/ISDN service capabilities and interfaces using adaptation to an IP infrastructure PSTN/ISDN simulation Provides PSTN/ISDN-like service capabilities using session control over IP interfaces and infrastructure 版本和内容 TISPAN R1= Release 1 发布时间：2005年12月 内容 概述 Adopts the 3GPP IMS standard for SIP-based applications, and adds further functional blocks and subsystems to enable fixed access to IMS and to handle non-SIP applications 具体包含 Service capabilities Real time conversational services (Voice, Video calls/sessions) Messaging (Instant Messaging, MMS) and Presence PSTN/ISDN emulation and simulation Network Architecture 3GPP IMS (R6) core sub-system reused as basis for SIP-based services control xDSL access a primary focus Initial network-edge QoS controls TISPAN R2 时间：2008年4月 内容： TISPAN and 3GPP agreed on Common IMS platform 3GPP IMS (R7) Introduces new IMS enabled services and adds key elements Supplementary services (see 3GPP) IPTV (both IMS and non-IMS based) Home Networking Corporate networks and the NGN Additional support for Mobility & Nomadicity TISPAN R3 内容 Improvement of several aspects introduced in the previous Releases IPTV service evolution IP Network to Network interconnection Corporate Network interconnection Home Network interconnection QoS and Security CDN P2P Study crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_related/etsi/tispan.html":{"url":"ims_related/etsi/tispan.html","title":"TISPAN","keywords":"","body":"TISPAN 此处整理TISPAN相关内容。 TISPAN=tispan 一句话简介：ETSI下的一个工作组 是NGN的具体实现方案 the NGN global solution 往往也叫：TISPAN NGN 起源 2003年9月成立 合并自 SPAN=Services and Protocols for Advanced Networks 一个合并后的工作小组 合并自 SPS=Services, Protocols & Switching NA=Network Aspects 主要负责EURO-ISDN TIPHON=Telecommunications and Internet Protocol Harmonization Over Networks 1997年成立的 一个ETSI的项目 最开始研究VoIP 后来扩展到基于IP传输任何电信（包括MM=Multimedia=多媒体）数据 （TISPAN NGN ）架构=architecture 总体架构 架构含义解释 最初 NASS子系统 负责接入：地址管理、授权和认证等 RACS子系统：负责会话管理和控制 PSTN Emulation=PSTN仿真：支持非IMS的旧有系统 相关内容 生态和协议 概述 IPTV方面 IPTV协议生态 IPTV相关协议 IMS-based IPTV vs Integrated IPTV Specification协议规范 Protocols Used 特点Characteristic 测试方面 Home Network相关 Home Networking Security Service Requirements 架构和协议 说明 TISPAN sees Home Networks as an IMS NGN end-point Architecture Specifications IPTV Specifications Security, Energy Monitoring TV URI Home Networking Details详情 总体内容和架构 文字版 Service Layer Model Subsystems Core IMS= IP Multimedia Subsystem Other PES=PSTN/ISDN Emulation subsystem IPTV Subsystem Common components UPSF=User Profile Server Function SLF=Subscription Locator Function ASF=Application Server Function IWF=Interworking Function Transport layer Transport control sublayer NASS=Network Attachment Subsystem RACS=Resource and Admission Control Subsystem Transport processing function BGF=Border Gateway Function RCEF=Resource Control Enforcement Function ARF=Access Relay Function MGF=Media Gateway Function MRFP=Media Resource Function Processor SGF=Signalling Gateway Function AMF=Access Management Function BTF=Basic Transport Function EFF=Elementary Forwarding Function ECF=Elementary Control Function UE=User Equipment 图 TISPAN NGN overall architecture Example architecture with xDSL access Transport processing functions overview TISPAN R1参考模型 TISPAN 不同模块内容 Distributed subsystems Access and aggregation segments Common components overview Charging and Data Collection Functions Network interconnection at transfer level User Equipment=UE 说明 UE=User Equipment TE=Terminal Equipment CPN=Customer Premises Network CND=Customer Network Devices CNG=Customer Network Gateway R-MGF=Residential MGF Authentication NGN Authentication Levels crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_related/sip.html":{"url":"ims_related/sip.html","title":"SIP","keywords":"","body":"SIP SIP=Session Initiation Protocol=会话发起协议 SIP代理 消息类型 Requests INVITE ACK REFER OPTIONS BYE CANCEL REGISTER SUBSCRIBE NOTIFY MESSAGE Responses Success Redirection Forwarding Request failure Server failure Global failure crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_related/user_auth/":{"url":"ims_related/user_auth/","title":"用户和认证","keywords":"","body":"用户和认证 此处整理IMS中相关的用户标识，以及如何认证的过程。 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_related/user_auth/sim_card.html":{"url":"ims_related/user_auth/sim_card.html","title":"SIM卡","keywords":"","body":"SIM卡 SIM UICC=Universal integrated circuit card 别称：SIM卡 含义：在GSM或UTMS网络中移动终端中的智能卡=SIM卡 图 细节 包含应用（程序） 不同网络 GSM网络中，UICC中包含一个SIM应用 UTMS网络中，UICC中包含一个USIM应用 cdmaOne/CDMA2000网络中，UICC除了包含USIM和SIM外，还包含一个CSIM应用 一张卡可能包含多个程序 一张卡可能同时支持GSM和UTMS ISIM = IMS SIM 是什么：一种应用程序application USIM = Universal SIM = SIM UICC vs SIM vs ISIM vs USIM vs CSIM 关系 eSIM 传统=之前：把安全元素=Secure Element信息保存到SIM卡 现在=新的方式：可以把Secure Element保存到任意设备中 新方案：eSIM 需要 一种新的加载机制 需要新的可信平台和各种玩家一起配合 新技术：Remote SIM Provisioning technology 2种渠道 Consumer Solution=消费者方案=direct to consumer M2M solution=M2M方案= B2B2C=business to business to consumer 主要用于IoT 支持情况 Android 支持eSIM 利用嵌入式 SIM（又称 eSIM 或 eUICC）技术，移动用户可以在没有实体 SIM 卡的情况下，下载运营商配置文件并激活运营商服务。该技术是由 GSMA 推动的全球规范，支持在任何移动设备上进行远程 SIM 配置 (RSP)。从 Android 9 开始，Android 框架为访问 eSIM 和管理 eSIM 上的订阅配置文件提供了标准 API。借助这些 eUICC API，第三方可以在支持 eSIM 的 Android 设备上开发自己的运营商应用和 Local Profile Assistant (LPA)。 LPA 是一款独立的系统应用，应包含在 Android 构建映像中。eSIM 上的配置文件通常由 LPA 管理，因为 LPA 充当着 SM-DP+（准备、存储配置文件包并将其提供给设备的远程服务）和 eUICC 芯片之间的桥梁。LPA APK 可以视需要包含一个界面组件（又称 LPA 界面，简称 LUI），以便为最终用户提供一个中心位置来管理所有嵌入式订阅配置文件。Android 框架可自动发现可用的最佳 LPA 并与之连接，然后通过 LPA 实例路由所有 eUICC 操作 架构 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_related/user_auth/user_identitiy.html":{"url":"ims_related/user_auth/user_identitiy.html","title":"用户标识","keywords":"","body":"用户标识=User identities 用户标识=User Identities=User Identitiy IMS可以使用多种用户标识 IMPI=IP Multimedia Private Identity=IP多媒体私有标识 一种由主网络操作者永久性分派的全局性标识 可以用于注册、认证、管理和计费等用途 每个IMS用户可以有多个IMPI IMPU=IP Multimedia PUblic Identity=IP多媒体公共标识 当IMS用户想要和其他用户通信时，需要使用IP多媒体公有标识 它可以写在那个人的名片上 IMS允许一个IMPI上绑定多个IMPU。 IMPU也可以和其它电话共享 就像一个家庭使用一个电话号码 WPUI=Wildcarded Public User Identity=通配公共享户标识 表示一组相似的IMPU GRUU=Globally Routable User Agent URI=全局可路游用户代理统一资源标识符 一个由IMPU和UE实例组成的标识符 IMS中有两类GRUU 公共GRUU(P-GRUU) 明示了用户的IMPU并且长期有效 临时GRUU(T-GRUU) 隐藏了用户的IMPU 当用户显式注销T-GRUU或者过了有效期时，T-GRUU就会失效 说明 IMPI和IMPU是一种URI URI=统一资源标识符 它可以是 数字：Tel URI 举例 tel: +1-555-123-4567 字符标识符SIP URI 举例： sip:john.doe@example.com 去掉前缀后 举例 +31 72 5621771 sales@vc4.com IMS中用户身份和编号基础知识 IMS中用户身份和编号 基础知识 ISIM文件结构 ADFI SIM包含内容 EFIMPI – IMS private user identity, EFDOMAIN - Home Network Domain Name, EFIMPU - IMS Public User Identity (one or more), EFAD - Administrative Data (UE operation mode, e.g. normal or type approval), EFARR - Access Rule Reference (access rules for files located under the ISIM ADF), EFIST - ISIM Service Table (lists available optional services:P-CSCF address, Generic Bootstrapping Architecture (GBA), HTTP Digest, GBA-based Local Key Establishment Mechanism, support of P-CSCF discovery for IMS local break out), EFP-CSCF - P-CSCF Address (one or more), EFGBABP - GBA Bootstrapping parameters (contains the AKA Random challenge (RAND) and Bootstrapping Transaction Identifier (B-TID) associate with a GBA bootstrapping procedure), EFGBANL - GBA NAF List (contains the list of NAF_ID and B-TID associated to a GBA NAF derivation procedure) EFNAFKCA - NAF Key Centre Address (one or more). home domain Home network domain name 对应标准：IETF RFC 1035 Home network domain name derivation from IMSI IMPI Private user identity=Private Identity=IP Multimedia Private Identity=IMPI 每个IMS用户都有一个Private User Identities 是Home Network Operator网络运营商？分配的 用途 Registration注册 Authorisation授权 Administration管理 Accounting计费 形式 NAI=Network Access Identifier 语法：username@realm 举例 Private User Identity derivation from IMSI 3GPP中没有IMSI，所以需要从IMSI中推算出来 IMSI=International Mobile Subscriber Identity=国际移动用户识别码 Private user identity derivation from IMSI IMPU =Public User Identity=Public identity=IP Multimedia PUblic identity=IMPU 概述 每个IMS用户都有1或多个IMPU 任何用户都可以用IMPU去和其他用户通信 例如，可以被包含到一个商务名片中 格式 种类 SIP URI 协议标准：IETF RFC 3261 格式：sip:username@domain Tel URI 协议标准：IETF RFC 3966 E.164 number 格式：tel: 说明 不带分隔符 contains a global number without visual separators 举例 文字 SIP URI sip:jakub.bluszcz@ekiga.net Tel URI tel:48399571981 SIP URI sip:+1-212-555-1212 @gateway.com;user=phone 图 WPUI=Wildcarded Public User Identity=通配公共享户标识 IMPU可能会被以WPUI的方式存储在HSS中 WPUI目的是为了针对注册了大量的账号，且其处理方式都类似的场景实现优化 保存成一组类似的账号 也就是：WPUI=Wildcarded Public User Identity 语法 会用到ERE=Extended Regular Expression=扩展正则表达式 分隔符delimiter是：感叹号！ 举例 sip:user!.*!@example.com tel:4832376630!.*! 图 IMPI 和 IMPU 关系 Relationship of Private and Public User Identities crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_related/user_auth/ims_registration.html":{"url":"ims_related/user_auth/ims_registration.html","title":"IMS认证","keywords":"","body":"IMS用户认证 IMS认证总体流程 3GPP网络环境中，即使IMS（订阅）用户通过了PS域的认证，也还要经过IMS的IMPI的认证，才能继续访问IMS的服务 -》即2步认证 第一步：PS的认证 具体实现：3GPP AKA 第二步：IMS的IMPI 具体实现：IMS AKA 图 相关名词 IMPI=IP Multimedia Private Identity=IP多媒体私有识别码 AKA=Authentication and Key Agreement=认证和密钥协商 常称为：3GPP AKA UTMS AKA UTMS中的双向认证机制叫做：UTMS AKA IMS AKA 认证流程 认证成功 用户认证失败 网络认证失败 同步失败 Session Mode Messaging CallFlow IMS注册和认证 架构 IMS Registration – access networks VoLTE Registration 3GPP AKA IMS AKA IMS Registration crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_related/user_auth/sip_auth_reg.html":{"url":"ims_related/user_auth/sip_auth_reg.html","title":"SIP授权认证","keywords":"","body":"SIP授权认证 SIP confidentiality and integrity 相关 ESP=（IPsec 的）Encapsulating Security Payload SA=Security Association=安全关联 建立安全关联 SA1和SA2的使用 SIP Digest 是一种认证方法，只适用于非3GPP的访问网络 基于HTTP DIGEST，实现UE和HE之间的双向认证 SIP Digest SIP Digest with TLS SIP Digest with TLS GIBA=GPRS-IMS-Bundled Authentication 背景： 3GPP的IMS安全功能，很好 但是早期的时候，早期设备，并不能很好的支持这方面的功能 比如早期的2G手机，不支持USIM、ISIM 因为本身不支持IPsec 需要一个简单但够用的安全机制 -》出现了：GIBA 别名：early IMS security=早期IMS安全（机制） 原理 在HSS中创建一个安全绑定 在两者之间 SIP级的标识 ：公开/私有的用户身份 GRPS级别的 承载/网络层的标识：IP地址 GIBA认证流程 GAA=Generic Authentication Architecture 背景： 许多应用（程序）都有个需求是，在通讯之前，实现互相认证，以实现在一个客户端（比如UE）和一个AS（应用程序服务器）的通讯 所以需要一个通用认证的架构 -》GAA GAA应用举例 GAA机制签发资格证书 GBA =Generic Bootstrapping Architecture=通用引导架构 GBA架构 服务发现过程 BSF地址 引导初始化 GBA的引导过程的初始阶段 GBA引导过程 GBA引导使用过程 SSC架构 签发证书 相关 BSF=Bootstrapping Server Function NAF=Network Application Function crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_related/oma/":{"url":"ims_related/oma/","title":"OMA","keywords":"","body":"OMA crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_related/sbc.html":{"url":"ims_related/sbc.html","title":"SBC","keywords":"","body":"SBC SBC=Session Border Controller=会话边界控制器 是什么：一个 控制器=网络节点=网络元素 位置： 位于IMS系统中 介于2个网络之间的 作用：控制所有的数据传输 包括 信号signalling （媒体）数据media 协议 rfc5853 https://tools.ietf.org/html/rfc5853 用于解决各种问题 多种（访问 接入）网络multiple access networks IPv4/IPv6 SIP normalization VPNs 安全问题security issues DOS attacks topology hiding 加密 信号：TLS和IPSec 媒体数据：SRTP legislative issues=Regulatory=管制 emergency calls legal intercept interworking 媒体相关问题media related problems QoS transcoding media security 实际作用 最早：作为NAT SBC as a NAT 具体例子 VoLTE Call – Data Path 现状 各种类型SBC A-SBC I-SBC ICS-SBC Enterprise SBC Trunking SBC WebRTC GW 功能重叠或独立 某些功能可以独立出其他模块 比如 P-CSCF E-CSCF 最新：把SBC理解为负责安全和连接方面的功能 其他一些也可以被视为SBC的 CBGF E-CSCF ATCF ATGW EATF WebRTC GW ICE 从IMS角度 2种类型SBC 包含 A-SBC=Access-SBC 架构 相关内容=对应功能 P-CSCF=Proxy Call Session Control Function IMS-ALG=IMS Application Level Gateway IMS-AGW=IMS Access Gateway I-SBC=Interconnecting-SBC 相关内容=对应功能 IBCF=Interconnection Border Control Function TrGW=Translation Gateway THIG=Topology Hiding Interwork Gateway IWF 对比 A-SBC and I-SBC 稍微复杂点的情况 Call Forwarding and LI and Interconnect 漫游往往涉及到SBC 可能方案1 可能方案2 可能方案3 LBO-VR with OMR LBO-HR 其他相关架构 Logical Position of D-SBC and SmartEdge BGF in IMS or Other Multimedia Networks crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_related/osa/":{"url":"ims_related/osa/","title":"OSA","keywords":"","body":"OSA OSA OSA=Open Service Access 主要包含3个部分 Applications 举例：VPN, conferencing, location based applications 说明 单个应用可能由一个或多个AS而实现 AS=应用服务器 Framework Authentication Registration discovery function 一堆的SCS=Service Capability Server 提供服务的服务器 服务 举例 Call Control User Location 举例 CAMEL MExE 架构概览 Overview of Open Service Access OSA和其他架构关系 OSA SCS OSA SCS=OSA-SCS=OSA Service Capability Server 作用：相当于一个安全网关，介于底层网络和OSA架构中的应用 方便应用层访问（底层）网络的功能 提供了一个统一的接口 比如 OSA API 分2种 OSA API：对外部 OSA internal API：对内部 Parlay X Web Service 其中 网络功能Network Functionality 被称为 SCF=Service Capability Feature 也叫 Services 总结 此处：SCF=Service=Network Functionality 细节 OSA的3个主要部分之一 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_based/":{"url":"ims_based/","title":"基于IMS的技术","keywords":"","body":"基于IMS的技术 基于IMS实现的其他技术有： VoLTE RCS ViLTE VoWiFi crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_based/volte.html":{"url":"ims_based/volte.html","title":"VoLTE","keywords":"","body":"VoLTE VoLTE =Voice over LTE 出现背景 3GPP Release 8发布了LTE 现存几种系统 传统的：（基于CS的）语音voice服务 新的：（基于LTE的）多媒体短信SMS服务 范围：通过3G网络实现的 不带CS 几种方案 3GPP的CSFB IMS 非国际标准的VoLGA GSMA建议统一成一种：基于IMS的VoLTE 其他方式都转换成IMS的 Voice service migration 为何需要VoLTE 如果想要在4G网络中实现语音通话=打电话 之前： 需要额外部署实现一套3G网络，底层是用基于CS的方式，去实现语音数据传输，实现打电话 接入方式效率很低，还需要占用收取授权费的频谱 有了VoLTE 在已有的4G的LTE/EPC网络之上，基于PS的方式，传输控制信号和语音媒体数据，实现打电话 无需额外的3G网络 大大提高了通信效率 现状 VoLTE广泛流行，主流网络运营商都已支持 相关 ViLTE 作为VoLTE的补充 也是GMSA制定的规范 也正在被慢慢接受 前景 VoLTE和ViLTE逐渐成为基于IP的网络的核心服务 就像 语音是2G和3G网络的核心服务 功能 实现高清电话 用于帮助网络运营商对抗OTT互联网的VoIP服务 优势和特点 延迟更低，容量更高 对比 OTT的VoIP 其最大化利用了底层网络能力 会在一定程度上影响音视频服务的质量 支持QoS 架构 VoLTE的架构=Profile=configuration VoLTE network configuration -> VoLTE Profile中： 定义了：UNI 但是没定义：NNI 涉及到不同网络之间的交互和漫游 其他规范中定义了 GSMA PRD IR.92 Depiction of UE and Network Protocol Stacks in IMS Profile for Voice 作用 VoLTE中的 SIP 用于 （传输）控制（信号） registration authentication addressing call establishment call termination SDP 用于 （传输音视频）数据 RTP media and bandwidth negotiation 服务标准：SR-VCC SR-VCC=Single Radio Voice Call Continuity 背景 当LTE网络还没完全覆盖时，但却又希望提供VoLTE和ViLTE的服务 方案 为了解决当单射频UE在LTE/Pre-LTE 网络和2G/3G CS网络之间移动时，如何保证语音呼叫连续性的问题 3GPP提出的一种VoLTE语音业务连续性方案 实现2G/23到VoLTE的语音电话的无缝衔接 实现voice call continuity=持续性语言呼叫=保持语音的持续性（不断掉） 等级 eSRVCC= enhanced SR-VCC vSRVCC= video SR-VCC rSRVCC= reverse SR-VCC 具体实现路径（策略） 有多种 根据运营商的不同情况 可用的频谱多少 语音策略 技术架构 商业目标 市场情况 举例 逐渐演化的方式 以CSFB开始 先部署好IMS 在LTE网络没有完全覆盖之前 再引入SR-VCC 一步到位方式 当LTE网络完全覆盖后 再直接实现VoLTE 编解码codec EVS=Enhanced Voice Services 不同模式 WB=WideBand SWB=Super-WideBand FB=Full-Band 不同比特率 符合监管Regulatory 美国和加拿大 E-911 location requirements text-to-911 紧急和警报服务 emergency and alerting services 合法监听 lawful interception 政府优先服务 government priority services 漫游 架构=模型 旧：LBO=Local Breakout 新：S8HR=S8 Home Routed 涉及到多个方面 收费 billing and charging 紧急情况 emergency 合法监听 lawful interception 实现方案 举例 某公司：CATALEYA VoLTE VoLTE规范： 定义了 对于 移动端设备 网络 （至少）需要支持哪些功能 才能实现 互操作性 高质量的语言服务 基于IMS的 通过LTE实现 历史背景 SMS短信 SMS over generic IP CAN architecture SMSoIP - Registration UE originated SMS UE terminated SMS crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_based/rcs.html":{"url":"ims_based/rcs.html","title":"RCS","keywords":"","body":"RCS 详见独立教程： 5G消息RCS技术总结 RCS技术开发总结 VoLTE和RCS 共同特点 都是基于IMS架构演化出的新功能 共存 运营商部署VoLTE时，往往也会部署RCS 用于一步到位，支持全IP的网络 RCS可看成是旧的SMS和MMS的演化 在某些特定场景下，（比如信号不够好？）VoLTE也会用CS的服务作为补充 以RCS为基础的VoWiFi的电话，有时候可以作为VoLTE和CS的补充 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_based/vilte.html":{"url":"ims_based/vilte.html","title":"ViLTE","keywords":"","body":"ViLTE ViLTE =Video over LTE crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"ims_based/wowifi.html":{"url":"ims_based/wowifi.html","title":"VoWiFi","keywords":"","body":"VoWiFi VoWiFi =Voice over Wi-Fi 架构 TS-23-402 architecture enhancements for non-3GPP (non-roaming) access crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"appendix/":{"url":"appendix/","title":"附录","keywords":"","body":"附录 下面列出相关参考资料。 crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"appendix/terminology.html":{"url":"appendix/terminology.html","title":"名词术语","keywords":"","body":"名词术语 组织 电信 ETSI=European Telecommunications Standards Institute=欧洲电信标准协会 NGN=Next Generation Networking=下一代网络 TISPAN=Telecommunication and Internet Converged Services and Protocols for Advanced Networking=电信和互联网融合业务及高级网络(协议) ATIS=Alliance for Telecommunications Industry Solutions ARIB=Association of Radio Industries and Businesses TTC=Telecommunication Technology Committee CCSA=China Communications Standards Association ICT=Information and Communication Technologies TSDSI=Telecommunications Standards Development Society TTA=Telecommunications Technology Association ICT=Information and Communication Technologies=信息通讯技术 EU=European Union=欧盟 EURO-ISDN=欧洲综合业务数字网 IMS=IP Multimedia Subsystem Home Networking=HN 在特定范围内（例如家庭内部）通过有线 或无线方式将多个通信、家电等设备连接起来形成的内部网 ISF=Interworking Selection Function IWF=Interworking Function SMS-IWF MMS-IWF EMAIL-IWF USIM = Universal SIM BSF=Bootstrapping Server Function NAF=Network Application Function A-SBC=Access-SBC P-CSCF=Proxy Call Session Control Function IMS-ALG=IMS Application Level Gateway IMS-AGW=IMS Access Gateway I-SBC=Interconnecting-SBC IBCF=Interconnection Border Control Function TrGW=Translation Gateway THIG=Topology Hiding Interwork Gateway AS=Application Server=应用服务器 IM=IP Multimedia MMS=Multimedia Messaging Service LCS=Location Services HE=Home Environment VASP=Value Added Service Provider HE-VASP=Home Environment Value Added Service Provider SC=Service Capabilities SCF=Service Capability Feature SCS=Service Capability Server ISC=IMS Service Control MRF=Media Resource Function MRFC=Media Resource Function Controller MRFP=Media Resource Function Protocol SMSC=SMS-C=Short Message Service - Center CAP=CAMEL Application Part CAMEL=Customized Application for Mobile network Enhanced Logic 网络通用 NI=Network Interface UNI=User-Network Interface NNI=Network-Network Interface OMA CPM=Converged IP Messaging MO=Management Objects DM=Data Management CP=Contents Provisioning XDM=XML Document Management XDMS=XML Document Management Server PF=Participating Function CF=Controlling Function QoS=Quality of Service SR-VCC=Single Radio Voice Call Continuity eSRVCC= enhanced SR-VCC vSRVCC= video SR-VCC rSRVCC= reverse SR-VCC EVS=Enhanced Voice Services WB=WideBand SWB=Super-WideBand FB=Full-Band LBO=Local Breakout S8HR=S8 Home Routed UA=User Agent=用户代理 IM-SSF=IP Multimedia Service Switching Function=IP多媒体切换功能 OSA SCS=OSA Service Capability Server=OSA服务性能服务器 OSA=Open Service Architecture=开放服务架构 另：OSA=Open Services Access PSI=Public Service Identity=公共服务标识 IETF=Internet Engineering Task Force SIP=Session Initiation Protocol RTP=Real-time Transport Protocol=Realtime Transport Protocol TS=Technical specification UMTS=Universal Mobile Telecommunications System UTRAN=U-TRAN=UMTS Terrestrial Radio Access Network GSM=Global System for Mobile Communications crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "},"appendix/reference.html":{"url":"appendix/reference.html","title":"参考资料","keywords":"","body":"参考资料 DOING: * DONE: 【整理】IMS架构兼容不同阶段和类型无线网络 【整理】IMS即IP多媒体子系统详解 【整理】IMS系统中的User Identity用户标识用户身份相关基础知识 【已解决】rcsjta项目RCS中IMS认证方式GIBA和DIGEST区别 【整理】IMS相关知识学习：es_282001v020000m.pdf TISPAN NGN Functional Architecture 【整理】搞清楚RCS和IMS的架构逻辑关系 【整理】NGN和TISPAN和IMS架构和相关组织关系整理 【已解决】RCS和IMS相关机构组织及其协议之间的关系和逻辑 【整理】RCS相关基础知识：LTE VoLTE相关 【整理】什么是OSA-SCS和OSA AS 【整理】什么是IP-SM-GW 【整理】什么是IMS-SSF 【整理】eSIM是什么 基于IMS的固定和移动网络融合 - 技术现状IMS全面推动业务能力开放 ICT融合应用开启政企市场蓝海专题 — C114(通信网) IMS网络在全业务运营背景下的地位 - C114通信网 VoLTE移动语音演进之路 S.5 Network Domain Security for IMS – iTecTec IMS Identification and numbering | Rauf's Knowledge Portal ims_identification_and_numbering.pdf 实现 IMS | Android 开源项目 | Android Open Source Project IMS/SIP - RCS : Presence Notify ShareTechnote Much Ado about Registration | Real Time Communication Toward a Service Broker for telecom service integration in IMS network | Semantic Scholar Svyazcom — IM-SSF IP Multimedia Service Switching Function (IM-SSF) IM-SSF - IP Multimedia - Service Switching Function RFC 3398 - Integrated Services Digital Network (ISDN) User Part (ISUP) to Session Initiation Protocol (SIP) Mapping IMS: IP Multimedia Subsystem -- IP多媒体子系统 IP多媒体子系统 - MBA智库百科 IMS(IP多媒体子系统) - 核心网 - 通信人家园 - Powered by C114 Which ISP is available? Australian Broadband Guarantee Satellite Internet Service (original ABG), Plans & Bundles – IPSTAR Getting connected to IPSTAR Broadband (ABG) Satellite - IPSTAR Broadband A look into rural broadband - the ABG, NBN and Satellite | Compare Broadband es_282001v020000m.pdf Telecommunications and Internet converged Services and Protocols for Advanced Networking (TISPAN); NGN Functional Architecture TISPAN Overview of ETSI TISPAN IPTV ETSI TISPAN ETSI NGN Work: TISPAN Status 02_TISPAN_Muench.pdf IMS Identification and numbering Network Framework of IMS YUAN ZHANG China Telecom Beijing Research Institute RFC 3588 - Diameter Base Protocol RFC 6733 - Diameter Base Protocol RFC 3261 - SIP: Session Initiation Protocol RFC 3550 - RTP: A Transport Protocol for Real-Time Applications ts_183033v010103p.pdf RFC 2617 - HTTP Authentication: Basic and Digest Access Authentication Basic access authentication - Wikipedia Digital cellular telecommunications system (Phase 2+) Universal Mobile Telecommunications System (UMTS) LTE IP Multimedia (IM) Subsystem Cx and Dx Interfaces; Signalling flows and message contents Technical Specification Group Services and System Aspects; IP Multimedia Subsystem (IMS); Stage 2 (Release 6) RFC 3986 - Uniform Resource Identifier (URI): Generic Syntax RFC 2396 - Uniform Resource Identifiers (URI): Generic Syntax java.net Class URI Uniform Resource Identifier - Wikipedia ETSI - 3GPP Telecom Management 3GPP - Wikipedia ETSI - THIRD GENERATION PARTNERSHIP PROJECT 3GPP - 维基百科，自由的百科全书 Radisys & Mavenir: Monetizing VoLTE and RCS RCS VoLTE Interoperability Event 2012 Multivendor testing in global RCS/VoLTE Networks Messaging in RCS | Real Time Communication GSMA RCS Architecture | NETMANIAS Evolution of GSMA RCS standards | NETMANIAS IP Short Message Gateway | IP SM GW | Interop Technologies 23204-a20.pdf The IP-SM-GW architecture as suggested by the 3GPP TS 23.204 [7]. | Download Scientific Diagram Short Message delivery with Transport-Level interworking [7]. | Download Scientific Diagram IP-SM-GW Transport Level Interworking | Real Time Communication Sentinel IP Short Message Gateway Architecture guide SMS in 2G/3G | Real Time Communication Much Ado about Registration | Real Time Communication Messaging in RCS | Real Time Communication Sh Interface – What Is It Good for? | Real Time Communication Short Message Service (SMS) Test Solutions over LTE/IMS, UMTS and GSM Networks - Newsletter Jinny Software Ltd | IP-SM-GW-2012 IMS-SSF - IMS - Service Switching Function What is Service Switching Function (SSF)? IP多媒体子系统 - 维基百科，自由的百科全书 IMS-SSF IP Multimedia Subsystem - Wikipedia GSMA | RCC.13v1.0 - eSIM GSMA | What is eSIM? - eSIM GSMA | eSIM Specification - eSIM 实现 eSIM | Android 开源项目 | Android Open Source Project crifan.com，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2020-11-04 21:57:23 "}}